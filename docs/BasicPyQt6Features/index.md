---
prev:
  text: 'å¼•è¨€'
  link: '/Introduction'
next:
  false
---

# PyQt6 åŸºæœ¬åŠŸèƒ½

ç°åœ¨æ˜¯æ—¶å€™è¿ˆå‡ºä½¿ç”¨PyQt6åˆ›å»ºå›¾å½¢ç”¨æˆ·ç•Œé¢çš„ç¬¬ä¸€æ­¥äº†ï¼

åœ¨æœ¬ç« ä¸­ï¼Œæ‚¨å°†å­¦ä¹ PyQt6çš„åŸºç¡€çŸ¥è¯†ï¼Œè¿™äº›çŸ¥è¯†æ˜¯æ‚¨åˆ›å»ºä»»ä½•åº”ç”¨ç¨‹åºçš„åŸºç¡€ã€‚æˆ‘ä»¬å°†å¼€å‘ä¸€ä¸ªç®€å•çš„æ¡Œé¢çª—å£åº”ç”¨ç¨‹åºã€‚æˆ‘ä»¬å°†æ·»åŠ æ§ä»¶ï¼Œä½¿ç”¨å¸ƒå±€è¿›è¡Œæ’åˆ—å¹¶å°†è¿™äº›æ§ä»¶ä¸å‡½æ•°è¿æ¥ï¼Œä½¿æ‚¨èƒ½å¤Ÿé€šè¿‡å›¾å½¢ç”¨æˆ·ç•Œé¢è§¦å‘åº”ç”¨ç¨‹åºçš„è¡Œä¸ºã€‚

è¯·ä»¥æä¾›çš„ä»£ç ä¸ºæŒ‡å¯¼ï¼Œä½†è¿˜è¯·éšæ—¶è‡ªå·±åŠ¨æ‰‹å°è¯•ã€‚ è¿™å°±æ˜¯å­¦ä¹ è¿™äº›ä»£ç å¦‚ä½•å·¥ä½œçš„æœ€å¥½æ–¹æ³•ã€‚

![tips](tips.png)

> åœ¨æˆ‘ä»¬å¼€å§‹ä¹‹å‰ï¼Œæ‚¨éœ€è¦å®‰è£…ä¸€ä¸ªå¯ä»¥æ­£å¸¸è¿è¡Œçš„ PyQt6ã€‚å¦‚æœæ‚¨è¿˜æ²¡æœ‰å®‰è£…ï¼Œè¯·æŸ¥çœ‹ é™„å½•Aï¼šå®‰è£… PyQt6ã€‚

![alert](alert.png)

> ä¸è¦å¿˜è®°ä¸‹è½½æœ¬ä¹¦çš„æºä»£ç [http://www.pythonguis.com/d/pyqt6-source.zip](http://www.pythonguis.com/d/pyqt6-source.zip)!

## 3. æˆ‘çš„ç¬¬ä¸€ä¸ªåº”ç”¨ç¨‹åº

è®©æˆ‘ä»¬æ¥åˆ›å»ºç¬¬ä¸€ä¸ªåº”ç”¨ç¨‹åºï¼é¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„ Python æ–‡ä»¶â€”â€”æ‚¨å¯ä»¥éšæ„å°†å…¶å‘½åä¸ºæ‚¨å–œæ¬¢çš„ä»»ä½•åå­—ï¼ˆä¾‹å¦‚ï¼š`myapp.py`ï¼‰ï¼Œç„¶åå°†å®ƒä¿å­˜åœ¨ä¸€ä¸ªå¯ä»¥è®¿é—®çš„åœ°æ–¹ã€‚ æˆ‘ä»¬å°†åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ç¼–å†™æˆ‘ä»¬çš„ç®€å•åº”ç”¨ç¨‹åºã€‚

![tips](tips.png)

> æˆ‘ä»¬å°†åœ¨æ­¤æ–‡ä»¶ä¸­è¿›è¡Œç¼–è¾‘ï¼Œæ‚¨å¯èƒ½æƒ³è¦å›åˆ°ä»£ç çš„æ—©æœŸç‰ˆæœ¬ï¼Œæ‰€ä»¥è®°å¾—å®šæœŸå¤‡ä»½ã€‚

### åˆ›å»ºæ‚¨çš„åº”ç”¨ç¨‹åº

æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªåº”ç”¨ç¨‹åºçš„æºä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚ è¯·æ‚¨é€è¯é”®å…¥ï¼Œæ³¨æ„ä¸è¦å‡ºé”™ã€‚ å¦‚æœæ‚¨å¼„é”™äº†ï¼ŒPython ä¼šå‘Šè¯‰æ‚¨å“ªé‡Œå‡ºé”™äº†ã€‚ å¦‚æœæ‚¨ä¸æƒ³å…¨éƒ¨æ‰‹åŠ¨é”®å…¥ï¼Œè¿™ä¸ªæ–‡ä»¶åŒ…å«åœ¨è¿™æœ¬ä¹¦çš„æºä»£ç ä¸­.

*Listing 1. basic/creating_a_window_1.py*

```python
from PyQt6.QtWidgets import QApplication, QWidget
# ä»…ç”¨äºè®¿é—®å‘½ä»¤è¡Œå‚æ•°
import sys

# æ¯ä¸ªåº”ç”¨ç¨‹åºéœ€è¦ä¸€ä¸ªï¼ˆä¸”åªæœ‰ä¸€ä¸ªï¼‰QApplication å®ä¾‹
# è¾“å…¥ sys.argvï¼Œè¿™å¯ä»¥å…è®¸åº”ç”¨ç¨‹åºä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°
# å¦‚æœçŸ¥é“ä¸ä¼šä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°,ä¹Ÿå¯ä»¥ä½¿ç”¨ QApplication([])
app = QApplication(sys.argv)

# åˆ›å»ºä¸€ä¸ª Qt widgetä½œä¸ºæˆ‘ä»¬çš„çª—å£ã€‚
window = QWidget()
window.show() # è¿™å¾ˆé‡è¦!!!!! é»˜è®¤æƒ…å†µä¸‹ï¼Œçª—å£æ˜¯éšè—çš„ã€‚

# å¼€å§‹äº‹ä»¶å¾ªç¯
app.exec()

# æ‚¨çš„åº”ç”¨ç¨‹åºä¸ä¼šåˆ°è¾¾è¿™é‡Œï¼Œç›´åˆ°æ‚¨é€€å‡ºå¹¶ä¸”äº‹ä»¶å¾ªç¯ç»ˆæ­¢
```

é¦–å…ˆï¼Œå¯åŠ¨æ‚¨çš„åº”ç”¨ç¨‹åºã€‚ æ‚¨å¯ä»¥åƒä»»ä½•å…¶ä»– Python è„šæœ¬ä¸€æ ·ä»å‘½ä»¤è¡Œè¿è¡Œå®ƒï¼Œä¾‹å¦‚

```bash
python MyApp.py
```

æˆ–è€…ï¼Œå¯¹äº Python 3

```bash
python3 MyApp.py
```

ä»ç°åœ¨èµ·ï¼Œæ‚¨å°†çœ‹åˆ°ä¸‹é¢çš„æç¤ºæ¡†ï¼Œæç¤ºæ‚¨è¿è¡Œåº”ç”¨ç¨‹åºå¹¶æç¤ºæ‚¨æ¥ä¸‹æ¥å°†çœ‹åˆ°ä»€ä¹ˆã€‚

> ğŸš€ **è¿è¡Œå®ƒå§!** ç°åœ¨æ‚¨å°†çœ‹åˆ°æ‚¨çš„çª—å£ã€‚ Qt ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªçª—å£ï¼Œæ‚¨å¯ä»¥æ‹–åŠ¨å®ƒå¹¶è°ƒæ•´å…¶å¤§å°,å°±åƒæ‚¨è§è¿‡çš„å…¶ä»–çª—å£é‚£æ ·ã€‚

æ‚¨çœ‹åˆ°çš„å†…å®¹å–å†³äºè¿è¡Œè¿™ä¸ªç¤ºä¾‹çš„å¹³å°ã€‚ä¸‹å›¾å±•ç¤ºäº†åœ¨ *Windows*ã€*macOS* å’Œ *Linux (Ubuntuï¼‰*ä¸Šæ˜¾ç¤ºçš„çª—å£ã€‚
![Figure3](Figure3.png)

> å›¾ä¸‰: æˆ‘ä»¬åˆ†åˆ«åœ¨*Windows*ã€*macOS* å’Œ *Linux (Ubuntuï¼‰*ä¸Šæ˜¾ç¤ºçš„çª—å£

### ä»£ç ä¸­çš„æ­¥éª¤

è®©æˆ‘ä»¬é€è¡Œåœ°æŸ¥çœ‹ä»£ç ï¼Œä»¥ä¾¿å‡†ç¡®åœ°ç†è§£åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬å¯¼å…¥åº”ç”¨ç¨‹åºæ‰€éœ€çš„ PyQt6 ç±»ã€‚ è¿™é‡Œæˆ‘ä»¬å¯¼å…¥ `QApplication`ï¼ˆåº”ç”¨ç¨‹åºå¤„ç†ç¨‹åºï¼‰å’Œ `QWidget`ï¼ˆåŸºæœ¬çš„ç©º GUIæ§ä»¶)ï¼Œè¿™ä¸¤ä¸ªç±»éƒ½æ¥è‡ª `QtWidgets` æ¨¡å—ã€‚

```python
from PyQt6.QtWidgets import QApplication, QWidget
```

Qt çš„ä¸»è¦æ¨¡å—åŒ…æ‹¬ `QtWidgets`ã€`QtGui` å’Œ `QtCore`ã€‚

![tips](tips.png)

> æ‚¨å¯ä»¥ä½¿ç”¨ `from <module> import *`ï¼Œä½†è¿™ç§å…¨å±€å¯¼å…¥åœ¨ Python ä¸­é€šå¸¸æ˜¯ä¸å—æ¬¢è¿çš„ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œæˆ‘ä»¬å°†é¿å…ä½¿ç”¨å®ƒ

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª`QApplication` å®ä¾‹ï¼Œä¼ å…¥ `sys.arg`ï¼Œå³åŒ…å«ä¼ é€’ç»™åº”ç”¨ç¨‹åºçš„å‘½ä»¤è¡Œå‚æ•°çš„ Pythonåˆ—è¡¨

```python
app = QApplication(sys.argv)
```

å¦‚æœæ‚¨ä¸ä¼šä½¿ç”¨å‘½ä»¤è¡Œå‚æ•°æ¥æ§åˆ¶ Qtï¼Œæ‚¨å¯ä»¥ä¼ é€’ä¸€ä¸ªç©ºåˆ—è¡¨ï¼Œä¾‹å¦‚

```python
app = QApplication([])
```

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨å˜é‡å `window` æ¥åˆ›å»ºä¸€ä¸ª `QWidget` å®ä¾‹ã€‚

```python
window = QWidget()
window.show()
```

åœ¨ Qt ä¸­ï¼Œ*æ‰€æœ‰* é¡¶å±‚éƒ¨ä»¶éƒ½æ˜¯çª—å£ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬æ²¡æœ‰çˆ¶æ§ä»¶ï¼Œä¹Ÿä¸åµŒå¥—åœ¨å¦ä¸€ä¸ªæ§ä»¶æˆ–å¸ƒå±€ä¸­ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥åœ¨æŠ€æœ¯ä¸Šä½¿ç”¨ä»»ä½•æ‚¨å–œæ¬¢çš„æ§ä»¶æ¥åˆ›å»ºä¸€ä¸ªçª—å£ã€‚

![caution](caution.png)

> æˆ‘çœ‹ä¸åˆ°æˆ‘çš„çª—å£!
> æ²¡æœ‰çˆ¶ç±»çš„å°å·¥å…·é»˜è®¤æ˜¯ä¸å¯è§çš„ã€‚ å› æ­¤ï¼Œåœ¨çª—å£å¯¹è±¡åï¼Œæˆ‘ä»¬å¿…é¡»å§‹ç»ˆè°ƒç”¨ `.show()` æ¥ä½¿å…¶å¯è§ã€‚ æ‚¨å¯ä»¥ç§»é™¤ .show() å¹¶è¿è¡Œåº”ç”¨ç¨‹åºï¼Œä½†æ‚¨ä¼šæ— æ³•é€€å‡ºï¼

![tips](tips.png)

> ä»€ä¹ˆæ˜¯çª—å£ï¼Ÿ
> - ä¿å­˜åº”ç”¨ç¨‹åºçš„ç”¨æˆ·ç•Œé¢
> - æ¯ä¸ªåº”ç”¨ç¨‹åºè‡³å°‘éœ€è¦ä¸€ä¸ªï¼ˆ......ä½†ä¹Ÿå¯ä»¥æœ‰æ›´å¤šï¼‰
> - é»˜è®¤æƒ…å†µä¸‹ï¼Œå½“æœ€åä¸€ä¸ªçª—å£å…³é—­æ—¶ï¼Œåº”ç”¨ç¨‹åºå°†é€€å‡º

æœ€åï¼Œæˆ‘ä»¬è°ƒç”¨ `app.exec()` æ¥å¼€å§‹äº‹ä»¶å¾ªç¯ã€‚

### ä»€ä¹ˆæ˜¯äº‹ä»¶å¾ªç¯?

åœ¨å±å¹•ä¸Šæ˜¾ç¤ºçª—å£ä¹‹å‰ï¼Œæœ‰å‡ ä¸ªæœ‰å…³ Qt ä¸–ç•Œä¸­åº”ç”¨ç¨‹åºçš„ç»„ç»‡æ–¹å¼çš„å…³é”®æ¦‚å¿µéœ€è¦ä»‹ç»ä¸€ä¸‹.å¦‚æœæ‚¨å·²ç»ç†Ÿæ‚‰äº‹ä»¶å¾ªç¯ï¼Œå°±å¯ä»¥æ”¾å¿ƒåœ°è·³åˆ°ä¸‹ä¸€èŠ‚ã€‚

æ¯ä¸ª Qt åº”ç”¨ç¨‹åºçš„æ ¸å¿ƒéƒ½æ˜¯ `QApplication` ç±»ã€‚ æ¯ä¸ªåº”ç”¨ç¨‹åºéœ€è¦ä¸€ä¸ªï¼Œä¸”åªéœ€è¦ä¸€ä¸ª `QApplication` å¯¹è±¡æ‰å¯ä»¥è¿è¡Œã€‚ è¯¥å¯¹è±¡åŒ…å«åº”ç”¨ç¨‹åºçš„**äº‹ä»¶å¾ªç¯**â€”â€”ç®¡ç†æ‰€æœ‰å›¾å½¢ç”¨æˆ·ç•Œé¢äº¤äº’çš„æ ¸å¿ƒå¾ªç¯ã€‚

![figure4](figure4.png)

> å›¾4:Qtä¸­çš„äº‹ä»¶å¾ªç¯

ä¸åº”ç”¨ç¨‹åºçš„æ¯æ¬¡äº¤äº’â€”â€”æ— è®ºæ˜¯æŒ‰é”®ã€ç‚¹å‡»é¼ æ ‡è¿˜æ˜¯ç§»åŠ¨é¼ æ ‡â€”â€”éƒ½ä¼šäº§ç”Ÿä¸€ä¸ªäº‹ä»¶ï¼Œè¯¥äº‹ä»¶è¢«ç½®äº**äº‹ä»¶é˜Ÿåˆ—**ä¸­ã€‚åœ¨äº‹ä»¶å¾ªç¯ä¸­ï¼Œæ¯æ¬¡è¿­ä»£éƒ½ä¼šå¯¹é˜Ÿåˆ—è¿›è¡Œæ£€æŸ¥ï¼Œå¦‚æœå‘ç°æ­£åœ¨ç­‰ä¾¯çš„äº‹ä»¶ï¼Œç¨‹åºå°±ä¼šå°†äº‹ä»¶å’Œæ§åˆ¶æƒä¼ é€’ç»™ç‰¹å®šçš„äº‹ä»¶å¤„ç†ç¨‹åºã€‚äº‹ä»¶å¤„ç†ç¨‹åºä¼šå¤„ç†äº‹ä»¶ï¼Œç„¶åå°†æ§åˆ¶æƒä¼ é€’å›äº‹ä»¶å¾ªç¯ï¼Œç­‰å¾…å¤„ç†æ›´å¤šäº‹ä»¶ã€‚ æ¯ä¸ªåº”ç”¨ç¨‹åºåªèƒ½ç”±**ä¸€ä¸ª**äº‹ä»¶å¾ªç¯

![tips](tips.png)

> æœ‰å…³`QApplication` ç±»â€¦â€¦
>
> - `QApplication` åŒ…å« Qt äº‹ä»¶å¾ªç¯
> - éœ€è¦ä¸€ä¸ª `QApplication` å®ä¾‹
> - æ‚¨çš„åº”ç”¨ç¨‹åºå°†åœ¨äº‹ä»¶å¾ªç¯ä¸­ç­‰å¾…ï¼Œç›´åˆ°æœ‰æ“ä½œæ‰§è¡Œ
> - ä»»ä½•æ—¶å€™éƒ½åªæœ‰**ä¸€ä¸ª**äº‹ä»¶å¾ªç¯

### `QMainWindow`

æ­£å¦‚æˆ‘ä»¬åœ¨ä¸Šä¸€éƒ¨åˆ†ä¸­æ‰€å‘ç°çš„ï¼Œåœ¨ Qt ä¸­ä»»ä½•æ§ä»¶éƒ½å¯ä»¥æ˜¯çª—å£ã€‚ ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨ä½¿ç”¨ `QPushButton` ä»£æ›¿ `QtWidget`ã€‚ åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæ‚¨å°†å¾—åˆ°ä¸€ä¸ªæœ‰ä¸€ä¸ªå¯æŒ‰ä¸‹çš„æŒ‰é’®çš„çª—å£ã€‚

*Listing 2. basic/creating_a_window_2.py*

```python
import sys
from PyQt6.QtWidgets import QApplication, QPushButton

app = QApplication(sys.argv)

window = QPushButton("Push Me")
window.show()

app.exec()
```

è¿™å¤ªæ£’å•¦ï¼Œä½†å…¶å®ç”¨å¤„ä¸å¤§â€”â€”æ‚¨å¾ˆå°‘éœ€è¦ä¸€ä¸ªåªæœ‰ä¸€ä¸ªæ§ä»¶çš„ç”¨æˆ·ç•Œé¢ï¼ ä½†æ˜¯ï¼Œæ­£å¦‚æˆ‘ä»¬æ¥ä¸‹æ¥ä¼šå‘ç°çš„ï¼Œä½¿ç”¨å¸ƒå±€å°†éƒ¨ä»¶åµŒå¥—åˆ°å…¶ä»–éƒ¨ä»¶ä¸­çš„åŠŸèƒ½ç€æ‚¨å¯ä»¥åœ¨ä¸€ä¸ªç©ºçš„ `QWidget`ä¸­æ„å»ºå¤æ‚çš„ç”¨æˆ·ç•Œé¢ã€‚

ä¸è¿‡ï¼ŒQt å·²ç»ä¸ºæ‚¨æä¾›äº†è§£å†³æ–¹æ¡ˆâ€”â€”`QMainWindow`ã€‚ è¿™æ˜¯ä¸€ä¸ªé¢„åˆ¶çš„çª—å£éƒ¨ä»¶ï¼Œå®ƒæä¾›äº†å¤§é‡æ‚¨å¯èƒ½ä¼šä½¿ç”¨çš„æ ‡å‡†çª—å£åŠŸèƒ½ï¼ŒåŒ…æ‹¬å·¥å…·æ ã€èœå•ã€çŠ¶æ€æ ã€å¯åœé æ§ä»¶ç­‰ã€‚

æˆ‘ä»¬ç¨åä¼šäº†è§£è¿™äº›é«˜çº§åŠŸèƒ½ï¼Œä½†ç°åœ¨ï¼Œæˆ‘ä»¬å°†ä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ·»åŠ ä¸€ä¸ªç®€å•çš„ç©ºç™½`QMainWindow` çª—å£ã€‚

*Listing 3. basic/creating_a_window_3.py*

```python
from PyQt6.QtWidgets import QApplication, QMainWindow
import sys

app = QApplication(sys.argv)

window = QMainWindow()
window.show() # è¿™å¾ˆé‡è¦!!!!! é»˜è®¤æƒ…å†µä¸‹ï¼Œçª—å£æ˜¯éšè—çš„

# å¼€å§‹äº‹ä»¶å¾ªç¯
app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ‚¨ä¼šçœ‹åˆ°æ‚¨çš„ä¸»çª—å£ã€‚å®ƒçœ‹ä¸Šå»å’Œä¹‹å‰çš„é‚£ä¸ªå®Œå…¨ä¸€è‡´ï¼

ç›®å‰æˆ‘ä»¬çš„ `QMainWindow` å¹¶ä¸å¤ªæœ‰è¶£ã€‚æˆ‘ä»¬å¯ä»¥æ·»åŠ ä¸€äº›å†…å®¹æ¥æ”¹å–„å®ƒã€‚å¦‚æœæ‚¨æƒ³åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çª—å£ï¼Œæœ€å¥½çš„æ–¹æ³•æ˜¯ç»§æ‰¿ `QMainWindow`ï¼Œç„¶ååœ¨ `__init__` å—ä¸­åŒ…å«çª—å£çš„è®¾ç½®ã€‚è¿™ä½¿å¾—çª—å£çš„è¡Œä¸ºå¯ä»¥è‡ªåŒ…å«ã€‚æˆ‘ä»¬å¯ä»¥æ·»åŠ æˆ‘ä»¬è‡ªå·±çš„ `QMainWindow` å­ç±»â€”â€”ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬ç§°å®ƒä¸º `MainWindow`ã€‚

*Listing 4. basic/creating_a_window_4.py*

```python
import sys
from PyQt6.QtCore import QSize, Qt
from PyQt6.QtWidgets import (
    QApplication,
    QMainWindow,
    QPushButton,
) #1

# åˆ›å»ºå­ç±» QMainWindow æ¥è‡ªå®šä¹‰æ‚¨çš„åº”ç”¨ç¨‹åºçš„ä¸»çª—å£
class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__() #2
        
        self.setWindowTitle("My App")
        
        button = QPushButton("Press Me!")
        
        # è®¾ç½®çª—å£çš„ä¸­å¿ƒæ§ä»¶
        self.setCentralWidget(button) #3
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> 1. å¸¸ç”¨çš„ Qt æ§ä»¶æ€»æ˜¯ä» `QtWidgets` å‘½åç©ºé—´å¯¼å…¥ã€‚
> 2. æˆ‘ä»¬å¿…é¡»å§‹ç»ˆè°ƒç”¨ `super()` ç±»çš„ `__init__`æ–¹æ³•ã€‚
> 3. ä½¿ç”¨ `.setCentralWidget` åœ¨ `QMainWindow` ä¸­æ”¾ç½®ä¸€ä¸ªæ§ä»¶ã€‚

![tips](tips.png)

> å½“æ‚¨å­ç±»åŒ–ä¸€ä¸ª Qt ç±»æ—¶ï¼Œæ‚¨å¿…é¡»å§‹ç»ˆè°ƒç”¨`super`å‡½æ•°`__init__`ä»¥ä¾¿ Qt è®¾ç½®å¯¹è±¡ã€‚

åœ¨æˆ‘ä»¬çš„ `__init__` å—ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆä½¿ç”¨ `.setWindowTitle()` æ¥æ›´æ”¹æˆ‘ä»¬ä¸»çª—å£çš„æ ‡é¢˜ã€‚ ç„¶åï¼Œæˆ‘ä»¬å°†ç¬¬ä¸€ä¸ªçª—å£æ§ä»¶â€”â€”ä¸€ä¸ª `QPushButton` æ·»åŠ åˆ°çª—å£ä¸­é—´ã€‚è¿™æ˜¯ Qt ä¸­å¯ç”¨çš„åŸºæœ¬éƒ¨ä»¶ä¹‹ä¸€ã€‚ åœ¨åˆ›å»ºæŒ‰é’®æ—¶ï¼Œæ‚¨å¯ä»¥è¾“å…¥å¸Œæœ›æŒ‰é’®æ˜¾ç¤ºçš„æ–‡æœ¬ã€‚

æœ€åï¼Œæˆ‘ä»¬åœ¨çª—å£ä¸Šè°ƒç”¨ `.setCentralWidget()`ã€‚ è¿™æ˜¯ `QMainWindow` ç‰¹æœ‰çš„å‡½æ•°ï¼Œç”¨äºè®¾ç½®çª—å£ä¸­é—´çš„æ§ä»¶ã€‚

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ‚¨ä¼šå†ä¸€æ¬¡çœ‹åˆ°æ‚¨çš„ä¸»çª—å£ï¼Œä½†æ˜¯è¿™æ¬¡`QPushButton`æ§ä»¶ä¼šæ˜¾ç¤ºåœ¨ä¸­å¤®ã€‚æŒ‰ä¸‹æŒ‰é’®ï¼Œä½†æ˜¯ä»€ä¹ˆä¹Ÿä¸ä¼šå‘ç”Ÿï¼Œæˆ‘ä»¬å°†ä¼šç¨åæ¥è°ƒæ•´

![Figure5](Figure5.png)

> å›¾äº”ï¼šæ˜¾ç¤ºåœ¨*Windows*ï¼Œ*macOS*å’Œ*Linux*ä¸Šé¢çš„å«æœ‰ä¸€ä¸ª`QPushButton`çš„`QMainWindow`

![tips](tips.png)

> æ¸´æœ›ä½¿ç”¨æ§ä»¶ï¼Ÿ
> æˆ‘ä»¬ç¨åä¼šè¯¦ç»†ä»‹ç»æ›´å¤šæ§ä»¶ï¼Œä½†å¦‚æœæ‚¨æ²¡æœ‰è€å¿ƒï¼Œæƒ³å…ˆç¹ä¸ºå¿«çš„è¯ï¼Œå¯ä»¥çœ‹çœ‹[QWidget æ–‡æ¡£](http://doc.qt.io/qt-5/widget-classes.html#basic-widget-classes)ã€‚ å°è¯•å°†ä¸åŒçš„æ§ä»¶æ·»åŠ åˆ°æ‚¨çš„çª—å£ï¼

### è°ƒæ•´çª—å£å’Œæ§ä»¶çš„å¤§å°

å½“å‰çª—å£å¯è‡ªç”±è°ƒæ•´å¤§å°â€”â€”æ‚¨åªéœ€ç”¨é¼ æ ‡æŠ“ä½çª—å£ä»»ä½•ä¸€ä¸ªè§’ï¼Œå³å¯æ‹–åŠ¨å¹¶è°ƒæ•´çª—å£å¤§å°è‡³ä»»æ„å°ºå¯¸ã€‚è™½ç„¶å…è®¸ç”¨æˆ·è°ƒæ•´åº”ç”¨ç¨‹åºå¤§å°æ˜¯ä»¶å¥½äº‹ï¼Œä½†æœ‰æ—¶æ‚¨å¯èƒ½éœ€è¦å¯¹æœ€å°æˆ–æœ€å¤§å°ºå¯¸è®¾ç½®é™åˆ¶ï¼Œæˆ–å°†çª—å£é”å®šä¸ºå›ºå®šå¤§å°ã€‚

åœ¨ Qt ä¸­ï¼Œå°ºå¯¸é€šè¿‡ `QSize `å¯¹è±¡è¿›è¡Œå®šä¹‰ã€‚è¯¥å¯¹è±¡ä¾æ¬¡æ¥å—å®½åº¦å’Œé«˜åº¦å‚æ•°ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç å°†åˆ›å»ºä¸€ä¸ªå›ºå®šå°ºå¯¸çš„ 400x300 åƒç´ çª—å£ã€‚

*Listing 5. basic/creating_a_window_end.py*

```python
import sys

from PyQt6.QtCore import QSize, Qt
from PyQt6.QtWidgets import QApplication, QMainWindow, QPushButton

# åˆ›å»ºå­ç±» QMainWindow æ¥è‡ªå®šä¹‰æ‚¨çš„åº”ç”¨ç¨‹åºçš„ä¸»çª—å£
class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        button = QPushButton("Press Me!")
        
        self.setFixedSize(QSize(400, 300)) #1
        
        # è®¾ç½®çª—å£çš„ä¸­å¿ƒæ§ä»¶
        self.setCentralWidget(button)
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> 1. è®¾ç½®çª—å£å¤§å°

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ‚¨ä¼šçœ‹åˆ°ä¸€ä¸ªå›ºå®šå¤§å°çš„çª—å£â€”â€”è¯•ç€å»è°ƒæ•´å¤§å°å§ï¼Œè¿™ä¸ä¼šæˆåŠŸçš„

![Figure6](./Figure6.png)

> å›¾å…­ï¼šæˆ‘ä»¬çš„å›ºå®šå¤§å°çš„çª—å£ï¼Œæ³¨æ„æœ€å¤§åŒ–æ§ä»¶åœ¨*Windows* å’Œ *Linux* ä¸Šè¢«ç¦ç”¨ã€‚ åœ¨ *macOS* ä¸Šï¼Œæ‚¨å¯ä»¥å°†åº”ç”¨ç¨‹åºæœ€å¤§åŒ–ä»¥å¡«æ»¡å±å¹•ï¼Œä½†æ˜¯
> ä¸­å¤®æ§ä»¶ä¸ä¼šè¢«è°ƒæ•´å¤§å°ã€‚

é™¤äº†å¯ä»¥è°ƒç”¨ `.setFixedSize()` æ–¹æ³•å¤–ï¼Œæ‚¨è¿˜å¯ä»¥è°ƒç”¨ `.setMinimumSize()` å’Œ`.setMaximumSize() `æ–¹æ³•åˆ†åˆ«è®¾ç½®çª—å£çš„æœ€å°å’Œæœ€å¤§å°ºå¯¸ã€‚æ‚¨ä¸å¦¨äº²è‡ªå°è¯•ä¸€ä¸‹ï¼

![information](information.png)

> æ‚¨å¯ä»¥ç”¨åœ¨ä»»æ„æ§ä»¶ä¸­ä½¿ç”¨è¿™ç§æ–¹æ³•

åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº† `QApplication` ç±»ã€`QMainWindow` ç±»ã€äº‹ä»¶å¾ªç¯ï¼Œå¹¶å°è¯•å°†ä¸€ä¸ªç®€å•çš„æ§ä»¶æ·»åŠ åˆ°çª—å£ä¸­ã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†äº†è§£ Qt ä¸ºæ§ä»¶å’Œçª—å£ä¹‹é—´ä»¥åŠæ§ä»¶å’Œçª—å£ä¸æ‚¨è‡ªå·±çš„ä»£ç ä¹‹é—´çš„é€šä¿¡æä¾›çš„æœºåˆ¶ã€‚

![tips](tips.png)

> è¯·å°†æ–‡ä»¶çš„å‰¯æœ¬ä¿å­˜ä¸º `myapp.py`ï¼Œæˆ‘ä»¬ç¨åè¿˜ä¼šç”¨åˆ°å®ƒã€‚

## 4. ä¿¡å·ä¸æ§½

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»åˆ›å»ºäº†ä¸€ä¸ªçª—å£ï¼Œå¹¶æ·»åŠ äº†ä¸€ä¸ªç®€å•çš„æŒ‰é’®æ§ä»¶ï¼Œä½†è¯¥æŒ‰é’®æ²¡æœ‰ä»»ä½•åŠŸèƒ½ã€‚è¿™å®Œå…¨æ²¡æœ‰ç”¨å•Šâ€”â€”å½“æ‚¨åˆ›å»ºå›¾å½¢ç”¨æˆ·ç•Œé¢åº”ç”¨ç¨‹åºæ—¶ï¼Œé€šå¸¸ä¸€å®šå¸Œæœ›å®ƒä»¬èƒ½å¤Ÿæ‰§è¡ŒæŸäº›æ“ä½œï¼æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•ï¼Œå°†æŒ‰ä¸‹æŒ‰é’®çš„æ“ä½œä¸æ‰§è¡ŒæŸäº›æ“ä½œè”ç³»èµ·æ¥ã€‚åœ¨Qt ä¸­ï¼Œä¿¡å·å’Œæ§½æä¾›äº†è¿™ç§åŠŸèƒ½ã€‚

ä¿¡å·æ˜¯æ§ä»¶åœ¨å‘ç”ŸæŸäº›äº‹ä»¶æ—¶å‘å‡ºçš„é€šçŸ¥ã€‚è¿™äº›äº‹ä»¶å¯ä»¥æ˜¯æŒ‰ä¸‹æŒ‰é’®ã€è¾“å…¥æ¡†ä¸­æ–‡æœ¬çš„å˜åŒ–ã€çª—å£æ–‡æœ¬çš„å˜åŒ–ç­‰ç­‰ä»»ä½•äº‹æƒ…ã€‚è®¸å¤šä¿¡å·æ˜¯ç”±ç”¨æˆ·æ“ä½œè§¦å‘çš„ï¼Œä½†è¿™å¹¶ä¸æ˜¯ä¸€æ¡æ­»æ¿çš„è§„åˆ™ã€‚

é™¤äº†é€šçŸ¥å‘ç”Ÿçš„äº‹ä»¶å¤–ï¼Œä¿¡å·è¿˜å¯ä»¥å‘é€æ•°æ®ï¼Œå¹¶æä¾›æœ‰å…³å‘ç”Ÿçš„äº‹ä»¶çš„æ›´å¤šèƒŒæ™¯ä¿¡æ¯ã€‚

![tips](tips.png)

>  æ‚¨è¿˜å¯ä»¥åˆ›å»ºè‡ªå·±çš„è‡ªå®šä¹‰ä¿¡å·ï¼Œæˆ‘ä»¬å°†åœ¨ä¹‹åçš„â€œ32. æ‰©å±•ä¿¡å·â€ä¸­è¿›è¡Œæ¢è®¨ã€‚

æ§½æ˜¯ Qt ç”¨äºæ¥æ”¶ä¿¡å·çš„åç§°ã€‚åœ¨ Python ä¸­ï¼Œåº”ç”¨ç¨‹åºä¸­çš„ä»»ä½•å‡½æ•°ï¼ˆæˆ–æ–¹æ³•ï¼‰éƒ½å¯ä»¥ç”¨ä½œæ§½â€”â€”åªéœ€å°†ä¿¡å·è¿æ¥åˆ°å®ƒå³å¯ã€‚å¦‚æœä¿¡å·å‘é€æ•°æ®ï¼Œåˆ™æ¥æ”¶å‡½æ•°ä¹Ÿä¼šæ¥æ”¶åˆ°è¯¥æ•°æ®ã€‚è®¸å¤š Qt æ§ä»¶ä¹Ÿæœ‰è‡ªå·±çš„å†…ç½®æ§½ï¼Œè¿™æ„å‘³ç€æ‚¨å¯ä»¥ç›´æ¥å°† Qt æ§ä»¶è¿æ¥åœ¨ä¸€èµ·ã€‚

è®©æˆ‘ä»¬æ¥çœ‹çœ‹ Qt ä¿¡å·çš„åŸºæœ¬çŸ¥è¯†ä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬å°†æ§ä»¶è¿æ¥èµ·æ¥ä»¥ä¾¿åœ¨åº”ç”¨ç¨‹åºä¸­å®ç°å„ç§åŠŸèƒ½ã€‚

![tips](tips.png)

> è¯·åŠ è½½ä¸€ä»½æ–°çš„ `myapp.py` æ–‡ä»¶ç”¨äºæœ¬èŠ‚å†…å®¹å¹¶ä»¥æ–°åç§°ä¿å­˜

### `QPushButton`çš„ä¿¡å·

æˆ‘ä»¬ç®€å•çš„åº”ç”¨ç¨‹åºç›®å‰æœ‰ä¸€ä¸ª `QMainWindow`ï¼Œå…¶ä¸­ `QPushButton` è¢«è®¾ç½®ä¸ºä¸­å¤®æ§ä»¶ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†è¿™ä¸ªæŒ‰é’®ä¸ä¸€ä¸ªè‡ªå®šä¹‰çš„ Python æ–¹æ³•è¿æ¥èµ·æ¥ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåä¸º `the_button_was_clicked` çš„ç®€å•è‡ªå®šä¹‰æ§½ï¼Œå®ƒæ¥å—æ¥è‡ª `QPushButton` çš„ç‚¹å‡»ä¿¡å·ã€‚

*Listing 6. basic/signals_and_slots_1.py*

```python
from PyQt6.QtWidgets import (
    QApplication,
    QMainWindow,
    QPushButton,
) #1

import sys

class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__() #2
        
        self.setWindowTitle("My App")
        
        button = QPushButton("Press Me!")
        button.setCheckable(True)
        button.clicked.connect(self.the_button_was_clicked)
        
		# è®¾ç½®çª—å£çš„ä¸­å¿ƒæ§ä»¶
        self.setCentralWidget(button)
        
	def the_button_was_clicked(self):
        print("Clicked!")
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** å¦‚æœæ‚¨ç‚¹å‡»è¿™ä¸ªæŒ‰é’®æ‚¨å°†ä¼šåœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°æ–‡æœ¬â€Clicked!â€œ

*æ§åˆ¶å°è¾“å‡º*

```text
Clicked!
Clicked!
Clicked!
Clicked!
```

### æ¥æ”¶æ•°æ®

è¿™çœŸæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¼€å§‹ï¼æˆ‘ä»¬å·²ç»çŸ¥é“ä¿¡å·è¿˜å¯ä»¥å‘é€**æ•°æ®**ï¼Œä»¥æä¾›æ›´å¤šå…³äºåˆšåˆšå‘ç”Ÿçš„äº‹ä»¶çš„ä¿¡æ¯ã€‚`.clicked` ä¿¡å·ä¹Ÿä¸ä¾‹å¤–ï¼Œå®ƒè¿˜æä¾›äº†æŒ‰é’®çš„é€‰ä¸­ï¼ˆæˆ–åˆ‡æ¢ï¼‰çŠ¶æ€ã€‚å¯¹äºæ™®é€šæŒ‰é’®ï¼Œè¯¥çŠ¶æ€å§‹ç»ˆä¸º `False`ï¼Œå› æ­¤æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªæ§½å¿½ç•¥äº†è¿™äº›æ•°æ®ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥è®©æŒ‰é’®**å¯é€‰ä¸­**ï¼Œç„¶åçœ‹çœ‹æ•ˆæœã€‚

åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†æ·»åŠ ç¬¬äºŒä¸ªæ§½ç”¨äºè¾“å‡º**æ£€æŸ¥çŠ¶æ€**ã€‚

*Listing 7. basic/signals_and_slots_1b.py*

```python
import sys

from PyQt6.QtWidgets import (
	QApplication,
	QMainWindow,
	QPushButton,
) #1

class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__() #2
        
        self.setWindowTitle("My App")
        
        button = QPushButton("Press Me!")
        button.setCheckable(True)
        button.clicked.connect(self.the_button_was_clicked)
        button.clicked.connect(self.the_button_was_toggled)
        
        # è®¾ç½®çª—å£çš„ä¸­å¿ƒæ§ä»¶
        self.setCentralWidget(button)
        
    def the_button_was_clicked(self):
        print("Clicked!")
        
    def the_button_was_toggled(self, checked):
        print("Checked?", checked)
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** å¦‚æœæ‚¨ç‚¹å‡»äº†è¿™ä¸ªæŒ‰é’®ï¼Œæ‚¨å°†ä¼šçœ‹åˆ°å®ƒåœ¨è¢«ç‚¹å‡»ä¹‹åé«˜äº®äº†ã€‚è¯·å†æ¬¡ç‚¹å‡»å®ƒç„¶åæ¾å¼€ï¼Œå¹¶åœ¨æ§åˆ¶å°ä¸­æ£€æŸ¥çŠ¶æ€

*æ§åˆ¶å°è¾“å‡º*

```text
Clicked!
Checked? True
Clicked!
Checked? False
Clicked!
Checked? True
Clicked!
Checked? False
Clicked!
Checked? True
```

æ‚¨å¯ä»¥å°†ä»»æ„æ•°é‡çš„æ§½è¿æ¥åˆ°ä¸€ä¸ªä¿¡å·ï¼Œå¹¶å¯ä»¥åœ¨æ§½ä¸ŠåŒæ—¶å“åº”ä¸åŒç‰ˆæœ¬çš„ä¿¡å·ã€‚

### å­˜å‚¨æ•°æ®

é€šå¸¸ï¼Œå°†æ§ä»¶çš„å½“å‰çŠ¶æ€å­˜å‚¨åœ¨ Python å˜é‡ä¸­éå¸¸æœ‰ç”¨ã€‚è¿™æ ·å°±å¯ä»¥åƒå¤„ç†å…¶ä»– Python å˜é‡ä¸€æ ·å¤„ç†è¿™äº›å€¼è€Œæ— éœ€è®¿é—®åŸå§‹æ§ä»¶ã€‚æ‚¨å¯ä»¥å°†è¿™äº›å€¼å­˜å‚¨ä¸ºå•ç‹¬çš„å˜é‡ï¼Œæˆ–è€…æ ¹æ®éœ€è¦ä½¿ç”¨å­—å…¸ã€‚åœ¨ä¸‹ä¸€ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†æŒ‰é’®çš„é€‰ä¸­å€¼å­˜å‚¨åœ¨åä¸º `button_is_checked` çš„å˜é‡ä¸­ã€‚

*Listing 8. basic/signals_and_slots_1c.py*

```python
class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.button_is_checked = True #1
        
        self.setWindowTitle("My App")
        
        button = QPushButton("Press Me!")
        button.setCheckable(True)
        button.clicked.connect(self.the_button_was_toggled)
        button.setChecked(self.button_is_checked) #2
        
        # è®¾ç½®çª—å£çš„ä¸­å¿ƒæ§ä»¶
        self.setCentralWidget(button)
        
    def the_button_was_toggled(self, checked):
        self.button_is_checked = checked #3
        
        print(self.button_is_checked)
```

> 1. ä¸ºå˜é‡è®¾ç½®é»˜è®¤å€¼ã€‚
> 2. ä½¿ç”¨é»˜è®¤å€¼è®¾ç½®æ§ä»¶çš„åˆå§‹çŠ¶æ€ã€‚
> 3. å½“æ§ä»¶çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ›´æ–°å˜é‡ä»¥åŒ¹é…ã€‚

æ‚¨å¯ä»¥å¯¹ä»»ä½• PyQt6 æ§ä»¶ä½¿ç”¨ç›¸åŒçš„æ¨¡å¼ã€‚å¦‚æœæ§ä»¶æœªæä¾›å‘é€å½“å‰çŠ¶æ€çš„ä¿¡å·ï¼Œåˆ™æ‚¨éœ€è¦åœ¨å¤„ç†ç¨‹åºä¸­ç›´æ¥ä»æ§ä»¶æ£€ç´¢è¯¥å€¼ã€‚ä¾‹å¦‚ï¼Œè¿™é‡Œæˆ‘ä»¬æ­£åœ¨æ£€æŸ¥æŒ‰ä¸‹å¤„ç†ç¨‹åºä¸­çš„**é€‰ä¸­**çŠ¶æ€ã€‚

*Listing 9. basic/signals_and_slots_1d.py*

```python
class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.button_is_checked = True
        
        self.setWindowTitle("My App")
        
        self.button = QPushButton("Press Me!") #1
        self.button.setCheckable(True)
        self.button.released.connect(
            self.the_button_was_released
        ) #2
        self.button.setChecked(self.button_is_checked)
        
        # è®¾ç½®çª—å£çš„ä¸­å¿ƒæ§ä»¶
        self.setCentralWidget(self.button)
        
    def the_button_was_released(self):
        self.button_is_checked = self.button.isChecked() #3
        
        print(self.button_is_checked)
```

> 1. æˆ‘ä»¬éœ€è¦ä¿ç•™å¯¹æŒ‰é’®çš„å¼•ç”¨ï¼Œä»¥ä¾¿åœ¨æˆ‘ä»¬çš„æ§½ä¸­è®¿é—®å®ƒã€‚
> 2. é‡Šæ”¾ä¿¡å·åœ¨æŒ‰é’®é‡Šæ”¾æ—¶è§¦å‘ï¼Œä½†ä¸ä¼šå‘é€æ£€æŸ¥çŠ¶æ€ã€‚
> 3.  `.isChecked()` è¿”å›æŒ‰é’®çš„æ£€æŸ¥çŠ¶æ€ã€‚

### æ›´æ”¹ç•Œé¢

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»äº†è§£äº†å¦‚ä½•æ¥å—ä¿¡å·å¹¶å°†è¾“å‡ºæ‰“å°åˆ°æ§åˆ¶å°ã€‚ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œå¦‚ä½•åœ¨ç•Œé¢ä¸­è§¦å‘æŸäº›æ“ä½œå‘¢ï¼Ÿè®©æˆ‘ä»¬æ›´æ–°æ§½æ–¹æ³•æ¥ä¿®æ”¹æŒ‰é’®ï¼Œæ›´æ”¹æ–‡æœ¬å¹¶ç¦ç”¨æŒ‰é’®ï¼Œä½¿å…¶ä¸å†å¯ç‚¹å‡»ã€‚æˆ‘ä»¬è¿˜å°†æš‚æ—¶åˆ é™¤å¯é€‰çŠ¶æ€ã€‚

*Listing 10. basic/signals_and_slots_2.py*

```python
from PyQt6.QtWidgets import QApplication, QMainWindow, QPushButton

import sys

class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        self.button = QPushButton("Press Me!") #1
        self.button.clicked.connect(self.the_button_was_clicked)
        
        # è®¾ç½®çª—å£çš„ä¸­å¿ƒæ§ä»¶
        self.setCentralWidget(self.button)
        
    def the_button_was_clicked(self):
        self.button.setText("You already clicked me.") #2
        self.button.setEnabled(False) #3
        
        # æˆ‘ä»¬ä¹Ÿæ¥æ›´æ”¹çª—å£æ ‡é¢˜
        self.setWindowTitle("My Oneshot App")
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> 1. æˆ‘ä»¬éœ€è¦åœ¨ `the_button_was_clicked` æ–¹æ³•ä¸­è®¿é—®è¯¥æŒ‰é’®ï¼Œå› æ­¤æˆ‘ä»¬å°†å…¶å¼•ç”¨ä¿å­˜åœ¨ `self` ä¸­ã€‚
> 2. æ‚¨å¯ä»¥é€šè¿‡å‘ `.setText()` æ–¹æ³•ä¼ é€’ä¸€ä¸ªå­—ç¬¦ä¸²æ¥æ›´æ”¹æŒ‰é’®çš„æ–‡æœ¬ã€‚
> 3. è¦ç¦ç”¨æŒ‰é’®ï¼Œè¯·è°ƒç”¨ `.setEnabled()` æ–¹æ³•å¹¶ä¼ å…¥ Falseã€‚

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** å¦‚æœæ‚¨å•å‡»æŒ‰é’®ï¼Œæ–‡æœ¬å°†å‘ç”Ÿå˜åŒ–å¹¶ä¸”æŒ‰é’®å°†å°†å˜å¾—ä¸å¯ç‚¹å‡»ã€‚

æ‚¨å¹¶ä¸å±€é™äºæ›´æ”¹è§¦å‘ä¿¡å·çš„æŒ‰é’®ï¼Œæ‚¨å¯ä»¥åœ¨æ§½æ–¹æ³•ä¸­åšä»»ä½•æ‚¨æƒ³åšçš„äº‹æƒ…ã€‚ä¾‹å¦‚ï¼Œå°è¯•å°†ä»¥ä¸‹è¡Œæ·»åŠ åˆ° `_button_was_clicked` æ–¹æ³•ä¸­ï¼Œä»¥åŒæ—¶æ›´æ”¹çª—å£æ ‡é¢˜ã€‚

```python
self.setWindowTitle("A new window title")
```

å¤§å¤šæ•°æ§ä»¶éƒ½æœ‰è‡ªå·±çš„ä¿¡å·ï¼Œæˆ‘ä»¬ç”¨äºçª—å£çš„ `QMainWindow` ä¹Ÿä¸ä¾‹å¤–ã€‚

åœ¨ä¸‹é¢çš„æ›´å¤æ‚çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°† `QMainWindow` ä¸Šçš„ `.windowTitleChanged` ä¿¡å·è¿æ¥åˆ°è‡ªå®šä¹‰æ§½æ–¹æ³• `the_window_title_changed`ã€‚è¯¥æ§½è¿˜ä¼šæ¥æ”¶æ–°çª—å£æ ‡é¢˜ã€‚

*Listing 11. basic/signals_and_slots_3.py*

```python
from PyQt6.QtWidgets import QApplication, QMainWindow, QPushButton

import sys
from random import choice

window_titles = [ 
    "My App",
    "My App",
    "Still My App",
    "Still My App",
    "What on earth",
    "What on earth",
    "This is surprising",
    "This is surprising",
    "Something went wrong",
] #1


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.n_times_clicked = 0
        
        self.button = QPushButton("Press Me!")
        self.button.clicked.connect(self.the_button_was_clicked)
        
        self.windowTitleChanged.connect(
            self.the_window_title_changed
        ) #2
        
        # è®¾ç½®çª—å£çš„ä¸­å¿ƒæ§ä»¶
        self.setCentralWidget(self.button)
        
    def the_button_was_clicked(self):
        print("Clicked.")
        new_window_title = choice(window_titles)
        print("Setting title: %s" % new_window_title)
        self.setWindowTitle(new_window_title) #3
        
    def the_window_title_changed(self, window_title):
        print("Window title changed: %s" % window_title) #4
        
        if window_title == "Something went wrong":
            self.button.setDisabled(True)
            
            
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> 1. ä½¿ç”¨ random.choice() ä»çª—å£æ ‡é¢˜åˆ—è¡¨ä¸­è¿›è¡Œé€‰æ‹©ã€‚
> 2. å°†æˆ‘ä»¬çš„è‡ªå®šä¹‰æ§½æ–¹æ³• `the_window_title_changed` è¿æ¥åˆ° windowsçš„`.windowTitleChanged` ä¿¡å·ã€‚
> 3. å°†çª—å£æ ‡é¢˜è®¾ç½®ä¸ºæ–°æ ‡é¢˜ã€‚
> 4. å¦‚æœæ–°çª—å£æ ‡é¢˜ä¸ºâ€œSomething went wrongâ€ï¼ˆå‡ºç°é”™è¯¯ï¼‰ï¼Œåˆ™ç¦ç”¨è¯¥æŒ‰é’®ã€‚

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** åå¤ç‚¹å‡»æŒ‰é’®ï¼Œç›´åˆ°æ ‡é¢˜å˜ä¸ºâ€œSomething went wrongâ€ï¼ˆå‡ºç°é”™è¯¯ï¼‰ä¸”æŒ‰é’®å¤±æ•ˆã€‚

åœ¨è¿™ä¸ªä¾‹å­ä¸­æœ‰å‡ ç‚¹å€¼å¾—æ³¨æ„ã€‚

é¦–å…ˆï¼Œåœ¨è®¾ç½®çª—å£æ ‡é¢˜æ—¶ï¼Œ`windowTitleChanged` ä¿¡å·**å¹¶ä¸æ€»æ˜¯**è¢«å‘å‡ºã€‚åªæœ‰å½“æ–°æ ‡é¢˜ä¸ä¹‹å‰çš„æ ‡é¢˜**ä¸åŒ**æ—¶ï¼Œè¯¥ä¿¡å·æ‰ä¼šè¢«è§¦å‘ã€‚å¦‚æœæ‚¨å¤šæ¬¡è®¾ç½®ç›¸åŒçš„æ ‡é¢˜ï¼Œè¯¥ä¿¡å·åªä¼šç¬¬ä¸€æ¬¡è¢«è§¦å‘ã€‚

![tips](tips.png)

> è¯·åŠ¡å¿…ä»”ç»†æ£€æŸ¥ä¿¡å·è§¦å‘çš„æ¡ä»¶ï¼Œä»¥å…åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨æ—¶å‡ºç°æ„å¤–ã€‚

å…¶æ¬¡ï¼Œè¯·æ³¨æ„æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨ä¿¡å·å°†äº‹ç‰©é“¾æ¥åœ¨ä¸€èµ·ã€‚ä¸€ä¸ªäº‹ä»¶çš„å‘ç”Ÿâ€”â€”æŒ‰ä¸‹æŒ‰é’®â€”â€”å¯ä»¥è§¦å‘å…¶ä»–å¤šä¸ªäº‹ä»¶çš„å‘ç”Ÿã€‚è¿™äº›åç»­æ•ˆåº”æ— éœ€çŸ¥é“æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´å®ƒä»¬å‘ç”Ÿï¼Œè€Œæ˜¯ç®€å•åœ°éµå¾ªä¸€äº›ç®€å•çš„è§„åˆ™ã€‚å°†æ•ˆåº”ä¸è§¦å‘å®ƒä»¬çš„åŸå› åˆ†ç¦»æ˜¯æ„å»ºå›¾å½¢ç”¨æˆ·ç•Œé¢åº”ç”¨ç¨‹åºæ—¶éœ€è¦è€ƒè™‘çš„å…³é”®å› ç´ ä¹‹ä¸€ã€‚æˆ‘ä»¬å°†åœ¨æœ¬ä¹¦ä¸­å¤šæ¬¡æåŠè¿™ä¸€ç‚¹ï¼

åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†ä¿¡å·å’Œæ§½ã€‚æˆ‘ä»¬æ¼”ç¤ºäº†ä¸€äº›ç®€å•çš„ä¿¡å·ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨å®ƒä»¬åœ¨åº”ç”¨ç¨‹åºä¸­ä¼ é€’æ•°æ®å’ŒçŠ¶æ€ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä»‹ç» Qt ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºæä¾›çš„æ§ä»¶ä»¥åŠå®ƒä»¬æä¾›çš„ä¿¡å·ã€‚

### å°†æ§ä»¶ç›´æ¥è¿æ¥åœ¨ä¸€èµ·

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°äº†å°†æ§ä»¶ä¿¡å·è¿æ¥åˆ° Python æ–¹æ³•çš„ç¤ºä¾‹ã€‚å½“æ§ä»¶è§¦å‘ä¿¡å·æ—¶ï¼Œæˆ‘ä»¬çš„ Python æ–¹æ³•ä¼šè¢«è°ƒç”¨ï¼Œå¹¶æ¥æ”¶æ¥è‡ªä¿¡å·çš„æ•°æ®ã€‚ä½†æ‚¨å¹¶ä¸æ€»æ˜¯éœ€è¦ä½¿ç”¨ Python å‡½æ•°æ¥å¤„ç†ä¿¡å·â€”â€”æ‚¨ä¹Ÿå¯ä»¥å°† Qt æ§ä»¶ç›´æ¥ç›¸äº’è¿æ¥ã€‚

åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ª `QLineEdit` æ§ä»¶å’Œä¸€ä¸ª `QLabel` æ·»åŠ åˆ°çª—å£ä¸­ã€‚åœ¨çª—å£çš„ `__init__` ä¸­ï¼Œæˆ‘ä»¬å°†æˆ‘ä»¬çš„è¡Œç¼–è¾‘ `.textChanged` ä¿¡å·è¿æ¥åˆ° `QLabel` ä¸Šçš„ `.setText` æ–¹æ³•ã€‚ç°åœ¨ï¼Œæ¯å½“ `QLineEdit` ä¸­çš„æ–‡æœ¬å‘ç”Ÿæ›´æ”¹æ—¶ï¼Œ`QLabel` éƒ½ä¼šå°†è¯¥æ–‡æœ¬å‘é€åˆ°å…¶ `.setText` æ–¹æ³•ã€‚

*Listing 12. basic/signals_and_slots_4.py*

```python
from PyQt6.QtWidgets import (
    QApplication,
    QMainWindow,
    QLabel,
    QLineEdit,
    QVBoxLayout,
    QWidget,
)

import sys


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        self.label = QLabel()
        self.input = QLineEdit()
        self.input.textChanged.connect(self.label.setText) #1
        
        layout = QVBoxLayout() #2
        layout.addWidget(self.input)
        layout.addWidget(self.label)
        
        # è®¾ç½®çª—å£çš„ä¸­å¿ƒæ§ä»¶
        self.setCentralWidget(container)
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> 1. è¯·æ³¨æ„ï¼Œè¦å°†è¾“å…¥ä¸æ ‡ç­¾è¿æ¥èµ·æ¥ï¼Œè¾“å…¥å’Œæ ‡ç­¾éƒ½å¿…é¡»è¢«å®šä¹‰ã€‚
> 2. æ­¤ä»£ç å°†ä¸¤ä¸ªæ§ä»¶æ·»åŠ åˆ°å¸ƒå±€ä¸­ï¼Œå¹¶å°†å…¶è®¾ç½®åœ¨çª—å£ä¸Šã€‚æˆ‘ä»¬å°†åœ¨åç»­ç« èŠ‚ä¸­è¯¦ç»†ä»‹ç»è¿™ä¸€ç‚¹ï¼Œç°åœ¨å¯ä»¥å…ˆå¿½ç•¥å®ƒã€‚

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** è¯·åœ¨ä¸Šæ–¹çš„æ–¹æ¡†ä¸­é”®å…¥ä¸€äº›æ–‡å­—ï¼Œæ‚¨å°±ä¼šçœ‹åˆ°å®ƒç«‹å³å‡ºç°åœ¨æ ‡ç­¾ä¸Šã€‚

![Figure7](Figure7.png)

> å›¾ä¸ƒï¼šä»»ä½•è¾“å…¥è¿›æ¥çš„æ–‡æœ¬éƒ½ä¼šåœ¨æ ‡ç­¾ä¸Šç«‹å³æ˜¾ç¤º

å¤§å¤šæ•° Qt æ§ä»¶éƒ½æœ‰å¯ç”¨çš„æ§½ï¼Œæ‚¨å¯ä»¥å°†ä»»ä½•å‘å‡ºä¸å®ƒæ¥å—çš„**ç±»å‹ç›¸åŒ**çš„ä¿¡å·è¿æ¥åˆ°è¯¥æ§½ã€‚æ§ä»¶æ–‡æ¡£åœ¨â€œå…¬å…±æ§½â€ä¸‹åˆ—å‡ºäº†æ¯ä¸ªæ§ä»¶çš„æ§½ã€‚ä¾‹å¦‚ï¼Œè¯·å‚é˜… [QLabel](https://doc.qt.io/qt-5/qlabel.html#public-slots)ã€‚

## 5. æ§ä»¶

åœ¨ Qt ä¸­ï¼Œ**æ§ä»¶**æ˜¯æŒ‡ç”¨æˆ·å¯ä»¥ä¸ä¹‹äº¤äº’çš„ç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰ç»„ä»¶ã€‚ç”¨æˆ·ç•Œé¢ç”±å¤šä¸ªæ§ä»¶ç»„æˆï¼Œè¿™äº›æ§ä»¶è¢«æ’åˆ—åœ¨çª—å£å†…ã€‚Qt æä¾›äº†å¤§é‡å¯ç”¨çš„æ§ä»¶ï¼Œç”šè‡³å…è®¸æ‚¨åˆ›å»ºè‡ªå·±çš„è‡ªå®šä¹‰æ§ä»¶ã€‚

åœ¨æœ¬ä¹¦çš„ä»£ç ç¤ºä¾‹ä¸­ï¼Œæœ‰ä¸€ä¸ªåä¸º `basic/widgets_list.py` çš„æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥è¿è¡Œå®ƒæ¥åœ¨çª—å£ä¸­æ˜¾ç¤ºä¸€ç»„æ§ä»¶ã€‚å®ƒä½¿ç”¨äº†ä¸€äº›æˆ‘ä»¬ç¨åä¼šä»‹ç»çš„å¤æ‚æŠ€å·§ï¼Œæ‰€ä»¥ï¼Œç°åœ¨å…ˆä¸è¦æ‹…å¿ƒä»£ç çš„é—®é¢˜ã€‚

> ğŸš€**è¿è¡Œå®ƒå§ï¼** æ‚¨å°†ä¼šçœ‹åˆ°ä¸€ä¸ªåŒ…å«å¤šä¸ªäº¤äº’å¼æ§ä»¶çš„çª—å£ã€‚

![Figure8](Figure8.png)

> å›¾å…«ï¼šåœ¨*Windows*ï¼Œ*macOS* å’Œ *Linux(Ubuntu)* ä¸Šé¢å±•ç¤ºçš„æ§ä»¶åº”ç”¨ç¨‹åºçš„ä¾‹å­

ç¤ºä¾‹ä¸­æ˜¾ç¤ºçš„æ§ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼Œä»ä¸Šåˆ°ä¸‹ä¾æ¬¡ä¸ºï¼š

| æ§ä»¶             | ä½œç”¨                     |
| ---------------- | ------------------------ |
| `QCheckbox`      | å¤é€‰æ¡†                   |
| `QComboBox`      | ä¸‹æ‹‰åˆ—è¡¨æ¡†               |
| `QDateEdit`      | ç¼–è¾‘æ—¥æœŸ                 |
| `QDateTimeEdit`  | ç¼–è¾‘æ—¥æœŸå’Œæ—¶é—´           |
| `QDial`          | å¯æ—‹è½¬è¡¨ç›˜               |
| `QDoubleSpinbox` | æµ®ç‚¹æ•°å¾®è°ƒæ¡†             |
| `QFontComboBox`  | å­—ä½“åˆ—è¡¨                 |
| `QLCDNumber`     | ç›¸å½“éš¾çœ‹çš„ LCD æ˜¾ç¤ºå±    |
| `QLabel`         | ä¸èƒ½äº’åŠ¨çš„æ ‡ç­¾           |
| `QLineEdit`      | è¾“å…¥ä¸€è¡Œæ–‡æœ¬             |
| `QProgressBar`   | è¿›åº¦æ¡                   |
| `QPushButton`    | æŒ‰é’®                     |
| `QRadioButton`   | ä»…æœ‰ä¸€ä¸ªæœ‰æ•ˆé€‰é¡¹çš„é€‰é¡¹ç»„ |
| `QSlider`        | æ»‘å—                     |
| `QSpinBox`       | æ•´æ•°å¾®è°ƒæ¡†               |
| `QTimeEdit`      | ç¼–è¾‘æ—¶é—´                 |

è¿˜æœ‰æ›´å¤šæ§ä»¶ï¼Œä½†å®ƒä»¬å¹¶ä¸å¤ªé€‚åˆåœ¨è¿™é‡Œå…¨éƒ¨å±•ç¤ºï¼å®Œæ•´çš„åˆ—è¡¨è¯·å‚é˜… [Qt æ–‡æ¡£](https://doc.qt.io/qt-5/qtwidgets-module.html)ã€‚ä¸‹é¢æˆ‘ä»¬å°†ä»”ç»†çœ‹çœ‹ä¸€äº›æœ€æœ‰ç”¨çš„æ§ä»¶ã€‚

![tips](tips.png)

> è¯·æ‰“å¼€ä¸€ä¸ªæ–°çš„ `myapp.py` æ–‡ä»¶å¹¶ä»¥æ–°åç§°ä¿å­˜ä»¥å®Œæˆæœ¬èŠ‚å†…å®¹ã€‚

### `QLabel`

æˆ‘ä»¬å°†ä» `QLabel `å¼€å§‹ä»‹ç»ï¼Œå®ƒå¯ä»¥è¯´æ˜¯ Qt å·¥å…·ç®±ä¸­æœ€ç®€å•çš„æ§ä»¶ä¹‹ä¸€ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•çš„å•è¡Œæ–‡æœ¬ï¼Œæ‚¨å¯ä»¥å°†å…¶æ”¾ç½®åœ¨åº”ç”¨ç¨‹åºä¸­ã€‚æ‚¨å¯ä»¥åœ¨åˆ›å»ºæ—¶é€šè¿‡ä¼ é€’å­—ç¬¦ä¸²æ¥è®¾ç½®æ–‡æœ¬â€”â€”

```python
widget = QLabel("Hello")
```

æˆ–è€…ï¼Œé€šè¿‡ä½¿ç”¨ `.setText()` æ–¹æ³•â€”â€”

```python
widget = QLabel("1") # åˆ›å»ºçš„æ ‡ç­¾æ–‡æœ¬ä¸º 1
widget.setText("2")  # æ ‡ç­¾ç°åœ¨æ˜¾ç¤º 2
```

æ‚¨è¿˜å¯ä»¥è°ƒæ•´å­—ä½“å‚æ•°ï¼Œä¾‹å¦‚æ§ä»¶ä¸­æ–‡æœ¬çš„å¤§å°æˆ–å¯¹é½æ–¹å¼ã€‚

*Listing 13. basic/widgets_1.py*

```python
import sys

from PyQt6.QtCore import Qt
from PyQt6.QtWidgets import QApplication, QLabel, QMainWindow


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        widget = QLabel("Hello")
        font = widget.font() #1
        font.setPointSize(30)
        widget.setFont(font)
        widget.setAlignment(
            Qt.AlignmentFlag.AlignHCenter
            | Qt.AlignmentFlag.AlignVCenter
        ) #2
        
        self.setCentralWidget(widget)
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> 1. æˆ‘ä»¬ä½¿ç”¨ `<widget>.font()` è·å–å½“å‰å­—ä½“ï¼Œå¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œç„¶åå°†å…¶åº”ç”¨å›å»ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿å­—ä½“ä¸ç³»ç»Ÿå­—ä½“æ ·å¼ä¿æŒä¸€è‡´ã€‚
> 2. å¯¹é½æ–¹å¼é€šè¿‡ `Qt.`å‘½åç©ºé—´ä¸­çš„æ ‡å¿—æ¥æŒ‡å®šã€‚

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** è°ƒæ•´å­—ä½“å‚æ•°å¹¶æŸ¥çœ‹æ•ˆæœã€‚

![Figure9](Figure9.png)

> å›¾ä¹ï¼šåœ¨ *Windows*ï¼Œ*macOS* å’Œ *Linux(Ubuntu)* ä¸Šé¢çš„ `QLabel`

![tips](tips.png)

Qt å‘½åç©ºé—´ (`Qt.`) ä¸­åŒ…å«å„ç§å±æ€§ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨è¿™äº›å±æ€§æ¥å®šåˆ¶å’Œæ§åˆ¶ Qt æ§ä»¶ã€‚æˆ‘ä»¬å°†åœ¨åé¢çš„ â€œ35. æšä¸¾å’Œ Qt å‘½åç©ºé—´â€ ä¸­è¯¦ç»†ä»‹ç»è¿™ä¸€ç‚¹ã€‚

ç”¨äºæ°´å¹³å¯¹é½çš„æ ‡å¿—åŒ…æ‹¬â€”â€”

| æ ‡å¿—                            | è¡Œä¸º                       |
| ------------------------------- | -------------------------- |
| `Qt.AlignmentFlag.AlignLeft`    | ä¸å·¦è¾¹ç¼˜å¯¹é½               |
| `Qt.AlignmentFlag.AlignRight`   | ä¸å³è¾¹ç¼˜å¯¹é½               |
| `Qt.AlignmentFlag.AlignHCenter` | åœ¨å¯ç”¨ç©ºé—´å†…æ°´å¹³å±…ä¸­       |
| `Qt.AlignmentFlag.AlignJustify` | åœ¨å¯ç”¨ç©ºé—´å†…å¯¹æ–‡å­—è¿›è¡Œè°ƒæ•´ |

ç”¨äºå‚ç›´å¯¹é½çš„æ ‡å¿—åŒ…æ‹¬â€”â€”

| æ ‡å¿—                            | è¡Œä¸º                 |
| ------------------------------- | -------------------- |
| `Qt.AlignmentFlag.AlignTop`     | ä¸é¡¶éƒ¨å¯¹é½           |
| `Qt.AlignmentFlag.AlignBottom`  | ä¸åº•éƒ¨å¯¹é½           |
| `Qt.AlignmentFlag.AlignVCenter` | åœ¨å¯ç”¨ç©ºé—´ä¸­å‚ç›´å±…ä¸­ |

æ‚¨å¯ä»¥ä½¿ç”¨ç®¡é“ç¬¦ï¼ˆ`|`ï¼‰å°†å¤šä¸ªæ ‡å¿—ç»„åˆåœ¨ä¸€èµ·ï¼Œä½†è¯·æ³¨æ„ï¼Œæ¯æ¬¡åªèƒ½ä½¿ç”¨ä¸€ä¸ªå‚ç›´æˆ–æ°´å¹³å¯¹é½æ ‡å¿—ã€‚

```python
align_top_left = Qt.AlignmentFlag.AlignLeft | Qt.AlignmentFlag.AlignTop
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** å°è¯•ç»„åˆä¸åŒçš„å¯¹é½æ ‡å¿—å¹¶è§‚å¯Ÿå…¶å¯¹æ–‡æœ¬ä½ç½®çš„å½±å“ã€‚

![tips](tips.png)

> **Qt æ ‡å¿—**

> è¯·æ³¨æ„ï¼Œæ‚¨ä½¿ç”¨äº†æˆ–è¿ç®—ç¬¦ (`|`) æŒ‰ç…§æƒ¯ä¾‹å°†ä¸¤ä¸ªæ ‡å¿—ç»„åˆåœ¨ä¸€èµ·ã€‚è¿™äº›æ ‡å¿—æ˜¯éé‡å çš„ä½æ©ç ã€‚ä¾‹å¦‚ï¼Œ`Qt.AlignmentFlag.AlignLeft` çš„äºŒè¿›åˆ¶å€¼ä¸º `0b0001`ï¼Œè€Œ`Qt.AlignmentFlag.AlignBottom` çš„äºŒè¿›åˆ¶å€¼ä¸º `0b0100`ã€‚é€šè¿‡æŒ‰ä½æˆ–è¿ç®—ï¼Œæˆ‘ä»¬å¾—åˆ°å€¼ `0b0101`ï¼Œè¡¨ç¤ºâ€œåº•éƒ¨å·¦ä¾§â€ã€‚

> æˆ‘ä»¬å°†åœ¨åç»­çš„ â€œ35. æšä¸¾ä¸ Qt å‘½åç©ºé—´â€ ç« èŠ‚ä¸­å¯¹ Qt å‘½åç©ºé—´å’Œ Qt æ ‡å¿—è¿›è¡Œæ›´è¯¦ç»†çš„æ¢è®¨ã€‚

æœ€åï¼Œè¿˜æœ‰ä¸€ä¸ªç®€å†™æ ‡å¿—ï¼Œå®ƒåŒæ—¶åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šå±…ä¸­â€”â€”

| æ ‡å¿—                           | è¡Œä¸º               |
| ------------------------------ | ------------------ |
| `Qt.AlignmentFlag.AlignCenter` | æ°´å¹³**å’Œ**å‚ç›´å±…ä¸­ |

æœ‰è¶£çš„æ˜¯ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ `QLabel` é€šè¿‡ `.setPixmap()` æ–¹æ³•æ˜¾ç¤ºä¸€å¼ å›¾ç‰‡ã€‚è¯¥æ–¹æ³•æ¥å—ä¸€ä¸ªåƒç´ å›¾ï¼ˆåƒç´ æ•°ç»„ï¼‰ï¼Œæ‚¨å¯ä»¥é€šè¿‡å°†å›¾ç‰‡æ–‡ä»¶åä¼ é€’ç»™ `QPixmap` æ¥åˆ›å»ºå®ƒã€‚åœ¨éšæœ¬ä¹¦æä¾›çš„ç¤ºä¾‹æ–‡ä»¶ä¸­ï¼Œæ‚¨å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªåä¸º `otje.jpg` çš„æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ–¹å¼åœ¨çª—å£ä¸­æ˜¾ç¤ºå®ƒï¼š

*Listing 14. basic/widgets_2a.py*

```python
import sys

from PyQt6.QtGui import QPixmap
from PyQt6.QtWidgets import QApplication, QLabel, QMainWindow

class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        widget = QLabel("Hello")
        widget.setPixmap(QPixmap("otje.jpg"))
        
        self.setCentralWidget(widget)
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

![Figure10](Figure10.png)

> å›¾åï¼šå«åšâ€œOtjeâ€çš„çŒ«ï¼Œå¤ªå¯çˆ±å•¦

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** è°ƒæ•´çª—å£å¤§å°åï¼Œå›¾åƒä¼šè¢«ç©ºç™½åŒºåŸŸåŒ…å›´ã€‚

![tips](tips.png)

> æ²¡çœ‹è§å›¾ç‰‡ï¼Ÿç»§ç»­å¾€ä¸‹è¯»è¯»çœ‹ï¼

åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä»…ä½¿ç”¨æ–‡ä»¶å `otje.jpg` æ¥æŒ‡å®šè¦åŠ è½½çš„æ–‡ä»¶ã€‚è¿™æ„å‘³ç€å½“åº”ç”¨ç¨‹åºè¿è¡Œæ—¶ï¼Œæ–‡ä»¶å°†ä»å½“å‰æ–‡ä»¶å¤¹ä¸­åŠ è½½ã€‚ç„¶è€Œï¼Œå½“å‰æ–‡ä»¶å¤¹å¹¶ä¸ä¸€å®šæ˜¯è„šæœ¬æ‰€åœ¨çš„æ–‡ä»¶å¤¹â€”â€”æ‚¨å¯ä»¥ä»ä»»ä½•ä½ç½®è¿è¡Œè„šæœ¬ã€‚

å¦‚æœä½ åˆ‡æ¢åˆ°ä¸Šçº§ç›®å½•ï¼ˆä½¿ç”¨ `cd ..`ï¼‰å¹¶å†æ¬¡è¿è¡Œè„šæœ¬ï¼Œæ–‡ä»¶å°†æ— æ³•è¢«æ‰¾åˆ°ï¼Œå›¾åƒä¹Ÿæ— æ³•åŠ è½½ã€‚æˆ‘çš„è€å¤©å•Šï¼

![Figure11](Figure11.png)

> å›¾åä¸€ï¼šçŒ« Otje ä¸è§äº†

![tips](tips.png)

> è¿™ä¹Ÿæ˜¯åœ¨ä»IDEè¿è¡Œè„šæœ¬æ—¶å¸¸è§çš„é—®é¢˜ï¼Œå› ä¸ºIDEä¼šæ ¹æ®å½“å‰æ¿€æ´»çš„é¡¹ç›®æ¥è®¾ç½®è·¯å¾„ã€‚

è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥è·å–å½“å‰è„šæœ¬æ–‡ä»¶çš„è·¯å¾„ï¼Œå¹¶åˆ©ç”¨è¯¥è·¯å¾„ç¡®å®šè„šæœ¬æ‰€åœ¨çš„æ–‡ä»¶å¤¹ã€‚æˆ‘ä»¬çš„å›¾åƒæ–‡ä»¶å­˜å‚¨åœ¨åŒä¸€æ–‡ä»¶å¤¹ä¸­ï¼ˆæˆ–ç›¸å¯¹äºæ­¤ä½ç½®çš„æŸä¸ªæ–‡ä»¶å¤¹ä¸­ï¼‰ï¼Œè¿™æ ·ä¹Ÿèƒ½ç¡®å®šè¯¥æ–‡ä»¶çš„ä½ç½®ã€‚

æ–‡ä»¶å†…ç½®å˜é‡ `file` ä¸ºæˆ‘ä»¬æä¾›äº†å½“å‰æ–‡ä»¶çš„è·¯å¾„ã€‚`os.dirname()` å‡½æ•°ä»è¯¥è·¯å¾„ä¸­è·å–æ–‡ä»¶å¤¹ï¼ˆæˆ–**ç›®å½•**åç§°ï¼‰ï¼Œç„¶åæˆ‘ä»¬ä½¿ç”¨ `os.path.join` å‡½æ•°æ¥æ„å»ºæ–‡ä»¶çš„æ–°è·¯å¾„ã€‚

*Listing 15. basic/widgets_2b.py*

```python
import os
import sys

from PyQt6.QtGui import QPixmap
from PyQt6.QtWidgets import QApplication, QLabel, QMainWindow

basedir = os.path.dirname(__file__)
print("Current working folder:", os.getcwd()) #1
print("Paths are relative to:", basedir) #2


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        widget = QLabel("Hello")
        widget.setPixmap(QPixmap(os.path.join(basedir, "otje.jpg")))
        
        self.setCentralWidget(widget)
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> 1. å½“å‰å·¥ä½œç›®å½•ã€‚
> 2. æˆ‘ä»¬çš„åŸºç¡€è·¯å¾„ï¼ˆç›¸å¯¹äºæ­¤æ–‡ä»¶ï¼‰ã€‚

![tips](tips.png)

> å¦‚æœæ‚¨ç°åœ¨è¿˜ä¸å®Œå…¨ç†è§£ï¼Œè¯·ä¸è¦æ‹…å¿ƒï¼Œæˆ‘ä»¬å°†åœ¨åé¢è¯¦ç»†è¯´æ˜ã€‚

å¦‚æœæ‚¨ç°åœ¨è¿è¡Œè¿™ä¸ªè„šæœ¬ï¼Œå›¾åƒå°†å¦‚é¢„æœŸæ˜¾ç¤ºâ€”â€”æ— è®ºæ‚¨ä»å“ªé‡Œè¿è¡Œè„šæœ¬ã€‚è„šæœ¬è¿˜ä¼šè¾“å‡ºè·¯å¾„ï¼ˆä»¥åŠå½“å‰å·¥ä½œç›®å½•ï¼‰ï¼Œä»¥å¸®åŠ©è°ƒè¯•é—®é¢˜ã€‚åœ¨ä»åº”ç”¨ç¨‹åºåŠ è½½ä»»ä½•å¤–éƒ¨æ–‡ä»¶æ—¶ï¼Œè¯·åŠ¡å¿…è®°ä½è¿™ä¸€ç‚¹ã€‚æœ‰å…³æ•°æ®æ–‡ä»¶è·¯å¾„å¤„ç†çš„æ›´è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… "33. ä½¿ç”¨ç›¸å¯¹è·¯å¾„"ã€‚

é»˜è®¤æƒ…å†µä¸‹ï¼Œå›¾åƒåœ¨ç¼©æ”¾æ—¶ä¼šä¿æŒå…¶å®½é«˜æ¯”ã€‚å¦‚æœæ‚¨å¸Œæœ›å®ƒæ‹‰ä¼¸å¹¶ç¼©æ”¾ä»¥å®Œå…¨å¡«å……çª—å£ï¼Œæ‚¨å¯ä»¥åœ¨ `QLabel`ä¸­è®¾ç½® `.setScaledContents(True)` æ–¹æ³•ã€‚

è¯·ä¿®æ”¹ä»£ç ï¼Œåœ¨æ ‡ç­¾ä¸­æ·»åŠ  `.setScaledContents(True)` â€”â€”

*Listing 16. basic/widgets_2b.py*

```python
widget.setPixmap(QPixmap(os.path.join(basedir, "otje.jpg")))
widget.setScaledContents(True)
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** è°ƒæ•´çª—å£å¤§å°ï¼Œå›¾ç‰‡å°±ä¼šå˜å½¢æ¥è‡ªåŠ¨é€‚åº”å¤§å°ã€‚

![Figure12](Figure12.png)

> å›¾åäºŒï¼šåœ¨ *Windows*ï¼Œ*macOS* å’Œ *Linux(Ubuntu)* ä¸Šé¢ä½¿ç”¨ `Qlabel`å±•ç¤ºçš„åƒç´ å›¾

### `QCheckBox`

ä¸‹ä¸€ä¸ªè¦ä»‹ç»çš„æ§ä»¶æ˜¯ `QCheckBox`ï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªå¯é€‰æ¡†ã€‚ç„¶è€Œï¼Œä¸æ‰€æœ‰ Qt æ§ä»¶ä¸€æ ·ï¼Œå®ƒä¹Ÿæœ‰è®¸å¤šå¯é…ç½®çš„é€‰é¡¹æ¥æ›´æ”¹æ§ä»¶çš„è¡Œä¸ºã€‚

*Listing 17. basic/widgets_3.py*

```python
import sys

from PyQt6.QtCore import Qt
from PyQt6.QtWidgets import QApplication, QCheckBox, QMainWindow


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        widget = QCheckBox("This is a checkbox")
        widget.setCheckState(Qt.CheckState.Checked)
        
        # å¯¹äºä¸‰æ€ï¼šwidget.setCheckState(Qt.PartiallyChecked)
        # æˆ–ï¼šwidget.setTristate(True)
        widget.stateChanged.connect(self.show_state)
        
        self.setCentralWidget(widget)
        
    def show_state(self, s):
        print(Qt.CheckState(s) == Qt.CheckState.Checked)
        print(s)
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ‚¨å°†ä¼šçœ‹åˆ°ä¸€ä¸ªæœ‰æ ‡ç­¾æ–‡æœ¬çš„å¤é€‰æ¡†

![Figure13](Figure13.png)

> å›¾åä¸‰ï¼šåœ¨ *Windows*ï¼Œ*macOS* å’Œ *Linux(Ubuntu)* ä¸Šé¢çš„`QCheckBox`

æ‚¨å¯ä»¥ä½¿ç”¨ `.setChecked` æˆ– `.setCheckState` é€šè¿‡ç¼–ç¨‹æ–¹å¼è®¾ç½®å¤é€‰æ¡†çŠ¶æ€ã€‚å‰è€…æ¥å— `True` æˆ– `False`ï¼Œåˆ†åˆ«ä»£è¡¨å·²é€‰ä¸­æˆ–æœªé€‰ä¸­ã€‚ä½†æ˜¯ï¼Œä½¿ç”¨ `.setCheckState` æ—¶ï¼Œæ‚¨è¿˜å¯ä»¥ä½¿ç”¨ `Qt.`å‘½åç©ºé—´æ ‡å¿—æŒ‡å®šéƒ¨åˆ†é€‰ä¸­çŠ¶æ€ã€‚

| æ ‡å¿—                             | è¡Œä¸º         |
| -------------------------------- | ------------ |
| `Qt.CheckState.Checked`          | è¯¥é¡¹å·²é€‰ä¸­   |
| `Qt.CheckState.Unchecked`        | è¯¥é¡¹æœªé€‰ä¸­   |
| `Qt.CheckState.PartiallyChecked` | è¯¥é¡¹éƒ¨åˆ†é€‰ä¸­ |

æ”¯æŒéƒ¨åˆ†é€‰ä¸­çŠ¶æ€ï¼ˆ`Qt.CheckState.PartiallyChecked`ï¼‰çš„å¤é€‰æ¡†é€šå¸¸è¢«ç§°ä¸ºâ€œä¸‰æ€å¤é€‰æ¡†â€ï¼Œå³æ—¢éé€‰ä¸­ä¹Ÿéæœªé€‰ä¸­ã€‚å¤„äºæ­¤çŠ¶æ€çš„å¤é€‰æ¡†é€šå¸¸æ˜¾ç¤ºä¸ºç°è‰²å¤é€‰æ¡†ï¼Œå¹¶å¸¸ç”¨äºåˆ†å±‚å¤é€‰æ¡†å¸ƒå±€ä¸­ï¼Œå…¶ä¸­å­é¡¹ä¸çˆ¶çº§å¤é€‰æ¡†ç›¸å…³è”ã€‚

å¦‚æœæ‚¨å°†å€¼è®¾ç½®ä¸º `Qt.CheckState.PartiallyChecked`ï¼Œå¤é€‰æ¡†å°†å˜ä¸º**ä¸‰æ€**â€”â€”å³å…·æœ‰ä¸‰ç§å¯èƒ½çš„çŠ¶æ€ã€‚æ‚¨è¿˜å¯ä»¥é€šè¿‡ä½¿ç”¨ `.setTristate(True)`æ¥è¾¾åˆ°ç›¸åŒçš„æ•ˆæœ

![tips](tips.png)

> æ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°ï¼Œå½“è„šæœ¬è¿è¡Œæ—¶ï¼Œå½“å‰çŠ¶æ€çš„ç¼–å·ä»¥æ•´æ•°å½¢å¼æ˜¾ç¤ºï¼Œå…¶ä¸­å·²é€‰ä¸­ = 2ï¼Œæœªé€‰ä¸­ = 0ï¼Œéƒ¨åˆ†é€‰ä¸­ = 1ã€‚æ‚¨æ— éœ€è®°ä½è¿™äº›å€¼â€”â€”å®ƒä»¬åªæ˜¯è¿™äº›ç›¸åº”æ ‡å¿—çš„å†…éƒ¨å€¼ã€‚æ‚¨å¯ä»¥é€šè¿‡ `state == Qt.CheckState.Checked` æ¥æµ‹è¯•çŠ¶æ€ã€‚

### `QComboBox`

`QComboBox` æ˜¯ä¸€ä¸ªä¸‹æ‹‰åˆ—è¡¨ï¼Œé»˜è®¤æƒ…å†µä¸‹å¤„äºå…³é—­çŠ¶æ€ï¼Œéœ€è¦ç‚¹å‡»ç®­å¤´æ‰èƒ½æ‰“å¼€ã€‚æ‚¨å¯ä»¥ä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªé¡¹ç›®ï¼Œå½“å‰é€‰ä¸­çš„é¡¹ç›®å°†ä½œä¸ºæ ‡ç­¾æ˜¾ç¤ºåœ¨æ§ä»¶ä¸Šã€‚ç»„åˆæ¡†é€‚ç”¨äºä»é•¿åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªé€‰é¡¹ã€‚

![information](information.png)

> æ‚¨å¯èƒ½åœ¨æ–‡å­—å¤„ç†åº”ç”¨ç¨‹åºä¸­è§è¿‡ç”¨äºé€‰æ‹©å­—ä½“æ ·å¼æˆ–å­—å·çš„ç»„åˆæ¡†ã€‚å°½ç®¡ Qtå®é™…ä¸Šæä¾›äº†ä¸€ä¸ªä¸“é—¨ç”¨äºå­—ä½“é€‰æ‹©çš„ç»„åˆæ¡†ï¼Œå³ `QFontComboBox`ã€‚

æ‚¨å¯ä»¥é€šè¿‡å‘ `.addItems() `æ–¹æ³•ä¼ é€’ä¸€ä¸ªå­—ç¬¦ä¸²åˆ—è¡¨æ¥å‘ QComboBox æ·»åŠ é¡¹ã€‚é¡¹å°†æŒ‰æ‚¨æä¾›çš„é¡ºåºä¾æ¬¡æ·»åŠ ã€‚

*Listing 18. basic/widgets_4.py*

```python
import sys

from PyQt6.QtCore import Qt
from PyQt6.QtWidgets import QApplication, QComboBox, QMainWindow

class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        widget = QComboBox()
        widget.addItems(["One", "Two", "Three"])
        
        widget.currentIndexChanged.connect(self.index_changed)
        widget.currentTextChanged.connect(self.text_changed)
        
        self.setCentralWidget(widget)
        
    def index_changed(self, i): # iæ˜¯ä¸€ä¸ªintå‹æ•´æ•°
        print(i)
        
    def text_changed(self, s): # sæ˜¯ä¸€ä¸ªstrå‹çš„å­—ç¬¦ä¸²
        print(s)
        

app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ‚¨å°†çœ‹åˆ°ä¸€ä¸ªåŒ…å«3ä¸ªé€‰é¡¹çš„ä¸‹æ‹‰åˆ—è¡¨æ¡†ã€‚é€‰æ‹©å…¶ä¸­ä¸€é¡¹åï¼Œè¯¥é€‰é¡¹å°†æ˜¾ç¤ºåœ¨è¾“å…¥æ¡†ä¸­ã€‚

![Figure14](Figure14.png)

> å›¾åå››ï¼šåœ¨ *Windows*ï¼Œ*macOS* å’Œ *Linux(Ubuntu)* ä¸Šé¢çš„`QComboBox`

å½“å½“å‰é€‰ä¸­çš„é¡¹ç›®è¢«æ›´æ–°æ—¶ï¼Œä¼šè§¦å‘ `.currentIndexChanged` ä¿¡å·ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šä¼ é€’åˆ—è¡¨ä¸­é€‰ä¸­é¡¹ç›®çš„ç´¢å¼•ã€‚è¿˜æœ‰ä¸€ä¸ª `.currentTextChanged` ä¿¡å·ï¼Œå®ƒæä¾›å½“å‰é€‰ä¸­é¡¹ç›®çš„æ ‡ç­¾ï¼Œè¿™ä¸ªé€šå¸¸ä¼šæ›´åŠ å®ç”¨ã€‚

`QComboBox` ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºå¯ç¼–è¾‘æ¨¡å¼ï¼Œå…è®¸ç”¨æˆ·è¾“å…¥åˆ—è¡¨ä¸­ä¸å­˜åœ¨çš„å€¼ï¼Œå¹¶å¯é€‰æ‹©å°†è¿™äº›å€¼æ’å…¥åˆ—è¡¨æˆ–ç›´æ¥ä½œä¸ºé€‰ä¸­é¡¹ä½¿ç”¨ã€‚è¦å¯ç”¨å¯ç¼–è¾‘æ¨¡å¼ï¼Œè¯·åŠ å…¥è¿™è¡Œä»£ç ï¼š

```python
widget.setEditable(True)
```

æ‚¨è¿˜å¯ä»¥è®¾ç½®æ ‡å¿—æ¥ç¡®å®šæ’å…¥æ“ä½œçš„å¤„ç†æ–¹å¼ã€‚è¿™äº›æ ‡å¿—å­˜å‚¨åœ¨ `QComboBox` ç±»æœ¬èº«ä¸­ï¼Œå…·ä½“åˆ—è¡¨å¦‚ä¸‹ï¼š

| æ ‡å¿—                                          | è¡Œä¸º               |
| --------------------------------------------- | ------------------ |
| `QComboBox.InsertPolicy.NoInsert`             | ä¸å…è®¸æ’å…¥         |
| `QComboBox.InsertPolicy.InsertAtTop`          | æ’å…¥ä¸ºç¬¬ä¸€ä¸ªé¡¹     |
| `QComboBox.InsertPolicy.InsertAtCurrent`      | æ›¿æ¢å½“å‰é€‰ä¸­çš„é¡¹   |
| `QComboBox.InsertPolicy.InsertAtBottom`       | åœ¨æœ€åä¸€é¡¹ä¹‹åæ’å…¥ |
| `QComboBox.InsertPolicy.InsertAfterCurrent`   | åœ¨å½“å‰é¡¹ä¹‹åæ’å…¥   |
| `QComboBox.InsertPolicy.InsertBeforeCurrent`  | åœ¨å½“å‰é¡¹ä¹‹å‰æ’å…¥   |
| `QComboBox.InsertPolicy.InsertAlphabetically` | æŒ‰å­—æ¯é¡ºåºæ’å…¥     |

è¦ä½¿ç”¨è¿™äº›é€‰é¡¹ï¼Œè¯·æŒ‰ä»¥ä¸‹æ–¹å¼åº”ç”¨æ ‡å¿—ï¼š

```python
widget.setInsertPolicy(QComboBox.InsertPolicy.InsertAlphabetically)
```

æ‚¨è¿˜å¯ä»¥é€šè¿‡è°ƒç”¨ `.setMaxCount` æ–¹æ³•æ¥é™åˆ¶ç›’å­ä¸­å…è®¸çš„é¡¹ç›®æ•°é‡,ä¾‹å¦‚ï¼š

```python
widget.setMaxCount(10)
```

### `QListWidget`

æ¥ä¸‹æ¥æ˜¯ `QListWidget`ã€‚è¯¥æ§ä»¶ä¸ `QComboBox` ç±»ä¼¼ï¼Œåªæ˜¯é€‰é¡¹ä»¥å¯æ»šåŠ¨åˆ—è¡¨çš„å½¢å¼å‘ˆç°ã€‚å®ƒè¿˜æ”¯æŒåŒæ—¶é€‰æ‹©å¤šä¸ªé¡¹ç›®ã€‚`QListWidget` æä¾›äº†ä¸€ä¸ª `currentItemChanged` ä¿¡å·ï¼Œè¯¥ä¿¡å·å‘é€ `QListItem`ï¼ˆåˆ—è¡¨æ§ä»¶çš„å…ƒç´ ï¼‰ï¼Œä»¥åŠä¸€ä¸ª `currentTextChanged` ä¿¡å·ï¼Œè¯¥ä¿¡å·å‘é€å½“å‰é¡¹ç›®çš„æ–‡æœ¬ã€‚

*Listing 19. basic/widgets_5.py*

```python
import sys

from PyQt6.QtWidgets import QApplication, QListWidget, QMainWindow

class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        widget = QListWidget()
        widget.addItems(["One", "Two", "Three"])
        
        widget.currentItemChanged.connect(self.index_changed)
        widget.currentTextChanged.connect(self.text_changed)
        
        self.setCentralWidget(widget)
        
    def index_changed(self, i): #ä¸æ˜¯ç´¢å¼•ï¼Œi æ˜¯ QListItem
        print(i.text())
        
    def text_changed(self, s): # sæ˜¯ä¸€ä¸ªstrå‹çš„å­—ç¬¦ä¸²
        print(s)
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ‚¨å°†çœ‹åˆ°ç›¸åŒçš„ä¸‰ä¸ªé¡¹ï¼Œç°åœ¨ä»¥åˆ—è¡¨å½¢å¼æ˜¾ç¤ºã€‚é€‰ä¸­çš„é¡¹ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰å°†è¢«é«˜äº®æ˜¾ç¤ºã€‚

![Figure15](Figure15.png)

> å›¾åäº”ï¼šåœ¨ *Windows*ï¼Œ*macOS* å’Œ *Linux(Ubuntu)* ä¸Šé¢çš„`QListWidget`

### `QLineEdit`

`QLineEdit` æ§ä»¶æ˜¯ä¸€ä¸ªç®€å•çš„å•è¡Œæ–‡æœ¬ç¼–è¾‘æ¡†ï¼Œç”¨æˆ·å¯ä»¥åœ¨å…¶ä¸­è¾“å…¥å†…å®¹ã€‚è¿™äº›æ§ä»¶ç”¨äºè¡¨å•å­—æ®µæˆ–æ²¡æœ‰é™åˆ¶æœ‰æ•ˆè¾“å…¥åˆ—è¡¨çš„è®¾ç½®ã€‚ä¾‹å¦‚ï¼Œè¾“å…¥ç”µå­é‚®ä»¶åœ°å€æˆ–è®¡ç®—æœºåç§°æ—¶ã€‚

*Listing 20. basic/widgets_6.py*

```python
import sys

from PyQt6.QtCore import Qt
from PyQt6.QtWidgets import QApplication, QLineEdit, QMainWindow

class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        widget = QLineEdit()
        widget.setMaxLength(10)
        widget.setPlaceholderText("Enter your text")
        
        # widget.setReadOnly(True) # å–æ¶ˆæ³¨é‡Šè¯¥è¡Œä»¥è®¾ç½®ä¸ºåªè¯»æ¨¡å¼
        
        widget.returnPressed.connect(self.return_pressed)
        widget.selectionChanged.connect(self.selection_changed)
        widget.textChanged.connect(self.text_changed)
        widget.textEdited.connect(self.text_edited)
        
        self.setCentralWidget(widget)
        
    def return_pressed(self):
        print("Return pressed!")
        self.centralWidget().setText("BOOM!")
        
    def selection_changed(self):
        print("Selection changed")
        print(self.centralWidget().selectedText())
        
    def text_changed(self, s):
        print("Text changed...")
        print(s)
        
    def text_edited(self, s):
        print("Text edited...")
        print(s)
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ‚¨å°†çœ‹åˆ°ä¸€ä¸ªå¸¦æœ‰æç¤ºçš„ç®€å•æ–‡æœ¬è¾“å…¥æ¡†ã€‚

![Figure16](Figure16.png)

> å›¾åå…­ï¼šåœ¨ *Windows*ï¼Œ*macOS* å’Œ *Linux(Ubuntu)* ä¸Šé¢çš„`QLineEdit`

å¦‚ä»¥ä¸Šä»£ç æ‰€ç¤ºï¼Œæ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨ `.setMaxLength` æ–¹æ³•ä¸ºæ–‡æœ¬å­—æ®µè®¾ç½®æœ€å¤§é•¿åº¦ã€‚å ä½ç¬¦æ–‡æœ¬ï¼ˆå³åœ¨ç”¨æˆ·è¾“å…¥å†…å®¹å‰æ˜¾ç¤ºçš„æ–‡æœ¬ï¼‰å¯é€šè¿‡ `.setPlaceholderText` æ–¹æ³•æ·»åŠ ã€‚

`QLineEdit` ä¸ºä¸åŒçš„ç¼–è¾‘äº‹ä»¶æä¾›äº†ä¸€ç³»åˆ—ä¿¡å·ï¼ŒåŒ…æ‹¬ï¼ˆç”¨æˆ·ï¼‰æŒ‰ä¸‹å›è½¦é”®æ—¶ã€ç”¨æˆ·é€‰æ‹©å‘ç”Ÿæ›´æ”¹æ—¶ã€‚å¦å¤–è¿˜æœ‰ä¸¤ä¸ªç¼–è¾‘ä¿¡å·ï¼Œä¸€ä¸ªç”¨äºæ¡†ä¸­çš„æ–‡æœ¬è¢«ç¼–è¾‘çš„æ—¶å€™ï¼Œå¦ä¸€ä¸ªç”¨äºæ–‡æœ¬è¢«æ›´æ”¹çš„æ—¶å€™ã€‚è¿™é‡Œçš„åŒºåˆ«åœ¨äºç”¨æˆ·ç¼–è¾‘å’Œç¨‹åºæ›´æ”¹ã€‚åªæœ‰å½“ç”¨æˆ·ç¼–è¾‘æ–‡æœ¬æ—¶ï¼Œæ‰ä¼šå‘é€ `textEdited` ä¿¡å·ã€‚

æ­¤å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨è¾“å…¥æ©ç è¿›è¡Œè¾“å…¥éªŒè¯ï¼Œä»¥å®šä¹‰æ”¯æŒå“ªäº›å­—ç¬¦ä»¥åŠåœ¨ä½•å¤„æ”¯æŒã€‚è¿™å¯ä»¥åº”ç”¨äºå­—æ®µå¦‚ä¸‹ï¼š

```python
widget.setInputMask('000.000.000.000;_')
```

ä¸Šè¿°è§„åˆ™å…è®¸ä½¿ç”¨ä»¥å¥ç‚¹åˆ†éš”çš„3ä½æ•°å­—åºåˆ—ï¼Œå› æ­¤å¯ç”¨äºéªŒè¯IPv4åœ°å€ã€‚

### `QSpinBox` å’Œ `QDoubleSpinBox`

`QSpinBox` æä¾›äº†ä¸€ä¸ªå¸¦ç®­å¤´çš„å°æ•°å­—è¾“å…¥æ¡†ï¼Œç”¨äºå¢åŠ å’Œå‡å°‘å€¼ã€‚`QSpinBox` æ”¯æŒæ•´æ•°ï¼Œè€Œç›¸å…³çš„æ§ä»¶`QDoubleSpinBox` æ”¯æŒæµ®ç‚¹æ•°ã€‚

![tips](tips.png)

> åŒç²¾åº¦(`double`)æˆ–åŒç²¾åº¦æµ®ç‚¹æ•°(double float)æ˜¯ C++ ç±»å‹ï¼Œç›¸å½“äºPython è‡ªå·±çš„æµ®ç‚¹æ•°(`float`)ç±»å‹ï¼Œå› æ­¤è¯¥æ§ä»¶ä»¥æ­¤å‘½åã€‚

*Listing 21. basic/widgets_7.py*

```python
import sys

from PyQt6.QtWidgets import QApplication, QMainWindow, QSpinBox

class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        widget = QSpinBox()
        # æˆ–è€…: widget = QDoubleSpinBox()
        
        widget.setMinimum(-10)
        widget.setMaximum(3)
        # æˆ–è€…: widget.setRange(-10,3)
        
        widget.setPrefix("$")
        widget.setSuffix("c")
        widget.setSingleStep(3) # æˆ–è€…ï¼Œå¯¹äºQDoubleSpinBoxï¼Œä½¿ç”¨0.5
        widget.valueChanged.connect(self.value_changed)
        widget.textChanged.connect(self.value_changed_str)
        
        self.setCentralWidget(widget)
        
    def value_changed(self, i):
        print(i)
        
    def value_changed_str(self, s):
        print(s)
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€**è¿è¡Œå®ƒå§ï¼** æ‚¨å°†çœ‹åˆ°ä¸€ä¸ªæ•°å­—è¾“å…¥æ¡†ã€‚è¯¥å€¼æ˜¾ç¤ºå‰ç¼€å’Œåç¼€å•ä½ï¼Œä¸”èŒƒå›´é™å®šåœ¨+3åˆ°-10ä¹‹é—´ã€‚

![Figure17](Figure17.png)

> å›¾åä¸ƒï¼šåœ¨ *Windows*ï¼Œ*macOS* å’Œ *Linux(Ubuntu)* ä¸Šé¢çš„`QSpinBox`

ä¸Šé¢çš„æ¼”ç¤ºä»£ç å±•ç¤ºäº†è¯¥æ§ä»¶å¯ç”¨çš„å„ç§åŠŸèƒ½ã€‚

è¦è®¾ç½®å¯æ¥å—å€¼çš„èŒƒå›´ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `setMinimum` å’Œ `setMaximum`ï¼Œæˆ–è€…ä½¿ç”¨ `setRange` åŒæ—¶è®¾ç½®ä¸¤è€…ã€‚å€¼ç±»å‹çš„æ ‡æ³¨æ”¯æŒåœ¨æ•°å­—å‰æ·»åŠ å‰ç¼€æˆ–åœ¨æ•°å­—åæ·»åŠ åç¼€ï¼Œä¾‹å¦‚ä½¿ç”¨ `.setPrefix` å’Œ `.setSuffix` åˆ†åˆ«è®¾ç½®è´§å¸æ ‡è®°æˆ–å•ä½ã€‚

ç‚¹å‡»æ§ä»¶ä¸Šçš„å‘ä¸Šå’Œå‘ä¸‹ç®­å¤´å¯å¢åŠ æˆ–å‡å°‘æ§ä»¶ä¸­çš„å€¼ï¼Œè¯¥å€¼å¯ä½¿ç”¨ `.setSingleStep` è¿›è¡Œè®¾ç½®ã€‚è¯·æ³¨æ„ï¼Œè¿™ä¸ä¼šå¯¹æ§ä»¶å¯æ¥å—çš„å€¼äº§ç”Ÿä»»ä½•å½±å“ã€‚

`QSpinBox` å’Œ `QDoubleSpinBox` éƒ½å…·æœ‰ `.valueChanged` ä¿¡å·ï¼Œè¯¥ä¿¡å·åœ¨å…¶å€¼å‘ç”Ÿæ”¹å˜æ—¶è§¦å‘ã€‚`.valueChanged` ä¿¡å·å‘é€æ•°å­—å€¼ï¼ˆæ•´æ•°æˆ–æµ®ç‚¹æ•°ï¼‰ï¼Œè€Œå•ç‹¬çš„ `.textChanged` ä¿¡å·åˆ™å°†å€¼ä½œä¸ºå­—ç¬¦ä¸²å‘é€ï¼ŒåŒ…æ‹¬å‰ç¼€å’Œåç¼€å­—ç¬¦ã€‚

### `QSlider`

`QSlider` æä¾›äº†ä¸€ä¸ªæ»‘åŠ¨æ¡æ§ä»¶ï¼Œå…¶å†…éƒ¨åŠŸèƒ½ä¸ `QDoubleSpinBox` éå¸¸ç›¸ä¼¼ã€‚å®ƒä¸ä¼šä»¥æ•°å­—å½¢å¼æ˜¾ç¤ºå½“å‰å€¼ï¼Œè€Œæ˜¯é€šè¿‡æ»‘å—åœ¨æ§ä»¶é•¿åº¦ä¸Šçš„ä½ç½®æ¥è¡¨ç¤ºã€‚å½“éœ€è¦åœ¨ä¸¤ä¸ªæç«¯å€¼ä¹‹é—´è¿›è¡Œè°ƒæ•´ï¼Œä½†ä¸éœ€è¦ç»å¯¹ç²¾ç¡®åº¦æ—¶ï¼Œæ­¤æ§ä»¶éå¸¸æœ‰ç”¨ã€‚æ­¤ç±»æ§ä»¶æœ€å¸¸è§çš„ç”¨é€”æ˜¯éŸ³é‡æ§åˆ¶ã€‚

è¿˜æœ‰ä¸€ä¸ªé¢å¤–çš„æ¯å½“æ»‘å—ç§»åŠ¨ä½ç½®æ—¶è§¦å‘çš„ `.sliderMoved` ä¿¡å·ï¼Œä»¥åŠä¸€ä¸ªæ¯å½“æ»‘å—è¢«ç‚¹å‡»æ—¶å‘å‡ºçš„ `.sliderPressed` ä¿¡å·ã€‚

*Listing 22. basic/widgets_8.py*

```python
import sys

from PyQt6.QtCore import Qt
from PyQt6.QtWidgets import QApplication, QMainWindow, QSlider


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        widget = QSlider()
        
        widget.setMinimum(-10)
        widget.setMaximum(3)
        # æˆ–è€…: widget.setRange(-10,3)
        
        widget.setSingleStep(3)
        widget.valueChanged.connect(self.value_changed)
        widget.sliderMoved.connect(self.slider_position)
        widget.sliderPressed.connect(self.slider_pressed)
        widget.sliderReleased.connect(self.slider_released)
        
        self.setCentralWidget(widget)
        
    def value_changed(self, i):
        print(i)
    
    def slider_position(self, p):
        print("position", p)
        
    def slider_pressed(self):
        print("Pressed!")
        
    def slider_released(self):
        print("Released")
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ‚¨å°†çœ‹åˆ°ä¸€ä¸ªæ»‘å—æ§ä»¶ã€‚æ‹–åŠ¨æ»‘å—å³å¯æ›´æ”¹æ•°å€¼ã€‚

![Figure18](Figure18.png)

> å›¾åå…«ï¼šåœ¨ *Windows*ï¼Œ*macOS* å’Œ *Linux(Ubuntu)* ä¸Šé¢çš„`QSlider`ã€‚åœ¨ *Windows*  ä¸­æ‰‹æŸ„ä¼šæ‰©å±•åˆ°æ§ä»¶çš„å¤§å°ã€‚

æ‚¨è¿˜å¯ä»¥é€šè¿‡åœ¨åˆ›å»ºæ—¶ä¼ é€’æ–¹å‘æ¥æ„å»ºå‚ç›´æˆ–æ°´å¹³æ–¹å‘çš„æ»‘å—ã€‚æ–¹å‘æ ‡å¿—åœ¨ Qt.å‘½åç©ºé—´ä¸­å®šä¹‰ã€‚ä¾‹å¦‚â€”â€”

```python
widget.QSlider(Qt.Orientiation.Vertical)
```

æˆ–è€…â€”â€”

```python
widget.QSlider(Qt.Orientiation.Horizontal)
```

### `QDial`

æœ€åï¼Œ`QDial` æ˜¯ä¸€ä¸ªå¯æ—‹è½¬çš„æ§ä»¶ï¼ŒåŠŸèƒ½ä¸æ»‘å—ç›¸åŒï¼Œä½†å¤–è§‚ä¸ºæ¨¡æ‹Ÿæ‹¨ç›˜ã€‚å®ƒçœ‹èµ·æ¥å¾ˆä¸é”™ï¼Œä½†ä» UI è§’åº¦æ¥çœ‹å¹¶ä¸ç‰¹åˆ«ç”¨æˆ·å‹å¥½ã€‚ç„¶è€Œï¼Œå®ƒä»¬é€šå¸¸åœ¨éŸ³é¢‘åº”ç”¨ç¨‹åºä¸­ç”¨ä½œç°å®ä¸–ç•Œä¸­çš„æ¨¡æ‹Ÿæ‹¨ç›˜çš„è¡¨ç¤ºã€‚

*Listing 23. basic/widgets_9.py*

```python
import sys

from PyQt6.QtCore import Qt
from PyQt6.QtWidgets import QApplication, QDial, QMainWindow


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        widget = QDial()
        widget.setRange(-10, 100)
        widget.setSingleStep(1)
        
        widget.valueChanged.connect(self.value_changed)
        widget.sliderMoved.connect(self.slider_position)
        widget.sliderPressed.connect(self.slider_pressed)
        widget.sliderReleased.connect(self.slider_released)
        
        self.setCentralWidget(widget)
        
    def value_changed(self, i):
        print(i)
        
    def slider_position(self, p):
        print("position", p)
        
    def slider_pressed(self):
        print("Pressed!")
        
    def slider_released(self):
        print("Released")
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ‚¨ä¼šçœ‹åˆ°ä¸€ä¸ªæ—‹é’®ï¼Œè¯·æ—‹è½¬å®ƒä»¥ä»èŒƒå›´å†…é€‰æ‹©ä¸€ä¸ªæ•°å­—ã€‚

![Figure19](Figure19.png)

> å›¾åä¹ï¼šåœ¨ *Windows*ï¼Œ*macOS* å’Œ *Linux(Ubuntu)* ä¸Šé¢çš„`QDial`

è¿™äº›ä¿¡å·ä¸ `QSlider` çš„ä¿¡å·ç›¸åŒï¼Œå¹¶ä¿ç•™äº†ç›¸åŒçš„åç§°ï¼ˆä¾‹å¦‚ `.sliderMoved`ï¼‰ã€‚

ä»¥ä¸Šå°±æ˜¯å¯¹ PyQt6 ä¸­å¯ç”¨çš„ Qt æ§ä»¶çš„ç®€è¦ä»‹ç»ã€‚è¦æŸ¥çœ‹å¯ç”¨çš„æ§ä»¶çš„å®Œæ•´åˆ—è¡¨ï¼ŒåŒ…æ‹¬æ‰€æœ‰ä¿¡å·å’Œå±æ€§ï¼Œè¯·å‚é˜… [Qt æ–‡æ¡£](http://doc.qt.io/qt-5/)ã€‚

### `QWidget`

æˆ‘ä»¬çš„æ¼”ç¤ºä¸­æœ‰ä¸€ä¸ª QWidgetï¼Œä½†æ‚¨çœ‹ä¸åˆ°å®ƒã€‚æˆ‘ä»¬ä¹‹å‰åœ¨ç¬¬ä¸€ä¸ªç¤ºä¾‹ä¸­ä½¿ç”¨ `QWidge`t åˆ›å»ºäº†ä¸€ä¸ªç©ºçª—å£ã€‚ä½† `QWidget` è¿˜å¯ä»¥ä¸ [å¸ƒå±€](#6.-å¸ƒå±€) ä¸€èµ·ç”¨ä½œå…¶ä»–æ§ä»¶çš„å®¹å™¨ï¼Œä»¥æ„å»ºçª—å£æˆ–å¤åˆæ§ä»¶ã€‚æˆ‘ä»¬å°†åœ¨åé¢æ›´è¯¦ç»†åœ°ä»‹ç»åˆ›å»ºè‡ªå®šä¹‰æ§ä»¶(22. è‡ªå®šä¹‰æ§ä»¶)ã€‚

è¯·è®°ä½ `QWidget`ï¼Œå› ä¸ºæ‚¨å°†ä¼šé¢‘ç¹åœ°ä½¿ç”¨å®ƒï¼

## 6. å¸ƒå±€

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸåˆ›å»ºäº†ä¸€ä¸ªçª—å£ï¼Œå¹¶å‘å…¶ä¸­æ·»åŠ äº†ä¸€ä¸ªæ§ä»¶ã€‚ä½†æ˜¯ï¼Œé€šå¸¸æƒ…å†µä¸‹ï¼Œæ‚¨ä¼šå¸Œæœ›åœ¨çª—å£ä¸­æ·»åŠ å¤šä¸ªæ§ä»¶ï¼Œå¹¶å¯¹æ·»åŠ çš„æ§ä»¶çš„ä½ç½®è¿›è¡Œä¸€äº›æ§åˆ¶ã€‚åœ¨ Qt ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å¸ƒå±€æ¥æ’åˆ—æ§ä»¶ã€‚Qt ä¸­æä¾›äº† 4 ç§åŸºæœ¬å¸ƒå±€ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚

| å¸ƒå±€             | è¡Œä¸º                |
| ---------------- | ------------------- |
| `QHBoxLayout`    | çº¿æ€§æ°´å¹³å¸ƒå±€        |
| `QVBoxLayout`    | çº¿æ€§å‚ç›´å¸ƒå±€        |
| `QGridLayout`    | åœ¨å¯ç´¢å¼•ç½‘æ ¼XxYä¸­   |
| `QStackedLayout` | å †å ï¼ˆzï¼‰åœ¨å½¼æ­¤ä¹‹å‰ |

Qt ä¸­æä¾›äº†ä¸‰ç§äºŒç»´å¸ƒå±€ï¼š `QVBoxLayout`ã€`QHBoxLayout` å’Œ `QGridLayout`ã€‚æ­¤å¤–ï¼Œè¿˜æœ‰ `QStackedLayout`ï¼Œå®ƒå…è®¸æ‚¨åœ¨åŒä¸€ç©ºé—´å†…å°†æ§ä»¶ä¸€ä¸ªå æ”¾åœ¨å¦ä¸€ä¸ªä¹‹ä¸Šï¼Œä½†æ¯æ¬¡åªæ˜¾ç¤ºä¸€ä¸ªæ§ä»¶ã€‚

åœ¨æœ¬ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä¾æ¬¡ä»‹ç»è¿™äº›å¸ƒå±€ï¼Œå¹¶å±•ç¤ºå¦‚ä½•ä½¿ç”¨å®ƒä»¬æ¥å®šä½åº”ç”¨ç¨‹åºä¸­çš„æ§ä»¶ã€‚

![tips](tips.png)

> *Qt Designer*
>
> æ‚¨å®é™…ä¸Šå¯ä»¥ä½¿ç”¨Qt Designerä»¥å›¾å½¢æ–¹å¼è®¾è®¡å’Œå¸ƒå±€ç•Œé¢ï¼Œæˆ‘ä»¬å°†åœ¨åç»­å†…å®¹ä¸­è¯¦ç»†ä»‹ç»ã€‚åœ¨æ­¤æˆ‘ä»¬ä½¿ç”¨ä»£ç ï¼Œå› ä¸ºè¿™æ ·æ›´ä¾¿äºç†è§£å’Œå®éªŒåº•å±‚ç³»ç»Ÿã€‚

### å ä½ç¬¦æ§ä»¶

![tips](tips.png)

> è¯·åŠ è½½ä¸€ä»½æ–°çš„ myapp.pyï¼Œå¹¶å°†å®ƒä»¥æ–°çš„åå­—ä¿å­˜ä¸‹æ¥ä»¥ä¾›æœ¬èŠ‚ä½¿ç”¨ã€‚

ä¸ºäº†æ›´æ–¹ä¾¿åœ°å¯è§†åŒ–å¸ƒå±€ï¼Œæˆ‘ä»¬å°†é¦–å…ˆåˆ›å»ºä¸€ä¸ªç®€å•çš„è‡ªå®šä¹‰æ§ä»¶æ¥æ˜¾ç¤ºæˆ‘ä»¬é€‰æ‹©çš„çº¯è‰²ã€‚è¿™æœ‰åŠ©äºåŒºåˆ†æˆ‘ä»¬æ·»åŠ åˆ°å¸ƒå±€ä¸­çš„æ§ä»¶ã€‚è¯·æ‚¨åœ¨ä¸è„šæœ¬ç›¸åŒçš„æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œå¹¶å°†å…¶å‘½åä¸º` layout_colorwidget.py`ï¼Œå¹¶æ·»åŠ ä»¥ä¸‹ä»£ç ã€‚æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€ä¸ªç¤ºä¾‹ä¸­å°†æ­¤ä»£ç å¯¼å…¥åˆ°æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ã€‚

*Listing 24. basic/layout_colorwidget.py*

```python
from PyQt6.QtGui import QColor, QPalette
from PyQt6.QtWidgets import QWidget

class Color(QWidget):
    def __init__(self, color):
        super().__init__()
        self.setAutoFillBackground(True)
        
        palette = self.palette()
        palette.setColor(QPalette.ColorRole.Window, QColor(color))
        self.setPalette(palette)
```

åœ¨æ­¤ä»£ç ä¸­ï¼Œæˆ‘ä»¬å­ç±»åŒ– `QWidget` ä»¥åˆ›å»ºè‡ªå·±çš„è‡ªå®šä¹‰æ§ä»¶ `Color`ã€‚åˆ›å»ºæ§ä»¶æ—¶ï¼Œæˆ‘ä»¬æ¥å—ä¸€ä¸ªå‚æ•°â€”â€”é¢œè‰²ï¼ˆä¸€ä¸ªå­—ç¬¦ä¸²ï¼‰ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°† `.setAutoFillBackground` è®¾ç½®ä¸º `True`ï¼Œä»¥æŒ‡ç¤ºæ§ä»¶è‡ªåŠ¨ç”¨çª—å£é¢œè‰²å¡«å……å…¶èƒŒæ™¯ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ§ä»¶çš„ `QPalette.Window` é¢œè‰²æ›´æ”¹ä¸ºæˆ‘ä»¬æä¾›çš„å€¼ `color` æ‰€æè¿°çš„æ–° `QColor`ã€‚æœ€åï¼Œæˆ‘ä»¬å°†è¯¥è°ƒè‰²æ¿åº”ç”¨å›æ§ä»¶ã€‚æœ€ç»ˆç»“æœæ˜¯ä¸€ä¸ªå¡«å……äº†çº¯è‰²çš„æ§ä»¶ï¼Œè¯¥é¢œè‰²æ˜¯åœ¨åˆ›å»ºæ§ä»¶æ—¶æŒ‡å®šçš„ã€‚

å¦‚æœæ‚¨è§‰å¾—ä»¥ä¸Šå†…å®¹æœ‰äº›éš¾ä»¥ç†è§£ï¼Œè¯·ä¸è¦æ‹…å¿ƒï¼æˆ‘ä»¬å°†åœ¨åé¢è¯¦ç»†ä»‹ç»å¦‚ä½•åˆ›å»ºè‡ªå®šä¹‰æ§ä»¶å’Œè°ƒè‰²æ¿ã€‚ç›®å‰ï¼Œæ‚¨åªéœ€äº†è§£ä»¥ä¸‹ä»£ç å³å¯åˆ›å»ºä¸€ä¸ªå®å¿ƒå¡«å……çš„çº¢è‰²æ§ä»¶å³å¯â€”â€”

```python
Color('red')
```

é¦–å…ˆï¼Œè®©æˆ‘ä»¬ä½¿ç”¨æ–°åˆ›å»ºçš„â€œé¢œè‰²â€æ§ä»¶å°†æ•´ä¸ªçª—å£å¡«å……ä¸ºå•ä¸€é¢œè‰²æ¥æµ‹è¯•è¿™ä¸ªæ§ä»¶ã€‚å®Œæˆä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `.setCentralWidget` å°†å®ƒæ·»åŠ åˆ°ä¸»çª—å£ï¼Œè¿™æ ·å°±å¾—åˆ°äº†ä¸€ä¸ªçº¯çº¢è‰²çš„çª—å£ã€‚

*Listing 25. basic/layout_1.py*

```python
import sys

from PyQt6.QtCore import Qt
from PyQt6.QtWidgets import QApplication, QMainWindow

from layout_colorwidget import Color


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        widget = Color("red")
        self.setCentralWidget(widget)
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** çª—å£å°†å‡ºç°å¹¶è¢«å®Œå…¨åœ°å¡«å……ä¸ºçº¢è‰²ã€‚è¯·æ‚¨æ³¨æ„æ§ä»¶å¦‚ä½•æ‰©å±•ä»¥å¡«å……æ‰€æœ‰çš„å¯ç”¨ç©ºé—´ã€‚

![Figure20](Figure20.png)

> å›¾äºŒåï¼šæˆ‘ä»¬çš„ `Color`æ§ä»¶ï¼Œå¡«å……ä¸ºçº¯çº¢è‰²ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä¾æ¬¡æŸ¥çœ‹æ‰€æœ‰å¯ç”¨çš„ Qt å¸ƒå±€ã€‚è¯·æ³¨æ„ï¼Œè¦å°†å¸ƒå±€æ·»åŠ åˆ°çª—å£ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå ä½ `QWidget` æ¥å®¹çº³å¸ƒå±€ã€‚

### `QVBoxLayout` å‚ç›´æ’åˆ—æ§ä»¶

ä½¿ç”¨ `QVBoxLayout`ï¼Œæ‚¨å¯ä»¥å°†æ§ä»¶çº¿æ€§åœ°æ’åˆ—åœ¨å½¼æ­¤ä¹‹ä¸Šã€‚æ·»åŠ ä¸€ä¸ªæ§ä»¶ä¼šå°†å…¶æ·»åŠ åˆ°åˆ—çš„åº•éƒ¨ã€‚

![Figure21](Figure21.png)

> å›¾äºŒåä¸€ï¼šä¸€ä¸ªæŒ‰ç…§ä»ä¸Šå¾€ä¸‹é¡ºåºå¡«å……çš„ `QVBoxLayout`

å°†æˆ‘ä»¬çš„æ§ä»¶æ·»åŠ åˆ°å¸ƒå±€ä¸­ã€‚è¯·æ³¨æ„ï¼Œä¸ºäº†å°†å¸ƒå±€æ·»åŠ åˆ° `QMainWindow`ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶åº”ç”¨åˆ°å ä½çš„ `QWidget`ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ `.setCentralWidget` å°†æ§ä»¶ï¼ˆå’Œå¸ƒå±€ï¼‰åº”ç”¨åˆ°çª—å£ä¸­ã€‚æˆ‘ä»¬çš„å½©è‰²æ§ä»¶å°†åœ¨å¸ƒå±€ä¸­æ’åˆ—ï¼ŒåŒ…å«åœ¨çª—å£ä¸­çš„ `QWidge`  ä¸­ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åƒä¹‹å‰ä¸€æ ·æ·»åŠ çº¢è‰²æ§ä»¶ã€‚

*Listing 26. basic/layout_2a.py*

```python
import sys

from PyQt6.QtCore import Qt
from PyQt6.QtWidgets import (
    QApplication,
    QMainWindow,
    QVBoxLayout,
    QWidget,
)

from layout_colorwidget import Color

class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        layout = QVBoxLayout()
        
        layout.addWidget(Color("red"))
        
        widget = QWidget()
        widget.setLayout(layout)
        self.setCentralWidget(widget)
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** è¯·æ³¨æ„ï¼Œç°åœ¨çº¢è‰²æ§ä»¶å‘¨å›´æ˜¾ç¤ºäº†è¾¹æ¡†ã€‚è¿™å°±æ˜¯å¸ƒå±€é—´è·â€”â€”æˆ‘ä»¬ç¨åä¼šä»‹ç»å¦‚ä½•è°ƒæ•´å®ƒã€‚

![Figure22](Figure22.png)

> å›¾äºŒåäºŒï¼šæˆ‘ä»¬åœ¨å¸ƒå±€ä¸­çš„ `Color` æ§ä»¶

æ¥ä¸‹æ¥ï¼Œåœ¨å¸ƒå±€ä¸­æ·»åŠ ä¸€äº›å½©è‰²æ§ä»¶ï¼š

*Listing 27. basic/layout_2b.py*

```python
import sys

from PyQt6.QtCore import Qt
from PyQt6.QtWidgets import (
    QApplication,
    QMainWindow,
    QVBoxLayout,
    QWidget,
)

from layout_colorwidget import Color

class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        layout = QVBoxLayout()
        
        layout.addWidget(Color("red"))
        layout.addWidget(Color("green"))
        layout.addWidget(Color("blue"))
        
        widget = QWidget()
        widget.setLayout(layout)
        self.setCentralWidget(widget)
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

å½“æˆ‘ä»¬æ·»åŠ æ§ä»¶æ—¶ï¼Œå®ƒä»¬ä¼šæŒ‰ç…§æ·»åŠ çš„é¡ºåºå‚ç›´æ’åˆ—ã€‚

![Figure23](Figure23.png)

> å›¾äºŒåä¸‰ï¼šä¸‰ä¸ª `Color` æ§ä»¶åœ¨ä¸€ä¸ª `QVBoxLayout` å¸ƒå±€ä¸­å‚ç›´æ’åˆ—

### `QHBoxLayout` æ°´å¹³æ’åˆ—æ§ä»¶

`QHBoxLayout` ä¸ä¹‹ç›¸åŒï¼Œåªæ˜¯æ°´å¹³ç§»åŠ¨ã€‚æ·»åŠ æ§ä»¶ä¼šå°†å…¶æ·»åŠ åˆ°å³ä¾§ã€‚

![Figure24](Figure24.png)

> å›¾äºŒåå››ï¼šä¸€ä¸ªä»å·¦å¾€å³å¡«å……çš„ `QHBoxLayout`

è¦ä½¿ç”¨å®ƒï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°å°† `QVBoxLayout` æ”¹ä¸º `QHBoxLayout`ã€‚ç°åœ¨ï¼Œè¿™äº›æ¡†ä¼šä»å·¦åˆ°å³æ’åˆ—ã€‚

*Listing 28. basic/layout_3.py*

```python
import sys

from PyQt6.QtCore import Qt
from PyQt6.QtWidgets import (
    QApplication,
    QHBoxLayout,
    QLabel,
    QMainWindow,
    QWidget,
)

from layout_colorwidget import Color

class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        layout = QVBoxLayout()
        
        layout.addWidget(Color("red"))
        layout.addWidget(Color("green"))
        layout.addWidget(Color("blue"))
        
        widget = QWidget()
        widget.setLayout(layout)
        self.setCentralWidget(widget)
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ§ä»¶åº”æ°´å¹³æ’åˆ—

![Figure25](Figure25.png)

> å›¾äºŒåäº”ï¼šä¸‰ä¸ª `Color` æ§ä»¶åœ¨ä¸€ä¸ª `QVBoxLayout` å¸ƒå±€ä¸­æ°´å¹³æ’åˆ—

### åµŒå¥—å¸ƒå±€

å¯¹äºæ›´å¤æ‚çš„å¸ƒå±€ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `.addLayout` åœ¨å¸ƒå±€ä¸­åµŒå¥—å¸ƒå±€ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°† `QVBoxLayout` æ·»åŠ åˆ°ä¸» `QHBoxLayout` ä¸­ã€‚å¦‚æœæˆ‘ä»¬å°†ä¸€äº›æ§ä»¶æ·»åŠ åˆ° `QVBoxLayout`ï¼Œå®ƒä»¬å°†å‚ç›´æ’åˆ—åœ¨çˆ¶å¸ƒå±€çš„ç¬¬ä¸€ä¸ªæ§½ä¸­ã€‚

*Listing 29. basic/layout_4.py*

```python
import sys

from PyQt6.QtCore import Qt
from PyQt6.QtWidgets import (
    QApplication,
    QHBoxLayout,
    QLabel,
    QMainWindow,
    QVBoxLayout,
    QWidget,
)

from layout_colorwidget import Color


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        layout1 = QHBoxLayout()
        layout2 = QVBoxLayout()
        layout3 = QVBoxLayout()
        
        layout2.addWidget(Color("red"))
        layout2.addWidget(Color("yellow"))
        layout2.addWidget(Color("purple"))
        
        layout1.addLayout(layout2)
        layout1.addWidget(Color("green"))
        
        layout3.addWidget(Color("red"))
        layout3.addWidget(Color("purple"))
        
        layout1.addLayout(layout3)
        
        widget = QWidget()
        widget.setLayout(layout1)
        self.setCentralWidget(widget)
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ§ä»¶åº”æ°´å¹³æ’åˆ—æˆ 3 åˆ—ï¼Œç¬¬ä¸€åˆ—è¿˜åº”åŒ…å« 3 ä¸ªå‚ç›´å †å çš„æ§ä»¶ã€‚è¯·å°è¯•ä¸€ä¸‹å§ï¼

![Figure26](Figure26.png)

> å›¾äºŒåå…­ï¼šåµŒå¥—çš„ `QHBoxLayout` å’Œ `QVBoxLayout` å¸ƒå±€ã€‚

æ‚¨å¯ä»¥ä½¿ç”¨ `.setContentMargins` è®¾ç½®å¸ƒå±€å‘¨å›´çš„é—´è·ï¼Œæˆ–ä½¿ç”¨ `.setSpacing` è®¾ç½®å…ƒç´ ä¹‹é—´çš„é—´è·ã€‚

```python
layout1.setContentsMargins(0,0,0,0)
layout1.setSpacing(20)
```

ä»¥ä¸‹ä»£ç æ˜¾ç¤ºäº†åµŒå¥—æ§ä»¶ä¸å¸ƒå±€è¾¹è·å’Œé—´è·çš„ç»„åˆã€‚

*Listing 30. basic/layout_5.py*

```python
import sys

from PyQt6.QtCore import Qt
from PyQt6.QtWidgets import (
    QApplication,
    QHBoxLayout,
    QLabel,
    QMainWindow,
    QVBoxLayout,
    QWidget,
)

from layout_colorwidget import Color

class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        layout1 = QHBoxLayout()
        layout2 = QVBoxLayout()
        layout3 = QVBoxLayout()
        
        layout1.setContentsMargins(0,0,0,0)
        layout1.setSpacing(20)
        
        layout2.addWidget(Color("red"))
        layout2.addWidget(Color("yellow"))
        layout2.addWidget(Color("purple"))
        
        layout1.addLayout(layout2)
        layout1.addWidget(Color("green"))
        
        layout3.addWidget(Color("red"))
        layout3.addWidget(Color("purple"))
        
        layout1.addLayout(layout3)
        
        widget = QWidget()
        widget.setLayout(layout1)
        self.setCentralWidget(widget)
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ‚¨åº”è¯¥è§‚å¯Ÿé—´è·å’Œè¾¹è·çš„æ•ˆæœã€‚è¯·æ‚¨å°è¯•è°ƒæ•´æ•°å€¼ï¼Œç›´åˆ°æ‚¨å¯¹å®ƒä»¬æœ‰äº†ä¸€å®šçš„æŠŠæ¡ã€‚

![Figure27](Figure27.png)

> å›¾äºŒåä¸ƒï¼šåµŒå¥—çš„ `QHBoxLayout` å’Œ `QVBoxLayout` å¸ƒå±€ï¼Œåœ¨æ§ä»¶å‘¨å›´ç•™æœ‰é—´è·å’Œè¾¹è·

### `QGridLayout` æ§ä»¶ä»¥ç½‘æ ¼å½¢å¼æ’åˆ—

å°½ç®¡å®ƒä»¬éå¸¸æœ‰ç”¨ï¼Œä½†å¦‚æœæ‚¨å°è¯•ä½¿ç”¨ `QVBoxLayout` å’Œ `QHBoxLayout` æ¥å¸ƒå±€å¤šä¸ªå…ƒç´ ï¼ˆä¾‹å¦‚è¡¨å•ï¼‰ï¼Œæ‚¨ä¼šå‘ç°å¾ˆéš¾ç¡®ä¿ä¸åŒå¤§å°çš„æ§ä»¶å¯¹é½ã€‚è§£å†³æ­¤é—®é¢˜çš„åŠæ³•æ˜¯ä½¿ç”¨ `QGridLayout`ã€‚

![Figure28](Figure28.png)

> å›¾äºŒåå…«ï¼šä¸€ä¸ªç”¨äºæ˜¾ç¤ºæ¯ä¸ªä½ç½®çš„ç½‘æ ¼ä½ç½®çš„ `QGridLayout` 

`QGridLayout` å…è®¸æ‚¨åœ¨ç½‘æ ¼ä¸­ç‰¹å®šåœ°æ”¾ç½®é¡¹ç›®ã€‚æ‚¨å¯ä»¥ä¸ºæ¯ä¸ªæ§ä»¶æŒ‡å®šè¡Œå’Œåˆ—ä½ç½®ã€‚æ‚¨å¯ä»¥è·³è¿‡æŸäº›å…ƒç´ ï¼Œå®ƒä»¬å°†è¢«ç•™ç©ºã€‚

![Figure29](Figure29.png)

> å›¾äºŒåä¹ï¼šæœ‰æœªå¡«å……æ§½çš„ `QGridLayout`

*Listing 31. basic/layout_6.py*

```python
import sys

from PyQt6.QtCore import Qt
from PyQt6.QtWidgets import (
    QApplication,
    QGridLayout,
    QLabel,
    QMainWindow,
    QWidget,
)

from layout_colorwidget import Color


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

        self.setWindowTitle("My App")

        layout = QGridLayout()

        layout.addWidget(Color("red"), 0, 0)
        layout.addWidget(Color("green"), 1, 0)
        layout.addWidget(Color("blue"), 1, 1)
        layout.addWidget(Color("purple"), 2, 1)

        widget = QWidget()
        widget.setLayout(layout)
        self.setCentralWidget(widget)
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ‚¨åº”è¯¥çœ‹åˆ°æ§ä»¶ä»¥ç½‘æ ¼å½¢å¼æ’åˆ—ï¼Œå°½ç®¡ç¼ºå°‘æ¡ç›®ï¼Œä½†ä»ç„¶å¯¹é½ã€‚

![Figure30](Figure30.png)

> å›¾ä¸‰åï¼šåœ¨ä¸€ä¸ª `QGridLayout` çš„å››ä¸ª `Color` æ§ä»¶

### `QStackedLayout` åœ¨åŒä¸€ç©ºé—´ä¸­æ”¾ç½®å¤šä¸ªæ§ä»¶

æˆ‘ä»¬å°†ä»‹ç»çš„æœ€åä¸€ç§å¸ƒå±€æ˜¯ `QStackedLayout`ã€‚å¦‚ä¸Šæ‰€è¿°ï¼Œè¿™ç§å¸ƒå±€å…è®¸æ‚¨å°†å…ƒç´ ç›´æ¥æ”¾ç½®åœ¨å½¼æ­¤å‰é¢ã€‚ç„¶åï¼Œæ‚¨å¯ä»¥é€‰æ‹©è¦æ˜¾ç¤ºçš„æ§ä»¶ã€‚æ‚¨å¯ä»¥åœ¨å›¾å½¢åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å®ƒæ¥ç»˜åˆ¶å›¾å±‚ï¼Œæˆ–æ¨¡ä»¿æ ‡ç­¾å¼ç•Œé¢ã€‚è¯·æ³¨æ„ï¼Œè¿˜æœ‰ `QStackedWidget`ï¼Œè¿™æ˜¯ä¸€ä¸ªå®Œå…¨ä»¥ç›¸åŒæ–¹å¼å·¥ä½œçš„å®¹å™¨æ§ä»¶ã€‚å¦‚æœæ‚¨å¸Œæœ›ç›´æ¥å°†ä¸€ä¸ªæ ˆæ·»åŠ åˆ° `QMainWindow` ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ `.setCentralWidget` æ–¹æ³•ã€‚

![Figure31](Figure31.png)

> å›¾ä¸‰åä¸€ï¼š`QStackedLayout` â€”â€” ä½¿ç”¨æ—¶ï¼Œåªæœ‰æœ€ä¸Šé¢çš„æ§ä»¶å¯è§ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™æ˜¯æ·»åŠ åˆ°å¸ƒå±€ä¸­çš„ç¬¬ä¸€ä¸ªæ§ä»¶ã€‚

![Figure32](Figure32.png)

> å›¾ä¸‰åäºŒï¼š`QStackedLayout`ï¼Œå¯ä»¥é€‰æ‹©ç¬¬äºŒä¸ªï¼ˆå›¾ä¸­æ ‡å·ä¸º1ï¼‰æ§ä»¶å¹¶å°†å…¶ç½®äºæœ€å‰é¢ã€‚

*Listing 32. basic/layout_7.py*

```python
import sys

from PyQt6.QtCore import Qt
from PyQt6.QtWidgets import (
    QApplication,
    QLabel,
    QMainWindow,
    QStackedLayout,
    QWidget,
)

from layout_colorwidget import Color


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        layout = QStackedLayout()
        
        layout.addWidget(Color("red"))
        layout.addWidget(Color("green"))
        layout.addWidget(Color("blue"))
        layout.addWidget(Color("yellow"))
        
        layout.setCurrentIndex(3)
        
        widget = QWidget()
        widget.setLayout(layout)
        self.setCentralWidget(widget)
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ‚¨åªä¼šçœ‹åˆ°æœ€åæ·»åŠ çš„æ§ä»¶ã€‚

![Figure33](Figure33.png)

> å›¾ä¸‰åä¸‰ï¼šå †æ ˆæ§ä»¶ï¼Œä»…æ˜¾ç¤ºä¸€ä¸ªæ§ä»¶ï¼ˆæœ€åæ·»åŠ çš„æ§ä»¶ï¼‰ã€‚

`QStackedWidget` æ˜¯åº”ç”¨ç¨‹åºä¸­æ ‡ç­¾è§†å›¾çš„å·¥ä½œæ–¹å¼ã€‚ä»»ä½•æ—¶å€™åªèƒ½çœ‹åˆ°ä¸€ä¸ªè§†å›¾ï¼ˆâ€œæ ‡ç­¾â€ï¼‰ã€‚æ‚¨å¯ä»¥éšæ—¶ä½¿ç”¨ `.setCurrentIndex()` æˆ– `.setCurrentWidget()` é€šè¿‡ç´¢å¼•ï¼ˆæŒ‰æ§ä»¶æ·»åŠ çš„é¡ºåºï¼‰æˆ–æ§ä»¶æœ¬èº«æ¥è®¾ç½®é¡¹ç›®ï¼Œä»è€Œæ§åˆ¶è¦æ˜¾ç¤ºçš„æ§ä»¶ã€‚

ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€çŸ­çš„æ¼”ç¤ºï¼Œä½¿ç”¨ `QStackedLayout` ä¸`QButton` ç»“åˆï¼Œä¸ºåº”ç”¨ç¨‹åºæä¾›ä¸€ä¸ªç±»ä¼¼æ ‡ç­¾é¡µçš„ç•Œé¢â€”â€”

*Listing 33. basic/layout_8.py*

```python
import sys

from PyQt6.QtCore import Qt
from PyQt6.QtWidgets import (
    QApplication,
    QHBoxLayout,
    QLabel,
    QMainWindow,
    QPushButton,
    QStackedLayout,
    QVBoxLayout,
    QWidget,
)

from layout_colorwidget import Color


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

        self.setWindowTitle("My App")

        pagelayout = QVBoxLayout()
        button_layout = QHBoxLayout()
        self.stacklayout = QStackedLayout()

        pagelayout.addLayout(button_layout)
        pagelayout.addLayout(self.stacklayout)

        btn = QPushButton("red")
        btn.pressed.connect(self.activate_tab_1)
        button_layout.addWidget(btn)
        self.stacklayout.addWidget(Color("red"))

        btn = QPushButton("green")
        btn.pressed.connect(self.activate_tab_2)
        button_layout.addWidget(btn)
        self.stacklayout.addWidget(Color("green"))

        btn = QPushButton("yellow")
        btn.pressed.connect(self.activate_tab_3)
        button_layout.addWidget(btn)
        self.stacklayout.addWidget(Color("yellow"))

        widget = QWidget()
        widget.setLayout(pagelayout)
        self.setCentralWidget(widget)
        
    def activate_tab_1(self):
        self.stacklayout.setCurrentIndex(0)
        
    def activate_tab_2(self):
        self.stacklayout.setCurrentIndex(1)
        
    def activate_tab_3(self):
        self.stacklayout.setCurrentIndex(2)
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** ç°åœ¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æŒ‰é’®æ›´æ”¹å¯è§æ§ä»¶ã€‚

![Figure34](Figure34.png)

> å›¾ä¸‰åå››ï¼šä¸€ä¸ªå †æ ˆæ§ä»¶ï¼Œå¸¦æœ‰ç”¨äºæ§åˆ¶æ´»åŠ¨æ§ä»¶çš„æŒ‰é’®ã€‚

Qt æä¾›äº†ä¸€ä¸ªå†…ç½®çš„é€‰é¡¹å¡æ§ä»¶ï¼Œå¯ä»¥æä¾›è¿™ç§å¸ƒå±€ï¼Œéå¸¸æ–¹ä¾¿â€”â€”å°½ç®¡å®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªæ§ä»¶ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå¸ƒå±€ã€‚ä¸‹é¢çš„é€‰é¡¹å¡æ¼”ç¤ºæ˜¯ä½¿ç”¨ `QTabWidget` é‡æ–°åˆ›å»ºçš„â€”â€”

*Listing 34. basic/layout_9.py*

```python
import sys

from PyQt6.QtCore import Qt
from PyQt6.QtWidgets import (
    QApplication,
    QLabel,
    QMainWindow,
    QPushButton,
    QTabWidget,
    QWidget,
)

from layout_colorwidget import Color


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

        self.setWindowTitle("My App")

        tabs = QTabWidget()
        tabs.setTabPosition(QTabWidget.TabPosition.West)
        tabs.setMovable(True)

        for n, color in enumerate(["red", "green", "blue", "yellow"]):
            tabs.addTab(Color(color), color)
            
        self.setCentralWidget(tabs)
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

å¦‚æ‚¨æ‰€è§ï¼Œè¿™ç§æ–¹å¼æ›´åŠ ç›´è§‚â€”â€”ä¹Ÿæ›´å…·å¸å¼•åŠ›ï¼æ‚¨å¯ä»¥é€šè¿‡è®¾ç½®æ–¹å‘æ¥è°ƒæ•´æ ‡ç­¾çš„ä½ç½®ï¼Œå¹¶é€šè¿‡ `.setMoveable` æ–¹æ³•åˆ‡æ¢æ ‡ç­¾æ˜¯å¦å¯ç§»åŠ¨ã€‚

![Figure35](Figure35.png)

> å›¾ä¸‰åäº”ï¼šåŒ…å«æˆ‘ä»¬æ§ä»¶çš„ QTabWidgetï¼Œæ ‡ç­¾æ˜¾ç¤ºåœ¨å·¦ä¾§ï¼ˆè¥¿ä¾§ï¼‰ã€‚å±å¹•æˆªå›¾æ˜¾ç¤ºäº†åœ¨ *Windows*ã€*macOS* å’Œ *Ubuntu* ä¸Šçš„å¤–è§‚ã€‚

æ‚¨ä¼šå‘ç° macOS æ ‡ç­¾æ ä¸å…¶ä»–å¹³å°çš„æ ‡ç­¾æ å¤–è§‚å·®å¼‚æ˜¾è‘—â€”â€”åœ¨macOS ç³»ç»Ÿä¸­ï¼Œæ ‡ç­¾é»˜è®¤é‡‡ç”¨è¯ä¸¸å½¢æˆ–æ°”æ³¡å½¢æ ·å¼ã€‚åœ¨ macOS ç³»ç»Ÿä¸­ï¼Œæ­¤æ ·å¼é€šå¸¸ç”¨äºæ ‡ç­¾å¼é…ç½®é¢æ¿ã€‚å¯¹äºæ–‡æ¡£ï¼Œæ‚¨å¯ä»¥å¯ç”¨æ–‡æ¡£æ¨¡å¼ï¼Œä»¥è·å¾—ä¸å…¶ä»–å¹³å°ç±»ä¼¼çš„çº¤è–„æ ‡ç­¾æ ·å¼ã€‚æ­¤é€‰é¡¹å¯¹å…¶ä»–å¹³å°æ— å½±å“ã€‚

*Listing 35. basic/layout_9b.py*

```python
        tabs = QTabWidget()
        tabs.setDocumentMode(True)
```

![Figure36](Figure36.png)

> å›¾ä¸‰åå…­ï¼šåœ¨ macOS ä¸Šï¼Œ`QTabWidget` çš„æ–‡æ¡£æ¨¡å¼è®¾ç½®ä¸º `True`ã€‚

## 7. æ“ä½œã€å·¥å…·æ ä¸èœå•

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ¢è®¨ä¸€äº›å¸¸è§çš„ç”¨æˆ·ç•Œé¢å…ƒç´ ï¼Œè¿™äº›å…ƒç´ æ‚¨å¯èƒ½åœ¨è®¸å¤šå…¶ä»–åº”ç”¨ç¨‹åºä¸­éƒ½è§è¿‡â€”â€”å·¥å…·æ å’Œèœå•ã€‚æˆ‘ä»¬è¿˜å°†æ¢ç´¢Qtæä¾›çš„ç”¨äºå‡å°‘ä¸åŒç”¨æˆ·ç•Œé¢åŒºåŸŸä¹‹é—´é‡å¤æ€§çš„ä¾¿æ·ç³»ç»Ÿâ€”â€” `QAction`ã€‚

### å·¥å…·æ 

æœ€å¸¸è§çš„ç”¨æˆ·ç•Œé¢å…ƒç´ ä¹‹ä¸€æ˜¯å·¥å…·æ ã€‚å·¥å…·æ æ˜¯ç”±å›¾æ ‡å’Œ/æˆ–æ–‡æœ¬ç»„æˆçš„æ¡å½¢æ§ä»¶ï¼Œç”¨äºåœ¨åº”ç”¨ç¨‹åºä¸­æ‰§è¡Œå¸¸è§ä»»åŠ¡ï¼Œè€Œé€šè¿‡èœå•è®¿é—®è¿™äº›ä»»åŠ¡ä¼šæ˜¾å¾—ç¹çã€‚å®ƒä»¬æ˜¯è®¸å¤šåº”ç”¨ç¨‹åºä¸­æœ€ä¸ºå¸¸è§çš„ç”¨æˆ·ç•Œé¢åŠŸèƒ½ä¹‹ä¸€ã€‚å°½ç®¡ä¸€äº›å¤æ‚çš„åº”ç”¨ç¨‹åºï¼Œç‰¹åˆ«æ˜¯å¾®è½¯Officeå¥—ä»¶ä¸­çš„åº”ç”¨ç¨‹åºï¼Œå·²è¿ç§»åˆ°åŸºäºä¸Šä¸‹æ–‡çš„â€œåŠŸèƒ½åŒºâ€ç•Œé¢ï¼Œä½†å¯¹äºæ‚¨å°†åˆ›å»ºçš„å¤§å¤šæ•°åº”ç”¨ç¨‹åºè€Œè¨€ï¼Œæ ‡å‡†å·¥å…·æ å·²è¶³å¤Ÿä½¿ç”¨ã€‚

![Figure37](Figure37.png)

> å›¾ä¸‰åä¸ƒï¼šæ ‡å‡†å›¾å½¢ç”¨æˆ·ç•Œé¢å…ƒç´ â€”â€”å·¥å…·æ 

Qt å·¥å…·æ æ”¯æŒæ˜¾ç¤ºå›¾æ ‡ã€æ–‡æœ¬ï¼Œè¿˜å¯ä»¥åŒ…å«ä»»ä½•æ ‡å‡†çš„ Qt æ§ä»¶ã€‚ä½†æ˜¯ï¼Œå¯¹äºæŒ‰é’®è€Œè¨€ï¼Œæœ€å¥½çš„æ–¹æ³•æ˜¯åˆ©ç”¨ `QAction` ç³»ç»Ÿå°†æŒ‰é’®æ”¾ç½®åœ¨å·¥å…·æ ä¸Šã€‚

è®©æˆ‘ä»¬å…ˆä¸ºåº”ç”¨ç¨‹åºæ·»åŠ ä¸€ä¸ªå·¥å…·æ ã€‚

![tips](tips.png)

> è¯·æ‚¨åŠ è½½ä¸€ä¸ªå…¨æ–°çš„ `myapp.py` å‰¯æœ¬ï¼Œå¹¶å°†å…¶ä¿å­˜ä¸ºæ–°åç§°ä»¥ä¾›æœ¬èŠ‚ä½¿ç”¨ã€‚

åœ¨ Qt ä¸­ï¼Œå·¥å…·æ æ˜¯é€šè¿‡ `QToolBar` ç±»åˆ›å»ºçš„ã€‚é¦–å…ˆï¼Œæ‚¨éœ€è¦åˆ›å»ºè¯¥ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œç„¶åè°ƒç”¨ `QMainWindow` çš„ `.addToolbar` æ–¹æ³•ã€‚å°†ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ç»™ `QToolBar` ç±»ï¼Œå³å¯è®¾ç½®å·¥å…·æ çš„åç§°ï¼Œè¯¥åç§°å°†ç”¨äºåœ¨ç”¨æˆ·ç•Œé¢ä¸­è¯†åˆ«è¯¥å·¥å…·æ ã€‚

*Listing 36. basic/toolbars_and_menus_1.py*

```python
class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

        self.setWindowTitle("My App")

        label = QLabel("Hello!")
        label.setAlignment(Qt.AlignmentFlag.AlignCenter)

        self.setCentralWidget(label)

        toolbar = QToolBar("My main toolbar")
        self.addToolBar(toolbar)
        
    def onMyToolBarButtonClick(self, s):
        print("click", s)
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ‚¨ä¼šåœ¨çª—å£é¡¶éƒ¨çœ‹åˆ°ä¸€æ¡ç»†é•¿çš„ç°è‰²æ¡ã€‚è¿™å°±æ˜¯æ‚¨çš„å·¥å…·æ ã€‚å³é”®ç‚¹å‡»å¹¶ç‚¹å‡»åç§°å³å¯å°†å…¶å…³é—­ã€‚ 

![Figure38](Figure38.png)

> å›¾ä¸‰åå…«ï¼šä¸€ä¸ªå¸¦æœ‰å·¥å…·æ çš„çª—å£

![caution](caution.png)

> æˆ‘æ— æ³•æ¢å¤æˆ‘çš„å·¥å…·æ äº†ï¼ï¼Ÿ
>
> ä¸å¹¸çš„æ˜¯ï¼Œä¸€æ—¦æ‚¨ç§»é™¤äº†å·¥å…·æ ï¼Œç°åœ¨å°±æ²¡æœ‰åœ°æ–¹å¯ä»¥å³é”®ç‚¹å‡»æ¥é‡æ–°æ·»åŠ å®ƒã€‚å› æ­¤ï¼Œä½œä¸ºä¸€ä¸ªé€šç”¨çš„è§„åˆ™ï¼Œæ‚¨åº”è¯¥è¦ä¹ˆä¿ç•™ä¸€ä¸ªä¸å¯ç§»é™¤çš„å·¥å…·æ ï¼Œè¦ä¹ˆæä¾›ä¸€ä¸ªæ›¿ä»£ç•Œé¢æ¥å¼€å¯æˆ–å…³é—­å·¥å…·æ ã€‚

è®©æˆ‘ä»¬è®©å·¥å…·æ å˜å¾—æ›´æœ‰è¶£ä¸€äº›ã€‚æˆ‘ä»¬åªéœ€æ·»åŠ ä¸€ä¸ª `QButton` æ§ä»¶å³å¯ï¼Œä½† Qt ä¸­è¿˜æœ‰ä¸€ç§æ›´å¥½çš„æ–¹æ³•å¯ä»¥ä¸ºæ‚¨æä¾›ä¸€äº›å¾ˆé…·çš„åŠŸèƒ½â€”â€”é‚£å°±æ˜¯é€šè¿‡ `QAction`ã€‚`QAction` æ˜¯ä¸€ä¸ªæä¾›æè¿°æŠ½è±¡ç”¨æˆ·ç•Œé¢çš„æ–¹æ³•çš„ç±»ã€‚è¿™æ„å‘³ç€ï¼Œæ‚¨å¯ä»¥åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­å®šä¹‰å¤šä¸ªç•Œé¢å…ƒç´ ï¼Œå¹¶é€šè¿‡ä¸è¯¥å…ƒç´ äº¤äº’çš„æ•ˆæœå°†å®ƒä»¬ç»Ÿä¸€èµ·æ¥ã€‚ä¾‹å¦‚ï¼Œå·¥å…·æ å’Œèœå•ä¸­é€šå¸¸éƒ½ä¼šå‡ºç°ä¸€äº›åŠŸèƒ½ï¼Œä¾‹å¦‚â€œç¼–è¾‘â†’å‰ªåˆ‡â€ï¼Œå®ƒæ—¢å­˜åœ¨äºâ€œç¼–è¾‘â€èœå•ä¸­ï¼Œä¹Ÿä»¥å‰ªåˆ€å›¾æ ‡çš„å½¢å¼å‡ºç°åœ¨å·¥å…·æ ä¸Šï¼ŒåŒæ—¶è¿˜æ”¯æŒé”®ç›˜å¿«æ·é”® `Ctrl-X`ï¼ˆmacOS ä¸Šä¸º `Cmd-X`ï¼‰.

å¦‚æœæ²¡æœ‰ `QAction`ï¼Œæ‚¨å¿…é¡»åœ¨å¤šä¸ªåœ°æ–¹å®šä¹‰æ­¤æ“ä½œã€‚ä½†ä½¿ç”¨ `QAction` ï¼Œæ‚¨å°±å¯ä»¥åªå®šä¹‰ä¸€ä¸ª `QAction`ï¼Œå®šä¹‰è§¦å‘æ“ä½œï¼Œç„¶åå°†æ­¤æ“ä½œæ·»åŠ åˆ°èœå•å’Œå·¥å…·æ ä¸­ã€‚æ¯ä¸ª `QAction` éƒ½æœ‰åç§°ã€çŠ¶æ€æ¶ˆæ¯ã€å›¾æ ‡å’Œå¯è¿æ¥çš„ä¿¡å·ï¼ˆä»¥åŠæ›´å¤šå†…å®¹ï¼‰ã€‚

è¯·å‚é˜…ä¸‹é¢çš„ä»£ç ï¼Œäº†è§£å¦‚ä½•æ·»åŠ æ‚¨çš„ç¬¬ä¸€ä¸ª `QAction`ã€‚

*Listing 37. basic/toolbars_and_menus_2.py*

```python
class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

        self.setWindowTitle("My App")

        label = QLabel("Hello!")
        label.setAlignment(Qt.AlignmentFlag.AlignCenter)

        self.setCentralWidget(label)

        toolbar = QToolBar("My main toolbar")
        self.addToolBar(toolbar)

        button_action = QAction("Your button", self)
        button_action.setStatusTip("This is your button")
        button_action.triggered.connect(self.onMyToolBarButtonClick)
        toolbar.addAction(button_action)
        
    def onMyToolBarButtonClick(self, s):
        print("click", s)
```

é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå‡½æ•°æ¥æ¥å—æ¥è‡ª `QAction` çš„ä¿¡å·ï¼Œä»¥ä¾¿æŸ¥çœ‹å®ƒæ˜¯å¦æ­£å¸¸å·¥ä½œã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®šä¹‰ `QAction` æœ¬èº«ã€‚åœ¨åˆ›å»ºå®ä¾‹æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¼ é€’ä¸€ä¸ªåŠ¨ä½œæ ‡ç­¾å’Œ/æˆ–å›¾æ ‡ã€‚ä½ è¿˜å¿…é¡»ä¼ é€’ä»»ä½• `QObject` ä½œä¸ºåŠ¨ä½œçš„çˆ¶å¯¹è±¡â€”â€”è¿™é‡Œæˆ‘ä»¬ä¼ é€’ self ä½œä¸ºå¯¹ä¸»çª—å£çš„å¼•ç”¨ã€‚å¯¹äº `QAction` æ¥è¯´ï¼Œçˆ¶å¯¹è±¡ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°ä¼ é€’ï¼Œè¿™æœ‰ç‚¹å¥‡æ€ªã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©è®¾ç½®ä¸€ä¸ªçŠ¶æ€æç¤ºâ€”â€”ä¸€æ—¦æœ‰çŠ¶æ€æ ï¼Œè¯¥æ–‡æœ¬å°±ä¼šæ˜¾ç¤ºåœ¨çŠ¶æ€æ ä¸Šã€‚æœ€åï¼Œæˆ‘ä»¬å°† `.triggered` ä¿¡å·è¿æ¥åˆ°è‡ªå®šä¹‰å‡½æ•°ã€‚æ¯å½“ `QAction` è¢«â€œè§¦å‘â€ï¼ˆæˆ–æ¿€æ´»ï¼‰æ—¶ï¼Œè¯¥ä¿¡å·å°±ä¼šè§¦å‘ã€‚

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ‚¨åº”è¯¥çœ‹åˆ°å¸¦æœ‰æ‚¨å®šä¹‰çš„æ ‡ç­¾çš„æŒ‰é’®ã€‚å¦‚æœæ‚¨ç‚¹å‡»å®ƒï¼Œæˆ‘ä»¬çš„è‡ªå®šä¹‰å‡½æ•°å°±ä¼šè§¦å‘â€œç‚¹å‡»â€äº‹ä»¶å¹¶è¿”å›æŒ‰é’®çš„çŠ¶æ€ã€‚

![Figure39](Figure39.png)

> å›¾ä¸‰åä¹ï¼šæˆ‘ä»¬çš„ `QAction` æŒ‰é’®åœ¨å·¥å…·æ ä¸­æ˜¾ç¤ºå‡ºæ¥äº†

![tips](tips.png)

> ä¸ºä»€ä¹ˆä¿¡å·æ€»æ˜¯ä¸ºå‡ï¼Ÿ
>
> ä¼ é€’çš„ä¿¡å·è¡¨æ˜è¯¥æ“ä½œæ˜¯å¦è¢«é€‰ä¸­ï¼Œè€Œç”±äºæˆ‘ä»¬çš„æŒ‰é’®ä¸èƒ½è¢«é€‰ä¸­â€”â€”åªèƒ½ç‚¹å‡»â€”â€”å› æ­¤å®ƒæ€»æ˜¯ä¸ºå‡ã€‚è¿™å°±åƒæˆ‘ä»¬ä¹‹å‰çœ‹åˆ°çš„ `QPushButton` ä¸€æ ·ã€‚

è®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªçŠ¶æ€æ ã€‚

æˆ‘ä»¬é€šè¿‡è°ƒç”¨ `QStatusBar` å¹¶å°†å…¶ç»“æœä¼ é€’ç»™ `.setStatusBar` æ¥åˆ›å»ºçŠ¶æ€æ å¯¹è±¡ã€‚ç”±äºæˆ‘ä»¬ä¸éœ€è¦ä¿®æ”¹çŠ¶æ€æ è®¾ç½®ï¼Œå› æ­¤å¯ä»¥åœ¨åˆ›å»ºæ—¶ç›´æ¥å°†å…¶ä¼ é€’è¿›å»ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ä¸€è¡Œä»£ç ä¸­åˆ›å»ºå¹¶å®šä¹‰çŠ¶æ€æ ï¼š

*Listing 38. basic/toolbars_and_menus_3.py*

```python
class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

        self.setWindowTitle("My App")

        label = QLabel("Hello!")
        label.setAlignment(Qt.AlignmentFlag.AlignCenter)

        self.setCentralWidget(label)

        toolbar = QToolBar("My main toolbar")
        self.addToolBar(toolbar)

        button_action = QAction("Your button", self)
        button_action.setStatusTip("This is your button")
        button_action.triggered.connect(self.onMyToolBarButtonClick)
        toolbar.addAction(button_action)
        
        self.setStatusBar(QStatusBar(self))
        
    def onMyToolBarButtonClick(self, s):
        print("click", s)
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** å°†é¼ æ ‡æ‚¬åœåœ¨å·¥å…·æ æŒ‰é’®ä¸Šï¼Œæ‚¨å°†çœ‹åˆ°çŠ¶æ€æ–‡æœ¬åœ¨çª—å£åº•éƒ¨çš„çŠ¶æ€æ ä¸­æ˜¾ç¤ºã€‚

![Figure40](Figure40.png)

> å›¾å››åï¼šçŠ¶æ€æ æ–‡æœ¬ä¼šåœ¨æˆ‘ä»¬æ‚¬åœæ“ä½œæ—¶æ›´æ–°ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æŠŠ `QAction` è®¾ç½®ä¸ºå¯åˆ‡æ¢çš„â€”â€”ç‚¹å‡»ä¸€æ¬¡ä¼šå°†å…¶æ‰“å¼€ï¼Œå†æ¬¡ç‚¹å‡»ä¼šå°†å…¶å…³é—­ã€‚è¦å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬åªéœ€åœ¨ `QAction` å¯¹è±¡ä¸Šè°ƒç”¨ `setCheckable(True)` æ–¹æ³•ã€‚

*Listing 39. basic/toolbars_and_menus_4.py*

```python
class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

        self.setWindowTitle("My App")

        label = QLabel("Hello!")
        label.setAlignment(Qt.AlignmentFlag.AlignCenter)

        self.setCentralWidget(label)

        toolbar = QToolBar("My main toolbar")
        self.addToolBar(toolbar)

        button_action = QAction("Your button", self)
        button_action.setStatusTip("This is your button")
        button_action.triggered.connect(self.onMyToolBarButtonClick)
        button_action.setCheckable(True)
        toolbar.addAction(button_action)
        
        self.setStatusBar(QStatusBar(self))
        
    def onMyToolBarButtonClick(self, s):
        print("click", s)
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** è¯·æ‚¨ç‚¹å‡»æŒ‰é’®ï¼ŒæŸ¥çœ‹å®ƒä»é€‰ä¸­çŠ¶æ€åˆ‡æ¢åˆ°æœªé€‰ä¸­çŠ¶æ€ã€‚è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ç°åœ¨åˆ›å»ºçš„è‡ªå®šä¹‰æ§½å‡½æ•°äº¤æ›¿è¾“å‡º `True` å’Œ `False`ã€‚

![Figure41](Figure41.png)

> å›¾å››åä¸€ï¼šå·¥å…·æ æŒ‰é’®å·²å¯ç”¨

![tips](tips.png)

> `.toggled` ä¿¡å·
>
> è¿˜æœ‰ä¸€ä¸ª `.toggled` ä¿¡å·ï¼Œåªæœ‰åœ¨æŒ‰é’®è¢«åˆ‡æ¢æ—¶æ‰ä¼šå‘å‡ºä¿¡å·ã€‚ä½†æ•ˆæœç›¸åŒï¼Œå› æ­¤åŸºæœ¬ä¸Šæ¯«æ— æ„ä¹‰ã€‚

ç›®å‰çœ‹èµ·æ¥æœ‰ç‚¹æ— èŠï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ç»™æŒ‰é’®æ·»åŠ ä¸€ä¸ªå›¾æ ‡ã€‚ä¸ºæ­¤ï¼Œæˆ‘æ¨èè®¾è®¡å¸ˆYusuke Kamiyamaneè®¾è®¡çš„ [Fugueå›¾æ ‡é›†](http://p.yusukekamiyamane.com/)ã€‚è¿™æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„16x16åƒç´ å›¾æ ‡é›†ï¼Œå¯ä»¥ä¸ºä½ çš„åº”ç”¨ç¨‹åºå¢æ·»ä¸“ä¸šæ°”è´¨ã€‚è¯¥å›¾æ ‡é›†å¯å…è´¹ä½¿ç”¨ï¼Œåªéœ€åœ¨åˆ†å‘åº”ç”¨ç¨‹åºæ—¶æ³¨æ˜å‡ºå¤„å³å¯â€”â€”ä¸è¿‡æˆ‘ç›¸ä¿¡ï¼Œå¦‚æœæ¡ä»¶å…è®¸ï¼Œè®¾è®¡å¸ˆä¹Ÿä¼šå¾ˆä¹æ„æ”¶åˆ°ä½ çš„æèµ ã€‚

![Figure42](Figure42.png)

> å›¾å››åäºŒï¼šè®¾è®¡å¸ˆ Yusuke Kamiyamane çš„ä½œå“ï¼šFugueå›¾æ ‡é›†

ä»å›¾åƒé›†ï¼ˆåœ¨æ­¤ç¤ºä¾‹ä¸­æˆ‘é€‰æ‹©äº†æ–‡ä»¶ `bug.png`ï¼‰ä¸­é€‰æ‹©ä¸€å¼ å›¾åƒï¼Œå¹¶å°†å®ƒå¤åˆ¶åˆ°ä¸æºä»£ç ç›¸åŒçš„æ–‡ä»¶å¤¹ä¸­ã€‚æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª `QIcon` å¯¹è±¡ï¼Œé€šè¿‡å°†æ–‡ä»¶è·¯å¾„ä¼ é€’ç»™è¯¥ç±»æ¥å®ç°ã€‚æˆ‘ä»¬ä½¿ç”¨åœ¨ [â€œæ§ä»¶â€](#5.-æ§ä»¶) ä¸€ç« ä¸­å­¦ä¹ åˆ°çš„ `basedir` æŠ€æœ¯åŠ è½½å›¾æ ‡ã€‚è¿™ç¡®ä¿æ— è®ºæ‚¨ä»ä½•å¤„è¿è¡Œè„šæœ¬ï¼Œéƒ½èƒ½æ‰¾åˆ°è¯¥æ–‡ä»¶ã€‚æœ€åï¼Œè¦å°†å›¾æ ‡æ·»åŠ åˆ° `QAction`ï¼ˆä»¥åŠæŒ‰é’®ï¼‰ä¸­ï¼Œåªéœ€åœ¨åˆ›å»º `QAction` æ—¶å°†å…¶ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’å³å¯ã€‚

æ‚¨è¿˜éœ€è¦è®©å·¥å…·æ çŸ¥é“ä½ çš„å›¾æ ‡å¤§å°ï¼Œå¦åˆ™æ‚¨çš„å›¾æ ‡å‘¨å›´ä¼šå‡ºç°å¤§é‡å¡«å……ã€‚æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨ `.setIconSize()` å¹¶ä¼ å…¥ä¸€ä¸ª `QSize` å¯¹è±¡æ¥å®ç°è¿™ä¸€ç‚¹ã€‚

*Listing 40. basic/toolbars_and_menus_5.py*

```python
import os
import sys

from PyQt6.QtCore import QSize, Qt
from PyQt6.QtGui import QAction, QIcon
from PyQt6.QtWidgets import (
    QApplication,
    QLabel,
    QMainWindow,
    QStatusBar,
    QToolBar,
)

basedir = os.path.dirname(__file__)

# tag::MainWindow[]
class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

        self.setWindowTitle("My App")

        label = QLabel("Hello!")
        label.setAlignment(Qt.AlignmentFlag.AlignCenter)

        self.setCentralWidget(label)

        toolbar = QToolBar("My main toolbar")
        toolbar.setIconSize(QSize(16, 16))
        self.addToolBar(toolbar)

        button_action = QAction(
            QIcon(os.path.join(basedir, "bug.png")),
            "Your button",
            self,
        )
        button_action.setStatusTip("This is your button")
        button_action.triggered.connect(self.onMyToolBarButtonClick)
        button_action.setCheckable(True)
        toolbar.addAction(button_action)
        
        self.setStatusBar(QStatusBar(self))
        
    def onMyToolBarButtonClick(self, s):
        print("click", s)
        
        
# end::MainWindow[]

app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** `QAction` ç°åœ¨ä»¥å›¾æ ‡å½¢å¼æ˜¾ç¤ºã€‚æ‰€æœ‰åŠŸèƒ½å‡ä¸ä¹‹å‰å®Œå…¨ç›¸åŒã€‚

![Figure43](Figure43.png)

> å›¾å››åä¸‰ï¼šæˆ‘ä»¬å¸¦æœ‰ä¸€ä¸ªå›¾æ ‡çš„æ“ä½œæŒ‰é’®

è¯·æ³¨æ„ï¼ŒQt ä½¿ç”¨æ“ä½œç³»ç»Ÿçš„é»˜è®¤è®¾ç½®æ¥ç¡®å®šæ˜¯å¦åœ¨å·¥å…·æ ä¸­æ˜¾ç¤ºå›¾æ ‡ã€æ–‡æœ¬æˆ–å›¾æ ‡å’Œæ–‡æœ¬ã€‚ä½†æ‚¨å¯ä»¥ä½¿ç”¨ `.setToolButtonStyle` è¦†ç›–æ­¤è®¾ç½®ã€‚è¯¥æ§½æ¥å—æ¥è‡ª `Qt.`å‘½åç©ºé—´çš„ä»¥ä¸‹ä»»ä½•æ ‡å¿—ï¼š

| æ ‡å¿—                                          | è¡Œä¸º                                 |
| --------------------------------------------- | ------------------------------------ |
| `Qt.ToolButtonStyle.ToolButtonIconOnly`       | ä»…æœ‰å›¾æ ‡ï¼Œæ²¡æœ‰æ–‡æœ¬                   |
| `Qt.ToolButtonStyle.ToolButtonTextOnly`       | ä»…æœ‰æ–‡æœ¬ï¼Œæ²¡æœ‰å›¾æ ‡                   |
| `Qt.ToolButtonStyle.ToolButtonTextBesideIcon` | åŒæ—¶å­˜åœ¨æ–‡æœ¬å’Œå›¾æ ‡ï¼Œä¸”æ–‡æœ¬åœ¨å›¾æ ‡æ—è¾¹ |
| `Qt.ToolButtonStyle.ToolButtonTextUnderIcon`  | åŒæ—¶å­˜åœ¨æ–‡æœ¬å’Œå›¾æ ‡ï¼Œä¸”æ–‡æœ¬åœ¨å›¾æ ‡ä¸‹é¢ |
| `Qt.ToolButtonStyle.ToolButtonFollowStyle`    | è·Ÿéšæœ¬åœ°æ¡Œé¢çš„æ ·å¼                   |

![tips](tips.png)

> æˆ‘åº”è¯¥ä½¿ç”¨å“ªç§æ ·å¼ï¼Ÿ
>
> é»˜è®¤å€¼ä¸º `Qt.ToolButtonStyle.ToolButtonFollowStyle`ï¼Œè¿™æ„å‘³ç€æ‚¨çš„åº”ç”¨ç¨‹åºå°†é»˜è®¤éµå¾ªåº”ç”¨ç¨‹åºè¿è¡Œæ‰€åœ¨æ¡Œé¢çš„æ ‡å‡†/å…¨å±€è®¾ç½®ã€‚è¿™é€šå¸¸è¢«æ¨èä»¥ä½¿æ‚¨çš„åº”ç”¨ç¨‹åºå°½å¯èƒ½åœ°ä¸**ç³»ç»Ÿé£æ ¼**ä¸€è‡´ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å‘å·¥å…·æ æ·»åŠ ä¸€äº›å…¶ä»–å…ƒç´ ã€‚æˆ‘ä»¬å°†æ·»åŠ ç¬¬äºŒä¸ªæŒ‰é’®å’Œå¤é€‰æ¡†æ§ä»¶ã€‚å¦‚å‰æ‰€è¿°ï¼Œæ‚¨å¯ä»¥åœ¨æ­¤å¤„æ·»åŠ ä»»ä½•æ§ä»¶ï¼Œå› æ­¤è¯·éšæ„å‘æŒ¥åˆ›æ„ã€‚

*Listing 41. basic/toolbars_and_menus_6.py*

```python
class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

        self.setWindowTitle("My App")

        label = QLabel("Hello!")
        label.setAlignment(Qt.AlignmentFlag.AlignCenter)

        self.setCentralWidget(label)

        toolbar = QToolBar("My main toolbar")
        toolbar.setIconSize(QSize(16, 16))
        self.addToolBar(toolbar)

        button_action = QAction(
            QIcon(os.path.join(basedir, "bug.png")),
            "Your button",
            self,
        )
        button_action.setStatusTip("This is your button")
        button_action.triggered.connect(self.onMyToolBarButtonClick)
        button_action.setCheckable(True)
        toolbar.addAction(button_action)

        toolbar.addSeparator()

        button_action2 = QAction(
            QIcon(os.path.join(basedir, "bug.png")),
            "Your button2",
            self,
        )
        button_action2.setStatusTip("This is your button2")
        button_action2.triggered.connect(self.onMyToolBarButtonClick)
        button_action2.setCheckable(True)
        toolbar.addAction(button_action2)
        
        toolbar.addWidget(QLabel("Hello"))
        toolbar.addWidget(QCheckBox())

        self.setStatusBar(QStatusBar(self))

    def onMyToolBarButtonClick(self, s):
        print("click", s)
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** ç°åœ¨æ‚¨å¯ä»¥çœ‹åˆ°å¤šä¸ªæŒ‰é’®å’Œä¸€ä¸ªå¤é€‰æ¡†ã€‚

![Figure44](Figure44.png)

> å›¾å››åå››ï¼šå¸¦æœ‰ä¸€ä¸ªæ“ä½œå’Œä¸¤ä¸ªæ§ä»¶çš„å·¥å…·æ ã€‚

### èœå•

èœå•æ˜¯ç”¨æˆ·ç•Œé¢çš„å¦ä¸€ä¸ªæ ‡å‡†ç»„ä»¶ã€‚é€šå¸¸å®ƒä»¬ä½äºçª—å£é¡¶éƒ¨ï¼Œæˆ–åœ¨macOSç³»ç»Ÿä¸­ä½äºå±å¹•é¡¶éƒ¨ã€‚å®ƒä»¬å…è®¸è®¿é—®æ‰€æœ‰æ ‡å‡†åº”ç”¨ç¨‹åºåŠŸèƒ½ã€‚å­˜åœ¨ä¸€äº›æ ‡å‡†èœå•â€”â€”ä¾‹å¦‚æ–‡ä»¶ã€ç¼–è¾‘ã€å¸®åŠ©ã€‚èœå•å¯ä»¥åµŒå¥—ä»¥åˆ›å»ºåŠŸèƒ½çš„åˆ†å±‚æ ‘ç»“æ„ï¼Œå¹¶ä¸”å®ƒä»¬é€šå¸¸æ”¯æŒå¹¶æ˜¾ç¤ºé”®ç›˜å¿«æ·é”®ä»¥å¿«é€Ÿè®¿é—®å…¶åŠŸèƒ½ã€‚

![Figure45](Figure45.png)

> å›¾å››åäº”ï¼šæ ‡å‡†å›¾å½¢ç”¨æˆ·ç•Œé¢å…ƒç´ â€”â€”èœå•

è¦åˆ›å»ºèœå•ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ `QMainWindow` ä¸Šè°ƒç”¨ `.menuBar()` æ–¹æ³•æ¥åˆ›å»ºèœå•æ ã€‚æˆ‘ä»¬é€šè¿‡è°ƒç”¨ `.addMenu()` æ–¹æ³•å¹¶ä¼ å…¥èœå•åç§°æ¥åœ¨èœå•æ ä¸Šæ·»åŠ èœå•ã€‚æˆ‘å°†å…¶å‘½åä¸º `â€˜&Fileâ€™`ã€‚è¿™é‡Œçš„ `&` ç¬¦å·å®šä¹‰äº†å¿«æ·é”®ï¼ŒæŒ‰ä¸‹ Alt é”®æ—¶å¯å¿«é€Ÿè·³è½¬åˆ°è¯¥èœå•ã€‚

![caution](caution.png)

> macOS ä¸Šçš„å¿«æ·é”®
>
> è¿™åœ¨ macOS ä¸Šæ˜¯ä¸å¯è§çš„ã€‚è¯·æ³¨æ„ï¼Œè¿™ä¸é”®ç›˜å¿«æ·é”®ä¸åŒâ€”â€”æˆ‘ä»¬ç¨åä¼šè¯¦ç»†ä»‹ç»ã€‚

è¿™å°±æ˜¯æ“ä½œåŠŸèƒ½å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚æˆ‘ä»¬å¯ä»¥å¤ç”¨å·²æœ‰çš„ `QAction` æ¥ä¸ºèœå•æ·»åŠ ç›¸åŒçš„åŠŸèƒ½ã€‚è¦æ·»åŠ æ“ä½œï¼Œåªéœ€è°ƒç”¨ `.addAction` å¹¶ä¼ å…¥æˆ‘ä»¬å®šä¹‰çš„æ“ä½œä¹‹ä¸€ã€‚

*Listing 42. basic/toolbars_and_menus_7.py*

```python
class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

        self.setWindowTitle("My App")

        label = QLabel("Hello!")
        label.setAlignment(Qt.AlignmentFlag.AlignCenter)

        self.setCentralWidget(label)

        toolbar = QToolBar("My main toolbar")
        toolbar.setIconSize(QSize(16, 16))
        self.addToolBar(toolbar)

        button_action = QAction(
            QIcon(os.path.join(basedir, "bug.png")),
            "&Your button",
            self,
        )
        button_action.setStatusTip("This is your button")
        button_action.triggered.connect(self.onMyToolBarButtonClick)
        button_action.setCheckable(True)
        toolbar.addAction(button_action)

        toolbar.addSeparator()

        button_action2 = QAction(
            QIcon(os.path.join(basedir, "bug.png")),
            "Your &button2",
            self,
        )
        button_action2.setStatusTip("This is your button2")
        button_action2.triggered.connect(self.onMyToolBarButtonClick)
        button_action2.setCheckable(True)
        toolbar.addAction(button_action2)

        toolbar.addWidget(QLabel("Hello"))
        toolbar.addWidget(QCheckBox())
        
        self.setStatusBar(QStatusBar(self))
        
        menu = self.menuBar()
        
        file_menu = menu.addMenu("&File")
        file_menu.addAction(button_action)
        
    def onMyToolBarButtonClick(self, s):
        print("click", s)
```

ç‚¹å‡»èœå•ä¸­çš„é€‰é¡¹æ—¶ï¼Œæ‚¨ä¼šå‘ç°è¯¥é€‰é¡¹å¯åˆ‡æ¢çŠ¶æ€â€”â€”å®ƒç»§æ‰¿äº† `QAction` çš„ç‰¹æ€§ã€‚

![Figure46](Figure46.png)

> å›¾å››åå…­ï¼šçª—å£ä¸Šæ˜¾ç¤ºçš„èœå• â€” åœ¨ *macOS* ä¸Šï¼Œè¯¥èœå•å°†ä½äºå±å¹•é¡¶éƒ¨ã€‚

è®©æˆ‘ä»¬åœ¨èœå•ä¸­æ·»åŠ æ›´å¤šå†…å®¹ã€‚è¿™é‡Œæˆ‘ä»¬å°†ä¸ºèœå•æ·»åŠ ä¸€ä¸ªåˆ†éš”ç¬¦ï¼Œå®ƒå°†åœ¨èœå•ä¸­æ˜¾ç¤ºä¸ºä¸€æ¡æ°´å¹³çº¿ï¼Œç„¶åæ·»åŠ æˆ‘ä»¬åˆ›å»ºçš„ç¬¬äºŒä¸ª `QAction` ã€‚

*Listing 43. basic/toolbars_and_menus_8.py*

```	python
class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

        self.setWindowTitle("My App")

        label = QLabel("Hello!")
        label.setAlignment(Qt.AlignmentFlag.AlignCenter)

        self.setCentralWidget(label)

        toolbar = QToolBar("My main toolbar")
        toolbar.setIconSize(QSize(16, 16))
        self.addToolBar(toolbar)

        button_action = QAction(
            QIcon(os.path.join(basedir, "bug.png")),
            "&Your button",
            self,
        )
        button_action.setStatusTip("This is your button")
        button_action.triggered.connect(self.onMyToolBarButtonClick)
        button_action.setCheckable(True)
        toolbar.addAction(button_action)

        toolbar.addSeparator()

        button_action2 = QAction(
            QIcon(os.path.join(basedir, "bug.png")),
            "Your &button2",
            self,
        )
        button_action2.setStatusTip("This is your button2")
        button_action2.triggered.connect(self.onMyToolBarButtonClick)
        button_action2.setCheckable(True)
        toolbar.addAction(button_action2)

        toolbar.addWidget(QLabel("Hello"))
        toolbar.addWidget(QCheckBox())
        
        self.setStatusBar(QStatusBar(self))
        
        menu = self.menuBar()
        
        file_menu = menu.addMenu("&File")
        file_menu.addAction(button_action)
        file_menu.addSeparator()
        file_menu.addAction(button_action2)
        
    def onMyToolBarButtonClick(self, s):
        print("click", s)
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ‚¨åº”è¯¥çœ‹åˆ°ä¸¤ä¸ªèœå•é¡¹ï¼Œå®ƒä»¬ä¹‹é—´åº”è¯¥ä¼šæœ‰ä¸€æ¡åˆ†éš”çº¿ã€‚

![Figure47](Figure47.png)

> å›¾å››åä¸ƒï¼šæˆ‘ä»¬çš„æ“ä½œåœ¨èœå•ä¸­æ˜¾ç¤ºå‡ºæ¥äº†

æ‚¨è¿˜å¯ä»¥ä½¿ç”¨â€œ&â€ç¬¦å·ä¸ºèœå•æ·»åŠ å¿«æ·é”®ï¼Œä»¥ä¾¿åœ¨èœå•æ‰“å¼€æ—¶ï¼Œåªéœ€æŒ‰ä¸‹ä¸€ä¸ªé”®å³å¯è·³è½¬åˆ°èœå•é¡¹ã€‚åŒæ ·ï¼Œæ­¤åŠŸèƒ½åœ¨ macOS ä¸Šä¸é€‚ç”¨ã€‚

è¦æ·»åŠ å­èœå•ï¼Œåªéœ€é€šè¿‡è°ƒç”¨çˆ¶èœå•çš„ addMenu() æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°èœå•ã€‚ç„¶åæ‚¨å¯ä»¥åƒå¾€å¸¸ä¸€æ ·å‘å…¶ä¸­æ·»åŠ æ“ä½œé¡¹ã€‚ä¾‹å¦‚ï¼š

*Listing 44. basic/toolbars_and_menus_9.py*

```python
class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

        self.setWindowTitle("My App")

        label = QLabel("Hello!")
        label.setAlignment(Qt.AlignmentFlag.AlignCenter)

        self.setCentralWidget(label)

        toolbar = QToolBar("My main toolbar")
        toolbar.setIconSize(QSize(16, 16))
        self.addToolBar(toolbar)

        button_action = QAction(
            QIcon(os.path.join(basedir, "bug.png")),
            "&Your button",
            self,
        )
        button_action.setStatusTip("This is your button")
        button_action.triggered.connect(self.onMyToolBarButtonClick)
        button_action.setCheckable(True)
        toolbar.addAction(button_action)

        toolbar.addSeparator()

        button_action2 = QAction(
            QIcon(os.path.join(basedir, "bug.png")),
            "Your &button2",
            self,
        )
        button_action2.setStatusTip("This is your button2")
        button_action2.triggered.connect(self.onMyToolBarButtonClick)
        button_action2.setCheckable(True)
        toolbar.addAction(button_action2)

        toolbar.addWidget(QLabel("Hello"))
        toolbar.addWidget(QCheckBox())
        
        self.setStatusBar(QStatusBar(self))
        
        menu = self.menuBar()
        
        file_menu = menu.addMenu("&File")
        file_menu.addAction(button_action)
        file_menu.addSeparator()
        
        file_submenu = file_menu.addMenu("Submenu")
        file_submenu.addAction(button_action2)
        
    def onMyToolBarButtonClick(self, s):
        print("click", s)
```

å¦‚æœæ‚¨ç°åœ¨è¿è¡Œè¿™ä¸ªç¤ºä¾‹ï¼Œå¹¶å°†é¼ æ ‡æ‚¬åœåœ¨æ–‡ä»¶èœå•ä¸­çš„å­èœå•æ¡ç›®ä¸Šï¼Œæ‚¨ä¼šçœ‹åˆ°ä¸€ä¸ªå•æ¡ç›®å­èœå•å‡ºç°ï¼Œå…¶ä¸­åŒ…å«æˆ‘ä»¬çš„ç¬¬äºŒä¸ªæ“ä½œã€‚æ‚¨å¯ä»¥ç»§ç»­å‘è¿™ä¸ªå­èœå•æ·»åŠ æ¡ç›®ï¼Œä¸æ·»åŠ é¡¶çº§èœå•æ¡ç›®æ—¶çš„æ–¹å¼ç›¸åŒã€‚

![Figure48](Figure48.png)

> å›¾å››åå…«ï¼šæ–‡ä»¶èœå•ä¸­çš„åµŒå¥—å­èœå•ã€‚

æœ€åï¼Œæˆ‘ä»¬å°†ä¸º `QAction` æ·»åŠ ä¸€ä¸ªé”®ç›˜å¿«æ·é”®ã€‚æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨ `setKeySequence()` å¹¶ä¼ å…¥é”®ç›˜åºåˆ—æ¥å®šä¹‰é”®ç›˜å¿«æ·é”®ã€‚ä»»ä½•å·²å®šä¹‰çš„é”®ç›˜åºåˆ—éƒ½å°†æ˜¾ç¤ºåœ¨èœå•ä¸­ã€‚

![tips](tips.png)

> éšè—çš„å¿«æ·é”®
>
> è¯·æ³¨æ„ï¼Œé”®ç›˜å¿«æ·é”®ä¸`QAction` ç›¸å…³è”ï¼Œæ— è®º `QAction` æ˜¯å¦è¢«æ·»åŠ åˆ°èœå•æˆ–å·¥å…·æ ä¸­ï¼Œå®ƒéƒ½æœ‰æ•ˆã€‚

é”®åºåˆ—å¯ä»¥é€šè¿‡å¤šç§æ–¹å¼å®šä¹‰â€”â€”ä½œä¸ºæ–‡æœ¬ä¼ é€’ã€ä½¿ç”¨Qt å‘½åç©ºé—´ä¸­çš„é”®åï¼Œæˆ–è€…ä½¿ç”¨Qt å‘½åç©ºé—´ä¸­å®šä¹‰çš„é”®åºåˆ—ã€‚è¯·æ‚¨å°½å¯èƒ½ä½¿ç”¨åä¸€ç§æ–¹å¼ï¼Œä»¥ç¡®ä¿ç¬¦åˆæ“ä½œç³»ç»Ÿæ ‡å‡†ã€‚

ä»¥ä¸‹æ˜¯å®Œæˆåçš„ä»£ç ï¼Œæ˜¾ç¤ºäº†å·¥å…·æ æŒ‰é’®å’Œèœå•ã€‚

*Listing 45. basic/toolbars_and_menus_end.py*

```python
class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

        self.setWindowTitle("My App")

        label = QLabel("Hello!")
        # Qt å‘½åç©ºé—´æœ‰è®¸å¤šç”¨äºè‡ªå®šä¹‰æ§ä»¶çš„å±æ€§ã€‚å‚è§ï¼šhttp://doc.qt.io/qt-5/qt.html
        label.setAlignment(Qt.AlignmentFlag.AlignCenter)

        # è®¾ç½®çª—å£çš„ä¸­å¤®æ§ä»¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæ§ä»¶å°†æ‰©å±•ä»¥å æ®çª—å£ä¸­çš„æ‰€æœ‰ç©ºé—´ã€‚
        self.setCentralWidget(label)

        toolbar = QToolBar("My main toolbar")
        toolbar.setIconSize(QSize(16, 16))
        self.addToolBar(toolbar)

        button_action = QAction(
            QIcon(os.path.join(basedir, "bug.png")),
            "&Your button",
            self,
        )
        button_action.setStatusTip("This is your button")
        button_action.triggered.connect(self.onMyToolBarButtonClick)
        button_action.setCheckable(True)

        # æ‚¨å¯ä»¥ä½¿ç”¨é”®ç›˜åç§°è¾“å…¥å¿«æ·é”®ï¼Œä¾‹å¦‚Ctrl+p
        # Qt.å‘½åç©ºé—´æ ‡è¯†ç¬¦ï¼ˆä¾‹å¦‚ Qt.CTRL + Qt.Key_Pï¼‰
        # æˆ–ç³»ç»Ÿæ— å…³æ ‡è¯†ç¬¦ï¼ˆä¾‹å¦‚ QKeySequence.Printï¼‰
        button_action.setShortcut(QKeySequence("Ctrl+p"))
        toolbar.addAction(button_action)

        toolbar.addSeparator()

        button_action2 = QAction(
            QIcon(os.path.join(basedir, "bug.png")),
            "Your &button2",
            self,
        )
        button_action2.setStatusTip("This is your button2")
        button_action2.triggered.connect(self.onMyToolBarButtonClick)
        button_action2.setCheckable(True)
        toolbar.addAction(button_action)

        toolbar.addWidget(QLabel("Hello"))
        toolbar.addWidget(QCheckBox())
        self.setStatusBar(QStatusBar(self))

        menu = self.menuBar()
        
        file_menu = menu.addMenu("&File")
        file_menu.addAction(button_action)
        
        file_menu.addSeparator()
        
        file_submenu = file_menu.addMenu("Submenu")
        
        file_submenu.addAction(button_action2)
        
    def onMyToolBarButtonClick(self, s):
        print("click", s)
```

### èœå•ä¸å·¥å…·æ çš„ç»„ç»‡ç®¡ç†

å¦‚æœç”¨æˆ·æ— æ³•æ‰¾åˆ°åº”ç”¨ç¨‹åºçš„æ“ä½œï¼Œä»–ä»¬å°±æ— æ³•å……åˆ†å‘æŒ¥åº”ç”¨ç¨‹åºçš„å…¨éƒ¨åŠŸèƒ½ã€‚è®©æ“ä½œæ˜“äºå‘ç°æ˜¯åˆ›å»ºç”¨æˆ·å‹å¥½å‹åº”ç”¨ç¨‹åºçš„å…³é”®ã€‚ä¸€ä¸ªå¸¸è§çš„é”™è¯¯æ˜¯è¯•å›¾é€šè¿‡åœ¨åº”ç”¨ç¨‹åºçš„å„ä¸ªåœ°æ–¹æ·»åŠ æ“ä½œæ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç»“æœåè€Œè®©ç”¨æˆ·æ„Ÿåˆ°å›°æƒ‘å’Œä¸çŸ¥æ‰€æªã€‚

è¯·æ‚¨å°†å¸¸è§ä¸”å¿…è¦çš„æ“ä½œæ”¾åœ¨é¦–ä½ï¼Œç¡®ä¿å®ƒä»¬æ˜“äºæŸ¥æ‰¾å’Œå›å¿†ã€‚æƒ³æƒ³å¤§å¤šæ•°ç¼–è¾‘åº”ç”¨ç¨‹åºä¸­çš„â€œæ–‡ä»¶â€>â€œæ–°å»ºâ€é€‰é¡¹ã€‚å®ƒä½äºâ€œæ–‡ä»¶â€èœå•é¡¶éƒ¨ï¼Œå¹¶ç»‘å®šäº†ä¸€ä¸ªç®€å•çš„é”®ç›˜å¿«æ·é”® **Ctrl + N**ã€‚å¦‚æœ â€œæ–°å»ºæ–‡æ¡£â€¦â€ **éœ€è¦é€šè¿‡â€œæ–‡ä»¶â€>â€œå¸¸ç”¨æ“ä½œâ€>â€œæ–‡ä»¶æ“ä½œâ€>â€œå½“å‰æ–‡æ¡£â€>â€œæ–°å»ºâ€**æˆ–å¿«æ·é”® **Ctrl +Alt + J** æ‰èƒ½è®¿é—®ï¼Œç”¨æˆ·å°†éš¾ä»¥æ‰¾åˆ°å®ƒã€‚

![Special1](Special1.png)

> Qt Creator ä¸­çš„æ–‡ä»¶èœå•éƒ¨åˆ†ï¼Œè¯·æ³¨æ„å¸¸è§æ“ä½œä½äºé¡¶éƒ¨ï¼Œä¸å¸¸ç”¨çš„æ“ä½œåˆ™ä½äºä¸‹æ–¹ã€‚

å¦‚æœæ‚¨æŠŠâ€œæ–‡ä»¶â€>â€œä¿å­˜â€èœå•éšè—å¾—åƒè¿™æ ·ï¼Œæ‚¨çš„ç”¨æˆ·å°±æ›´ä¸å¯èƒ½ä¿å­˜ä»–ä»¬çš„ä½œå“ï¼Œè€Œæ›´æœ‰å¯èƒ½ä¸¢å¤±å®ƒä»¬â€”â€”è¿™æ˜¯å­—é¢æ„ä¹‰ä¸Šå’Œæ¯”å–»æ„ä¹‰ä¸Šçš„ï¼è¯·æ‚¨çœ‹çœ‹æ‚¨ç”µè„‘ä¸Šç°æœ‰çš„åº”ç”¨ç¨‹åºï¼Œæ¥è·å–çµæ„Ÿã€‚ä½†æ‚¨è¦ä¿æŒæ‰¹åˆ¤æ€§çœ¼å…‰ï¼Œå› ä¸ºå¸‚é¢ä¸Šå……æ–¥ç€å¤§é‡è®¾è®¡ç³Ÿç³•çš„è½¯ä»¶ã€‚

è¯·æ‚¨åœ¨èœå•å’Œå·¥å…·æ ä¸­ä½¿ç”¨é€»è¾‘åˆ†ç»„ï¼Œè¿™æ ·å¯ä»¥æ›´è½»æ¾åœ°æ‰¾åˆ°æ‰€éœ€å†…å®¹ã€‚åœ¨å°‘æ•°å‡ ä¸ªé€‰é¡¹ä¸­æ‰¾åˆ°æŸç‰©æ¯”åœ¨é•¿åˆ—è¡¨ä¸­æ›´å®¹æ˜“ã€‚

![Special2](Special2.png)

> Qt Designer ä¸­çš„åˆ†ç»„å·¥å…·æ 

é¿å…åœ¨å¤šä¸ªèœå•ä¸­é‡å¤ç›¸åŒæ“ä½œï¼Œå› ä¸ºè¿™ä¼šè®©å®ƒä»¬çš„ç”¨é€”å˜å¾—æ¨¡ç³Šâ€”â€”â€œè¿™äº›æ“ä½œæ˜¯ä¸æ˜¯åšåŒæ ·çš„äº‹æƒ…ï¼Ÿâ€â€”â€”å³ä½¿å®ƒä»¬çš„æ ‡ç­¾å®Œå…¨ç›¸åŒã€‚æœ€åï¼Œä¸è¦è¯•å›¾é€šè¿‡åŠ¨æ€éšè—/ç§»é™¤èœå•é¡¹æ¥ç®€åŒ–èœå•ã€‚è¿™ä¼šå¯¼è‡´ç”¨æˆ·åœ¨å¯»æ‰¾ä¸å­˜åœ¨çš„é€‰é¡¹æ—¶æ„Ÿåˆ°å›°æƒ‘â€œâ€¦â€¦åˆšæ‰è¿˜åœ¨è¿™é‡Œâ€ã€‚ä¸åŒçŠ¶æ€åº”é€šè¿‡ç¦ç”¨èœå•é¡¹ã€ä½¿ç”¨ç‹¬ç«‹çª—å£ã€æ¸…æ™°åŒºåˆ†çš„ç•Œé¢æ¨¡å¼æˆ–å¯¹è¯æ¡†æ¥è¡¨ç¤ºã€‚

---

**è¯·**å°†èœå•æŒ‰å±‚æ¬¡ç»“æ„ç»„ç»‡ï¼Œå¹¶é€»è¾‘åœ°åˆ†ç»„æ“ä½œã€‚  

**è¯·**å°†æœ€å¸¸ç”¨çš„åŠŸèƒ½å¤åˆ¶åˆ°å·¥å…·æ ä¸Šã€‚

**è¯·**åœ¨èœå•ä¸­ç¦ç”¨æ— æ³•ä½¿ç”¨çš„é¡¹ç›®ã€‚  

**è¯·å‹¿**å°†åŒä¸€æ“ä½œæ·»åŠ åˆ°å¤šä¸ªèœå•ä¸­ã€‚  

**è¯·å‹¿**å°†æ‰€æœ‰èœå•æ“ä½œéƒ½æ·»åŠ åˆ°å·¥å…·æ ä¸Šã€‚  

**è¯·å‹¿**åœ¨ä¸åŒä½ç½®ä½¿ç”¨ç›¸åŒæ“ä½œçš„ä¸åŒåç§°æˆ–å›¾æ ‡ã€‚  

**è¯·å‹¿**ä»èœå•ä¸­åˆ é™¤é¡¹ç›®â€”â€”è€Œæ˜¯ç¦ç”¨å®ƒä»¬ã€‚

## 8. å¯¹è¯æ¡†

å¯¹è¯æ¡†æ˜¯å›¾å½¢ç”¨æˆ·ç•Œé¢ä¸­çš„æœ‰ç”¨ç»„ä»¶ï¼Œå¯è®©æ‚¨ä¸ç”¨æˆ·è¿›è¡Œäº¤æµï¼ˆå› æ­¤å¾—åâ€œå¯¹è¯æ¡†â€ï¼‰ã€‚å®ƒä»¬é€šå¸¸ç”¨äºæ–‡ä»¶æ‰“å¼€/ä¿å­˜ã€è®¾ç½®ã€é¦–é€‰é¡¹æˆ–åº”ç”¨ç¨‹åºä¸»ç”¨æˆ·ç•Œé¢ä¸­æ— æ³•å®¹çº³çš„åŠŸèƒ½ã€‚å®ƒä»¬æ˜¯å°å‹æ¨¡æ€ï¼ˆæˆ–é˜»å¡ï¼‰çª—å£ï¼Œä¼šå§‹ç»ˆæ˜¾ç¤ºåœ¨ä¸»åº”ç”¨ç¨‹åºçª—å£å‰ï¼Œç›´åˆ°è¢«å…³é—­ã€‚Qtå®é™…ä¸Šä¸ºæœ€å¸¸è§çš„ä½¿ç”¨åœºæ™¯æä¾›äº†å¤šç§â€œç‰¹æ®Šâ€å¯¹è¯æ¡†ï¼Œä½¿æ‚¨èƒ½å¤Ÿæä¾›å¹³å°åŸç”Ÿçš„ç”¨æˆ·ä½“éªŒï¼Œä»è€Œæå‡ç”¨æˆ·ä½“éªŒã€‚

![Figure49](Figure49.png)

> å›¾å››åä¹ï¼šæ ‡å‡†å›¾å½¢ç”¨æˆ·ç•Œé¢åŠŸèƒ½â€”â€”æœç´¢å¯¹è¯æ¡†

![Figure50](Figure50.png)

> å›¾äº”åï¼šæ ‡å‡†å›¾å½¢ç”¨æˆ·ç•Œé¢åŠŸèƒ½â€”â€”æ–‡ä»¶æ‰“å¼€å¯¹è¯æ¡†

åœ¨ Qt ä¸­ï¼Œå¯¹è¯æ¡†ç”± `QDialog` ç±»å¤„ç†ã€‚è¦åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è¯æ¡†åªéœ€åˆ›å»ºä¸€ä¸ª `QDialog` ç±»å‹çš„å¯¹è±¡ï¼Œå¹¶å°†å…¶çˆ¶æ§ä»¶ï¼ˆä¾‹å¦‚`QMainWindow`ï¼‰ä½œä¸ºå…¶çˆ¶å¯¹è±¡ä¼ é€’ç»™è¯¥å¯¹è±¡å³å¯ã€‚

è®©æˆ‘ä»¬åˆ›å»ºè‡ªå·±çš„ `QDialog`ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä»ä¸€ä¸ªç®€å•çš„æ¡†æ¶åº”ç”¨ç¨‹åºå¼€å§‹ï¼Œè¯¥åº”ç”¨ç¨‹åºæœ‰ä¸€ä¸ªæŒ‰é’®ï¼Œè¯¥æŒ‰é’®ä¸æ§½æ–¹æ³•ç›¸è¿ã€‚

*Listing 46. basic/dialogs_start.py*

```python
import sys

from PyQt6.QtWidgets import QApplication, QMainWindow, QPushButton

class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

        self.setWindowTitle("My App")

        button = QPushButton("Press me for a dialog!")
        button.clicked.connect(self.button_clicked)
        self.setCentralWidget(button)
        
    def button_clicked(self, s):
        print("click", s)
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

åœ¨æ§½ `button_clicked`ï¼ˆæ¥æ”¶æŒ‰é’®æŒ‰ä¸‹çš„ä¿¡å·ï¼‰ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºå¯¹è¯æ¡†å®ä¾‹ï¼Œå¹¶å°†æˆ‘ä»¬çš„ `QMainWindow` å®ä¾‹ä½œä¸ºçˆ¶çª—å£ä¼ é€’ã€‚è¿™å°†ä½¿å¯¹è¯æ¡†æˆä¸º `QMainWindow` çš„æ¨¡æ€çª—å£ã€‚è¿™æ„å‘³ç€å¯¹è¯æ¡†å°†å®Œå…¨é˜»æ­¢ä¸çˆ¶çª—å£çš„äº¤äº’ã€‚

*Listing 47. basic/dialogs_1.py*

```python
import sys

from PyQt6.QtWidgets import (
    QApplication,
    QDialog,
    QMainWindow,
    QPushButton,
)

class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

        self.setWindowTitle("My App")

        button = QPushButton("Press me for a dialog!")
        button.clicked.connect(self.button_clicked)
        self.setCentralWidget(button)
        
    def button_clicked(self, s):
        print("click", s)
        
        dlg = QDialog(self)
        dlg.setWindowTitle("?")
        dlg.exec()
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** ç‚¹å‡»æŒ‰é’®åï¼Œæ‚¨å°†çœ‹åˆ°ä¸€ä¸ªç©ºçš„å¯¹è¯æ¡†å¼¹å‡ºã€‚

ä¸€æ—¦åˆ›å»ºäº†å¯¹è¯æ¡†ï¼Œæˆ‘ä»¬ä½¿ç”¨ `exec()` å‡½æ•°å¯åŠ¨å®ƒâ€”â€”å°±åƒæˆ‘ä»¬ä¹‹å‰ä½¿ç”¨ `QApplication` åˆ›å»ºåº”ç”¨ç¨‹åºçš„ä¸»äº‹ä»¶å¾ªç¯ä¸€æ ·ã€‚è¿™å¹¶éå·§åˆï¼šå½“æ‚¨æ‰§è¡Œ `QDialog` æ—¶ï¼Œä¼šä¸ºå¯¹è¯æ¡†ä¸“é—¨åˆ›å»ºä¸€ä¸ªå…¨æ–°çš„äº‹ä»¶å¾ªç¯ã€‚

![tips](tips.png)

> ä¸€ä¸ªäº‹ä»¶å¾ªç¯ç»Ÿé¢†ä¸€åˆ‡
>
> è¿˜è®°å¾—æˆ‘æåˆ°è¿‡ï¼Œä»»ä½•æ—¶å€™åªèƒ½æœ‰ä¸€ä¸ª Qt äº‹ä»¶å¾ªç¯åœ¨è¿è¡Œå—ï¼Ÿæˆ‘æ˜¯è®¤çœŸçš„ï¼`QDialog` ä¼šå®Œå…¨é˜»å¡ä½ çš„åº”ç”¨ç¨‹åºæ‰§è¡Œã€‚ä¸è¦åœ¨å¯åŠ¨å¯¹è¯æ¡†çš„åŒæ—¶ï¼Œè¿˜æœŸæœ›åº”ç”¨ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†ç»§ç»­è¿è¡Œã€‚
>
> æˆ‘ä»¬ç¨åå°†æ¢è®¨å¦‚ä½•åˆ©ç”¨å¤šçº¿ç¨‹æŠ€æœ¯æ¥è§£å†³è¿™ä¸€éš¾é¢˜ã€‚

![Figure51](Figure51.png)

> å›¾äº”åä¸€ï¼šæˆ‘ä»¬çš„ç©ºå¯¹è¯æ¡†è¦†ç›–åœ¨çª—å£ä¸Šã€‚

å°±åƒæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªçª—å£ä¸€æ ·ï¼Œè¿™ä¸ªçª—å£ä¹Ÿä¸å¤ªæœ‰è¶£ã€‚è®©æˆ‘ä»¬é€šè¿‡æ·»åŠ ä¸€ä¸ªå¯¹è¯æ¡†æ ‡é¢˜å’Œä¸€ç»„â€œç¡®å®šâ€å’Œâ€œå–æ¶ˆâ€æŒ‰é’®æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥æ¥å—æˆ–æ‹’ç»è¯¥æ¨¡æ€çª—å£ã€‚

è¦è‡ªå®šä¹‰ `QDialog`ï¼Œæˆ‘ä»¬å¯ä»¥ç»§æ‰¿å®ƒã€‚

*Listing 48. basic/dialogs_2a.py*

```python
class CustomDialog(QDialog):
    def __init__(self):
        super().__init__()

        self.setWindowTitle("HELLO!")
        
        buttons = (
            QDialogButtonBox.StandardButton.Ok
            | QDialogButtonBox.StandardButton.Cancel
        )
        
        self.buttonBox = QDialogButtonBox(buttons)
        self.buttonBox.accepted.connect(self.accept)
        self.buttonBox.rejected.connect(self.reject)
        
        self.layout = QVBoxLayout()
        message = QLabel("Something happened, is that OK?")
        self.layout.addWidget(message)
        self.layout.addWidget(self.buttonBox)
        self.setLayout(self.layout)
```

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº† `QDialog` çš„å­ç±»ï¼Œå¹¶å°†å…¶å‘½åä¸º `CustomDialog` ã€‚å¯¹äº `QMainWindow`ï¼Œæˆ‘ä»¬åœ¨ç±»ä¸­çš„ `__init__` å—ä¸­åº”ç”¨è‡ªå®šä¹‰è®¾ç½®ï¼Œä»¥ä¾¿åœ¨å¯¹è±¡åˆ›å»ºæ—¶åº”ç”¨è¿™äº›è‡ªå®šä¹‰è®¾ç½®ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨ `.setWindowTitle()` ä¸º `QDialog` è®¾ç½®æ ‡é¢˜ï¼Œä¸æˆ‘ä»¬ä¸ºä¸»çª—å£è®¾ç½®æ ‡é¢˜çš„æ–¹å¼å®Œå…¨ç›¸åŒã€‚

ä¸‹ä¸€æ®µä»£ç æ¶‰åŠåˆ›å»ºå’Œæ˜¾ç¤ºå¯¹è¯æ¡†æŒ‰é’®ã€‚è¿™å¯èƒ½æ¯”æ‚¨é¢„æœŸçš„è¦å¤æ‚ä¸€äº›ã€‚ç„¶è€Œï¼Œè¿™æ˜¯ç”±äºQtåœ¨ä¸åŒå¹³å°ä¸Šå¤„ç†å¯¹è¯æ¡†æŒ‰é’®ä½ç½®æ—¶å…·æœ‰çµæ´»æ€§ã€‚

![caution](caution.png)

> è½»æ¾è§£å†³ï¼Ÿ
>
> å½“ç„¶ï¼Œæ‚¨å¯ä»¥é€‰æ‹©å¿½ç•¥è¿™ä¸€ç‚¹ï¼Œä½¿ç”¨å¸ƒå±€ä¸­çš„æ ‡å‡† `QButton`ï¼Œä½†æœ¬æ–‡æ‰€è¿°çš„æ–¹æ³•å¯ç¡®ä¿å¯¹è¯æ¡†éµå¾ªä¸»æœºæ¡Œé¢æ ‡å‡†ï¼ˆä¾‹å¦‚â€œç¡®å®šâ€æŒ‰é’®ä½äºå·¦ä¾§è€Œéå³ä¾§ï¼‰ã€‚éšæ„æ›´æ”¹è¿™äº›è¡Œä¸ºå¯èƒ½ä¼šè®©ç”¨æˆ·æ„Ÿåˆ°æå…¶çƒ¦èºï¼Œå› æ­¤æˆ‘ä¸å»ºè®®è¿™æ ·åšã€‚

åˆ›å»ºå¯¹è¯æ¡†æŒ‰é’®æ¡†çš„ç¬¬ä¸€æ­¥æ˜¯ä½¿ç”¨ `QDialogButtonBox` çš„å‘½åç©ºé—´å±æ€§å®šä¹‰è¦æ˜¾ç¤ºçš„æŒ‰é’®ã€‚å¯ç”¨çš„æŒ‰é’®å®Œæ•´åˆ—è¡¨å¦‚ä¸‹ï¼š

*Table 1. `QDialogButtonBox` available button types.*

| æŒ‰é”®ç±»å‹                           |
| ---------------------------------- |
| `QDialogButtonBox.Ok`              |
| `QDialogButtonBox.Open`            |
| `QDialogButtonBox.Save`            |
| `QDialogButtonBox.Cancel`          |
| `QDialogButtonBox.Close`           |
| `QDialogButtonBox.Discard`         |
| `QDialogButtonBox.Apply`           |
| `QDialogButtonBox.Reset`           |
| `QDialogButtonBox.RestoreDefaults` |
| `QDialogButtonBox.Help`            |
| `QDialogButtonBox.SaveAll`         |
| `QDialogButtonBox.Yes`             |
| `QDialogButtonBox.YesToAll`        |
| `QDialogButtonBox.No`              |
| `QDialogButtonBox.NoToAll`         |
| `QDialogButtonBox.Abort`           |
| `QDialogButtonBox.Retry`           |
| `QDialogButtonBox.Ignore`          |
| `QDialogButtonBox.NoButton`        |

è¿™äº›åº”è¯¥è¶³ä»¥åˆ›å»ºä»»ä½•ä½ èƒ½æƒ³åˆ°çš„å¯¹è¯æ¡†ã€‚æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨ç®¡é“ç¬¦ (|) å°†å¤šä¸ªæŒ‰é’®è¿›è¡Œæˆ–è¿ç®—æ¥æ„å»ºå¤šæŒ‰é’®è¡Œã€‚Qtä¼šæ ¹æ®å¹³å°æ ‡å‡†è‡ªåŠ¨å¤„ç†æŒ‰é’®çš„é¡ºåºã€‚ä¾‹å¦‚ï¼Œè¦æ˜¾ç¤ºâ€œç¡®å®šâ€å’Œâ€œå–æ¶ˆâ€æŒ‰é’®ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ï¼š

```python
buttons = QDialogButtonBox.Ok | QDialogButtonBox.Cancel
```

å˜é‡æŒ‰é’®ç°åœ¨åŒ…å«ä¸€ä¸ªæ•´æ•°å€¼ï¼Œä»£è¡¨è¿™ä¸¤ä¸ªæŒ‰é’®ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¿…é¡»åˆ›å»ºä¸€ä¸ª QDialogButtonBox å®ä¾‹æ¥å®¹çº³è¿™äº›æŒ‰é’®ã€‚æŒ‰é’®çš„æ˜¾ç¤ºæ ‡å¿—ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’ã€‚

ä¸ºäº†ä½¿æŒ‰é’®äº§ç”Ÿæ•ˆæœï¼Œæ‚¨å¿…é¡»å°†æ­£ç¡®çš„ `QDialogButtonBox` ä¿¡å·è¿æ¥åˆ°å¯¹è¯æ¡†ä¸Šçš„æ§½ã€‚åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°† `QDialogButtonBox` çš„ `.accepted` å’Œ `.rejected` ä¿¡å·è¿æ¥åˆ° `QDialog` å­ç±»çš„`.accept()` å’Œ `.reject()` å¤„ç†ç¨‹åºã€‚

æœ€åï¼Œä¸ºäº†ä½¿ `QDialogButtonBox` å‡ºç°åœ¨æˆ‘ä»¬çš„å¯¹è¯æ¡†ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»å°†å…¶æ·»åŠ åˆ°å¯¹è¯æ¡†å¸ƒå±€ä¸­ã€‚å› æ­¤ï¼Œå¯¹äºä¸»çª—å£ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¸ƒå±€ï¼Œå¹¶å°†æˆ‘ä»¬çš„ `QDialogButtonBox`  æ·»åŠ åˆ°å…¶ä¸­ï¼ˆ`QDialogButtonBox` æ˜¯ä¸€ä¸ªæ§ä»¶ï¼‰ï¼Œç„¶åå°†è¯¥å¸ƒå±€è®¾ç½®åˆ°æˆ‘ä»¬çš„å¯¹è¯æ¡†ä¸Šã€‚

æœ€ç»ˆï¼Œæˆ‘ä»¬åœ¨ `MainWindow.button_clicked` æ§½ä¸­å¯åŠ¨ `CustomDialog`ã€‚

*Listing 49. basic/dialogs_2a.py*

```python
    def button_clicked(self, s):
        print("click", s)
    
        dlg = CustomDialog()
        if dlg.exec():
            print("Success!")
        else:
            print("Cancel!")
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** ç‚¹å‡»ä»¥å¯åŠ¨å¯¹è¯æ¡†ï¼Œæ‚¨å°†çœ‹åˆ°ä¸€ä¸ªåŒ…å«æŒ‰é’®çš„å¯¹è¯æ¡†ã€‚

![Figure52](Figure52.png)

> å›¾äº”åäºŒï¼šæˆ‘ä»¬ä¸æ ‡ç­¾å’ŒæŒ‰é’®çš„å¯¹è¯æ¡†ã€‚

å½“æ‚¨ç‚¹å‡»æŒ‰é’®ä»¥å¯åŠ¨å¯¹è¯æ¡†æ—¶ï¼Œå¯èƒ½ä¼šå‘ç°å®ƒå‡ºç°åœ¨çˆ¶çª—å£ä¹‹å¤–â€”â€”é€šå¸¸ä½äºå±å¹•ä¸­å¤®ã€‚é€šå¸¸æ‚¨å¸Œæœ›å¯¹è¯æ¡†å‡ºç°åœ¨å…¶å¯åŠ¨çª—å£ä¹‹ä¸Šï¼Œä»¥ä¾¿ç”¨æˆ·æ›´å®¹æ˜“æ‰¾åˆ°ã€‚è¦å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºå¯¹è¯æ¡†æŒ‡å®šä¸€ä¸ªçˆ¶çª—å£ã€‚å¦‚æœæˆ‘ä»¬å°†ä¸»çª—å£ä½œä¸º**çˆ¶çª—å£**ä¼ é€’ç»™ Qtï¼ŒQt ä¼šå°†æ–°å¯¹è¯æ¡†çš„ä½ç½®è°ƒæ•´ä¸ºå¯¹è¯æ¡†çš„ä¸­å¿ƒä¸çª—å£çš„ä¸­å¿ƒå¯¹é½ã€‚

æˆ‘ä»¬å¯ä»¥ä¿®æ”¹æˆ‘ä»¬çš„ `CustomDialog` ç±»ï¼Œä½¿å…¶æ¥å—ä¸€ä¸ª `parent` å‚æ•°ã€‚

*Listing 50. basic/dialogs_2b.py*

```python
class CustomDialog(QDialog):
    def __init__(self, parent=None): #1
        super().__init__(parent)

        self.setWindowTitle("HELLO!")
        
        buttons = (
            QDialogButtonBox.StandardButton.Ok
            | QDialogButtonBox.StandardButton.Cancel
        )
        
        self.buttonBox = QDialogButtonBox(buttons)
        self.buttonBox.accepted.connect(self.accept)
        self.buttonBox.rejected.connect(self.reject)
        
        self.layout = QVBoxLayout()
        message = QLabel("Something happened, is that OK?")
        self.layout.addWidget(message)
        self.layout.addWidget(self.buttonBox)
        self.setLayout(self.layout)
```

> 1. æˆ‘ä»¬è®¾ç½®é»˜è®¤å€¼ä¸º `None`ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥çœç•¥çˆ¶å¯¹è±¡ã€‚

ç„¶åï¼Œå½“æˆ‘ä»¬åˆ›å»ºè‡ªå®šä¹‰å¯¹è¯æ¡†çš„å®ä¾‹æ—¶ï¼Œå¯ä»¥å°†ä¸»çª—å£ä½œä¸ºå‚æ•°ä¼ é€’è¿›å»ã€‚åœ¨æˆ‘ä»¬çš„ `button_clicked` æ–¹æ³•ä¸­ï¼Œ`self` å°±æ˜¯æˆ‘ä»¬çš„ä¸»çª—å£å¯¹è±¡ã€‚

*Listing 51. basic/dialogs_2b.py*

```python
    def button_clicked(self, s):
        print("click", s)
        
        dlg = CustomDialog(self)
        if dlg.exec():
            print("Success!")
        else:
            print("Cancel!")
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** ç‚¹å‡»ä»¥å¯åŠ¨å¯¹è¯æ¡†ï¼Œæ‚¨åº”è¯¥ä¼šåœ¨çˆ¶çª—å£æ­£ä¸­å¤®çœ‹åˆ°å¯¹è¯æ¡†å¼¹å‡ºã€‚

![Figure53](Figure53.png)

> å›¾äº”åä¸‰ï¼šæˆ‘ä»¬çš„å¯¹è¯æ¡†ä½äºçˆ¶çª—å£çš„ä¸­å¤®ã€‚

æ­å–œï¼æ‚¨å·²æˆåŠŸåˆ›å»ºäº†ç¬¬ä¸€ä¸ªå¯¹è¯æ¡†ã€‚å½“ç„¶ï¼Œæ‚¨å¯ä»¥ç»§ç»­å‘å¯¹è¯æ¡†ä¸­æ·»åŠ ä»»ä½•å…¶ä»–å†…å®¹ã€‚åªéœ€åƒå¾€å¸¸ä¸€æ ·å°†å…¶æ’å…¥åˆ°å¸ƒå±€ä¸­å³å¯ã€‚

å¤§å¤šæ•°åº”ç”¨ç¨‹åºéƒ½éœ€è¦ä¸€äº›å¸¸è§çš„å¯¹è¯æ¡†ã€‚è™½ç„¶æ‚¨å¯ä»¥è‡ªè¡Œæ„å»ºè¿™äº›å¯¹è¯æ¡†ï¼Œä½†Qtä¹Ÿæä¾›äº†è®¸å¤šå†…ç½®å¯¹è¯æ¡†ä¾›ä½ ä½¿ç”¨ã€‚è¿™äº›å¯¹è¯æ¡†ä¸ºæ‚¨å¤„ç†äº†å¤§é‡å·¥ä½œï¼Œè®¾è®¡åˆç†ä¸”ç¬¦åˆå¹³å°æ ‡å‡†ã€‚

### ä½¿ç”¨ `QMessageBox` æ˜¾ç¤ºæ¶ˆæ¯å¯¹è¯æ¡†

æˆ‘ä»¬å°†é¦–å…ˆä»‹ç»çš„å†…ç½®å¯¹è¯æ¡†ç±»å‹æ˜¯ `QMessageBox`ã€‚å®ƒå¯ç”¨äºåˆ›å»ºä¿¡æ¯ã€è­¦å‘Šã€å…³äºæˆ–é—®é¢˜å¯¹è¯æ¡†â€”â€”ç±»ä¼¼äºæˆ‘ä»¬æ‰‹åŠ¨åˆ›å»ºçš„å¯¹è¯æ¡†ã€‚ä¸‹é¢çš„ç¤ºä¾‹åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„ `QMessageBox` å¹¶æ˜¾ç¤ºå®ƒã€‚

*Listing 52. basic/dialogs_3.py*

```python
    def button_clicked(self, s):
        dlg = QMessageBox(self)
        dlg.setWindowTitle("I have a question!")
        dlg.setText("This is a simple dialog")
        button = dlg.exec()
        
        # æŸ¥æ‰¾æŒ‰é’®æšä¸¾é¡¹ä»¥è·å–ç»“æœã€‚
        button = QMessageBox.StandardButton(button)
        
        if button == QMessageBox.StandardButton.Ok:
            print("OK!")
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ‚¨å°†çœ‹åˆ°ä¸€ä¸ªå¸¦æœ‰â€œç¡®å®šâ€æŒ‰é’®çš„ç®€å•å¯¹è¯æ¡†ã€‚

![Figure54](Figure54.png)

> å›¾äº”åå››ï¼šä¸€ä¸ª `QMessageBox` å¯¹è¯æ¡†ã€‚

ä¸æˆ‘ä»¬ä¹‹å‰è®¨è®ºçš„å¯¹è¯æ¡†æŒ‰é’®æ¡†ç±»ä¼¼ï¼Œ `QMessageBox` ä¸Šæ˜¾ç¤ºçš„æŒ‰é’®ä¹Ÿé€šè¿‡ä¸€ç»„å¸¸é‡è¿›è¡Œé…ç½®ï¼Œè¿™äº›å¸¸é‡å¯ä»¥ä½¿ç”¨ `|` ç¬¦å·ç»„åˆä»¥æ˜¾ç¤ºå¤šä¸ªæŒ‰é’®ã€‚å¯ç”¨æŒ‰é’®ç±»å‹çš„å®Œæ•´åˆ—è¡¨å¦‚ä¸‹æ‰€ç¤ºï¼š

*Table 2. `QMessageBox` available button types.*

| æŒ‰é”®ç±»å‹                      |
| ----------------------------- |
| `QMessageBox.Ok`              |
| `QMessageBox.Open`            |
| `QMessageBox.Save`            |
| `QMessageBox.Cancel`          |
| `QMessageBox.Close`           |
| `QMessageBox.Discard`         |
| `QMessageBox.Apply`           |
| `QMessageBox.Reset`           |
| `QMessageBox.RestoreDefaults` |
| `QMessageBox.Help`            |
| `QMessageBox.SaveAll`         |
| `QMessageBox.Yes`             |
| `QMessageBox.YesToAll`        |
| `QMessageBox.No`              |
| `QMessageBox.NoToAll`         |
| `QMessageBox.Abort`           |
| `QMessageBox.Retry`           |
| `QMessageBox.Ignore`          |
| `QMessageBox.NoButton`        |

æ‚¨è¿˜å¯ä»¥é€šè¿‡è®¾ç½®ä»¥ä¸‹å…¶ä¸­ä¸€ä¸ªå›¾æ ‡æ¥è°ƒæ•´å¯¹è¯æ¡†ä¸­æ˜¾ç¤ºçš„å›¾æ ‡ï¼š

*Table 3. QMessageBox icon constants.*

| å›¾æ ‡çŠ¶æ€                  | Description                |
| ------------------------- | -------------------------- |
| `QMessageBox.NoIcon`      | æ¶ˆæ¯æ¡†æ²¡æœ‰å›¾æ ‡             |
| `QMessageBox.Question`    | è¿™æ¡æ¶ˆæ¯æ˜¯åœ¨æé—®           |
| `QMessageBox.Information` | è¯¥ä¿¡æ¯ä»…ä¾›å‚è€ƒ             |
| `QMessageBox.Warning`     | è¯¥æ¶ˆæ¯ä¸ºè­¦å‘Šä¿¡æ¯           |
| `QMessageBox.Critical`    | è¯¥æ¶ˆæ¯è¡¨æ˜å­˜åœ¨ä¸€ä¸ªä¸¥é‡é—®é¢˜ |

ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç åˆ›å»ºä¸€ä¸ªå¸¦æœ‰â€œ**æ˜¯**â€å’Œâ€œ**å¦**â€æŒ‰é’®çš„å¯¹è¯æ¡†ã€‚

*Listing 53. basic/dialogs_4.py*

```python
from PyQt6.QtWidgets import (
    QApplication,
    QDialog,
    QMainWindow,
    QMessageBox,
    QPushButton,
)

class MainWindow(QMainWindow):
    # __init__ æ–¹æ³•å·²çœç•¥ï¼Œä»¥æé«˜å¯è¯»æ€§
    def button_clicked(self, s):
        dlg = QMessageBox(self)
        dlg.setWindowTitle("I have a question!")
        dlg.setText("This is a question dialog")
        dlg.setStandardButtons(
            QMessageBox.StandardButton.Yes
            | QMessageBox.StandardButton.No
        )
        dlg.setIcon(QMessageBox.Icon.Question)
        button = dlg.exec()
        
        # æŸ¥æ‰¾æŒ‰é’®æšä¸¾é¡¹ä»¥è·å–ç»“æœ
        button = QMessageBox.StandardButton(button)
        
        if button == QMessageBox.StandardButton.Yes:
            print("Yes!")
        else:
            print("No!")
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ‚¨å°†çœ‹åˆ°ä¸€ä¸ªå¸¦æœ‰â€œæ˜¯â€å’Œâ€œå¦â€æŒ‰é’®çš„å¯¹è¯æ¡†ã€‚

![Figure55](Figure55.png)

> å›¾äº”åäº”ï¼šä½¿ç”¨ `QMessageBox` åˆ›å»ºçš„å¯¹è¯æ¡†ã€‚

### æ ‡å‡†çš„ `QMessageBox` å¯¹è¯æ¡†

ä¸ºäº†è¿›ä¸€æ­¥ç®€åŒ–æ“ä½œï¼Œ`QMessageBox` è¿˜æä¾›äº†ä¸€ç³»åˆ—é™æ€æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•å¯ç”¨äºç›´æ¥æ˜¾ç¤ºæ­¤ç±»æ¶ˆæ¯å¯¹è¯æ¡†ï¼Œè€Œæ— éœ€å…ˆåˆ›å»º `QMessageBox` å®ä¾‹ã€‚è¿™äº›æ–¹æ³•å¦‚ä¸‹æ‰€ç¤ºï¼š

```python
QMessageBox.about(parent, title, message)
QMessageBox.critical(parent, title, message)
QMessageBox.information(parent, title, message)
QMessageBox.question(parent, title, message)
QMessageBox.warning(parent, title, message)
```

`parent` å‚æ•°æ˜¯å¯¹è¯æ¡†æ‰€å±çš„çˆ¶çª—å£ã€‚å¦‚æœæ‚¨æ˜¯ä»ä¸»çª—å£å¯åŠ¨å¯¹è¯æ¡†ï¼Œå¯ä»¥ä½¿ç”¨ `self` å¼•ç”¨ä¸»çª—å£å¯¹è±¡ã€‚ä»¥ä¸‹ç¤ºä¾‹åˆ›å»ºä¸€ä¸ªé—®é¢˜å¯¹è¯æ¡†ï¼Œä¸ä¹‹å‰ç¤ºä¾‹ç±»ä¼¼ï¼ŒåŒ…å«â€œæ˜¯â€å’Œâ€œå¦â€æŒ‰é’®ã€‚

*Listing 54. basic/dialogs_5.py*

```python
    def button_clicked(self, s):
        button = QMessageBox.question(
            self, "Question dialog", "The longer message"
        )
        
        if button == QMessageBox.StandardButton.Yes:
            print("Yes!")
        else:
            print("No!")
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ‚¨ä¼šçœ‹åˆ°ç›¸åŒçš„ç»“æœï¼Œè¿™æ¬¡ä½¿ç”¨çš„æ˜¯å†…ç½®çš„ `.question()`æ–¹æ³•ã€‚

![Figure56](Figure56.png)

> å›¾äº”åå…­ï¼šå†…ç½®çš„æé—®å¯¹è¯æ¡†

è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ç°åœ¨ä¸å†è°ƒç”¨ `exec()` å‡½æ•°ï¼Œè€Œæ˜¯ç›´æ¥è°ƒç”¨å¯¹è¯æ¡†æ–¹æ³•ï¼Œå¯¹è¯æ¡†ä¾¿ä¼šè¢«åˆ›å»ºã€‚æ¯ä¸ªæ–¹æ³•çš„è¿”å›å€¼éƒ½æ˜¯è¢«æŒ‰ä¸‹çš„æŒ‰é’®ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†è¿”å›å€¼ä¸æ ‡å‡†æŒ‰é’®å¸¸é‡è¿›è¡Œæ¯”è¾ƒï¼Œæ¥æ£€æµ‹è¢«æŒ‰ä¸‹çš„æŒ‰é’®ã€‚

å››ä¸ªä¿¡æ¯ã€é—®é¢˜ã€è­¦å‘Šå’Œå…³é”®æ–¹æ³•ä¹Ÿæ”¯æŒå¯é€‰çš„æŒ‰é’®å’Œé»˜è®¤æŒ‰é’®å‚æ•°ï¼Œè¿™äº›å‚æ•°å¯ç”¨äºè°ƒæ•´å¯¹è¯æ¡†ä¸­æ˜¾ç¤ºçš„æŒ‰é’®å¹¶é»˜è®¤é€‰æ‹©å…¶ä¸­ä¸€ä¸ªã€‚ä¸è¿‡é€šå¸¸æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½å¹¶ä¸å¸Œæœ›æ›´æ”¹é»˜è®¤è®¾ç½®ã€‚

*Listing 55. basic/dialogs_6.py*

```python
    def button_clicked(self, s):
        button = QMessageBox.critical(
            self,
            "Oh dear!",
            "Something went very wrong.",
            buttons=QMessageBox.StandardButton.Discard
            | QMessageBox.StandardButton.NoToAll
            | QMessageBox.StandardButton.Ignore,
            defaultButton=QMessageBox.StandardButton.Discard,
        )
        
        if button == QMessageBox.StandardButton.Discard:
            print("Discard!")
        elif button == QMessageBox.StandardButton.NoToAll:
            print("No to all!")
        else:
            print("Ignore!")
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ‚¨å°†çœ‹åˆ°ä¸€ä¸ªå¸¦æœ‰è‡ªå®šä¹‰æŒ‰é’®çš„ç¡®è®¤å¯¹è¯æ¡†

![Figure57](Figure57.png)

> å›¾äº”åä¸ƒï¼šä¸¥é‡é”™è¯¯ï¼è¿™æ˜¯ä¸€ä¸ªç³Ÿç³•çš„å¯¹è¯æ¡†ã€‚

### è¯·æ±‚å•ä¸ªå€¼

æœ‰æ—¶æ‚¨ä¼šéœ€è¦ä»ç”¨æˆ·è·å–å•ä¸ªå‚æ•°ï¼Œå¹¶å¸Œæœ›èƒ½å¤Ÿæ˜¾ç¤ºä¸€ä¸ªç®€å•çš„è¾“å…¥å¯¹è¯æ¡†æ¥è·å–è¯¥å‚æ•°ã€‚å¯¹äºæ­¤ç”¨ä¾‹ï¼Œ`PyQt6` æä¾›äº†`QInputDialog` ç±»ã€‚è¯¥ç±»å¯ç”¨äºè·å–ä¸åŒç±»å‹çš„æ•°æ®ï¼ŒåŒæ—¶è¿˜å¯ä»¥å¯¹ç”¨æˆ·è¾“å…¥çš„å€¼è®¾ç½®é™åˆ¶ã€‚

é™æ€æ–¹æ³•éƒ½æ¥å—ä¸€ä¸ªçˆ¶æ§ä»¶çš„çˆ¶å‚æ•°ï¼ˆé€šå¸¸ä¸º `self` ï¼‰ã€ä¸€ä¸ªå¯¹è¯æ¡†çª—å£æ ‡é¢˜çš„æ ‡é¢˜å‚æ•°ä»¥åŠä¸€ä¸ªæ˜¾ç¤ºåœ¨è¾“å…¥æ¡†æ—è¾¹çš„æ ‡ç­¾ï¼Œä»¥åŠå…¶ä»–ç±»å‹ç‰¹å®šçš„æ§ä»¶ã€‚è°ƒç”¨è¿™äº›æ–¹æ³•æ—¶ï¼Œå®ƒä»¬ä¼šæ˜¾ç¤ºä¸€ä¸ªå¯¹è¯æ¡†ï¼Œå…³é—­åè¿”å›ä¸€ä¸ªå€¼å’Œ `ok` çš„å…ƒç»„ï¼Œå‘ŠçŸ¥æ‚¨æ˜¯å¦æŒ‰ä¸‹äº†â€œç¡®å®šâ€æŒ‰é’®ã€‚å¦‚æœ `ok` ä¸º `False`ï¼Œåˆ™å¯¹è¯æ¡†å·²å…³é—­ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­â€”â€”ä¸€ä¸ªæŒ‰é’®ï¼Œå®ƒä¼šå¼¹å‡ºä¸€ä¸ªå¯¹è¯æ¡†ï¼Œä»ç”¨æˆ·é‚£é‡Œè·å–ä¸€ä¸ªæ•´æ•°å€¼ã€‚å®ƒä½¿ç”¨äº† `QDialog.get_int()` é™æ€æ–¹æ³•ï¼Œä¼ é€’äº†çˆ¶çº§ `self`ã€çª—å£æ ‡é¢˜å’Œè¾“å…¥æ§ä»¶æ—è¾¹æ˜¾ç¤ºçš„æç¤ºä¿¡æ¯ã€‚

*Listing 56. basic/dialogs_input_1.py*

```python
import sys

from PyQt6.QtWidgets import (
    QApplication,
    QInputDialog,
    QMainWindow,
    QPushButton,
)


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        button1 = QPushButton("Integer")
        button1.clicked.connect(self.get_an_int)
        
        self.setCentralWidget(button1)
    
    def get_an_int(self):
        my_int_value, ok = QInputDialog.getInt(
            self, "Get an integer", "Enter a number"
        )
        print("Result:", ok, my_int_value)
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ‚¨å°†çœ‹åˆ°ä¸€ä¸ªæŒ‰é’®ã€‚æŒ‰ä¸‹å®ƒåï¼Œç³»ç»Ÿä¼šæç¤ºæ‚¨è¾“å…¥ä¸€ä¸ªæ•°å­—ã€‚

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¸€åˆ‡éƒ½å¾ˆä»¤äººå…´å¥‹ã€‚è®©æˆ‘ä»¬æ‰©å±•è¿™ä¸ªä¾‹å­ï¼Œæ·»åŠ ä¸€äº›æŒ‰é’®ï¼Œä»¥åŠå®ƒä»¬çš„å¤„ç†æ–¹æ³•ã€‚æˆ‘ä»¬å°†å…ˆå°†æŒ‰é’®çš„ä¿¡å·è¿æ¥åˆ°æ–¹æ³•æ§½ï¼Œç„¶åé€æ­¥å®ç°æ¯ä¸ªè¾“å…¥æ–¹æ³•ã€‚

*Listing 57. basic/dialogs_input_2.py*

```python
import sys

from PyQt6.QtWidgets import (
    QApplication,
    QInputDialog,
    QLineEdit,
    QMainWindow,
    QPushButton,
    QVBoxLayout,
    QWidget,
)


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

        self.setWindowTitle("My App")

        layout = QVBoxLayout()

        button1 = QPushButton("Integer")
        button1.clicked.connect(self.get_an_int)
        layout.addWidget(button1)

        button2 = QPushButton("Float")
        button2.clicked.connect(self.get_a_float)
        layout.addWidget(button2)

        button3 = QPushButton("Select")
        button3.clicked.connect(self.get_a_str_from_a_list)
        layout.addWidget(button3)

        button4 = QPushButton("String")
        button4.clicked.connect(self.get_a_str)
        layout.addWidget(button4)

        button5 = QPushButton("Text")
        button5.clicked.connect(self.get_text)
        layout.addWidget(button5)
        
        container = QWidget()
        container.setLayout(layout)
        self.setCentralWidget(container)
        
    def get_an_int(self):
        my_int_value, ok = QInputDialog.getInt(
            self, "Get an integer", "Enter a number"
        )
        print("Result:", ok, my_int_value)
        
    def get_a_float(self):
        pass
    
    def get_a_str_from_a_list(self):
        pass
    
    def get_a_str(self):
        pass
    
    def get_text(self):
        pass
    
    
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ‚¨å°†çœ‹åˆ°ä¸€ç»„æŒ‰é’®ï¼Œå¯ç”¨äºå¯åŠ¨è¾“å…¥åŠŸèƒ½ï¼Œä½†ç›®å‰ä»…æ”¯æŒæ•´æ•°è¾“å…¥ã€‚

![Figure58](Figure58.png)

> å›¾äº”åå…«ï¼šå¯¹è¯æ¡†å¯åŠ¨å™¨æ¼”ç¤ºã€‚ç‚¹å‡»æŒ‰é’®ä»¥å¯åŠ¨å¯¹è¯æ¡†å¹¶è¾“å…¥å€¼ã€‚

æŒ‰ä¸‹æŒ‰é’®å°†è°ƒç”¨æˆ‘ä»¬å®šä¹‰çš„è¾“å…¥æ–¹æ³•ä¹‹ä¸€ï¼Œè®©æˆ‘ä»¬æ¥ä¸‹æ¥å®ç°å®ƒä»¬ã€‚æˆ‘ä»¬å°†ä¾æ¬¡éå†æ¯ä¸ª `QInputDialog` æ–¹æ³•ï¼ŒæŸ¥çœ‹å¯ç”¨çš„é…ç½®é€‰é¡¹å¹¶å°†å…¶æ·»åŠ åˆ°ç¤ºä¾‹ä¸­ã€‚

#### æ•´æ•°

å¦‚å‰æ‰€è¿°ï¼Œè¦ä»ç”¨æˆ·è·å–æ•´æ•°å€¼ï¼Œå¯ä»¥ä½¿ç”¨ `QInputDialog.getInt()` æ–¹æ³•ã€‚è¯¥æ–¹æ³•ä¼šåœ¨å¯¹è¯æ¡†ä¸­æ˜¾ç¤ºä¸€ä¸ªæ ‡å‡†çš„ Qt `QDoubleSpinBox` æ§ä»¶ã€‚æ‚¨å¯ä»¥æŒ‡å®šåˆå§‹å€¼ã€è¾“å…¥çš„æœ€å°å€¼å’Œæœ€å¤§å€¼èŒƒå›´ï¼Œä»¥åŠä½¿ç”¨ç®­å¤´æ§ä»¶æ—¶çš„æ­¥é•¿ã€‚

*Listing 58. basic/dialogs_input_3.py*

```python
    def get_an_int(self):
        title = "Enter an integer"
        label = "Type your integer here"
        my_int_value, ok = QInputDialog.getInt(
            self, title, label, value=0, min=-5, max=5, step=1
        )
        print("Result:", ok, my_int_value)
```

![Figure59](Figure59.png)

> å›¾äº”åä¹ï¼šæ•´æ•°è¾“å…¥çš„å¯¹è¯æ¡†

![alert](alert.png)

> å³ä½¿ç”¨æˆ·ç‚¹å‡»â€œå–æ¶ˆâ€æŒ‰é’®é€€å‡ºå¯¹è¯æ¡†ï¼Œè¾“å…¥çš„å€¼ä»ä¼šè¢«è¿”å›ã€‚åœ¨ä½¿ç”¨è¯¥å€¼ä¹‹å‰ï¼Œæ‚¨åº”å§‹ç»ˆå…ˆæ£€æŸ¥ `ok` è¿”å›å‚æ•°çš„å€¼ã€‚

#### æµ®ç‚¹æ•°

å¯¹äºæµ®ç‚¹æ•°ç±»å‹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `QInputDialog.getDouble()` æ–¹æ³•â€”â€” Pythonä¸­çš„ `float` ç±»å‹å¯¹åº”ç€ C++ ä¸­çš„ `double` ç±»å‹ã€‚è¿™ä¸ä¸Šæ–‡çš„ `getInt` è¾“å…¥å®Œå…¨ç›¸åŒï¼Œåªæ˜¯å¢åŠ äº† `decimals` å‚æ•°æ¥æ§åˆ¶æ˜¾ç¤ºçš„å°æ•°ä½æ•°ã€‚

*Listing 59. basic/dialogs_input_3.py*

```python
   def get_a_float(self):
       title = "Enter a float"
       label = "Type your float here"
       my_float_value, ok = QInputDialog.getDouble(
           self,
           title,
           label,
           value=0,
           min=-5.3,
           max=5.7,
           decimals=2,
       )
       print("Result:", ok, my_float_value)
```

![Figure60](Figure60.png)

> å›¾å…­åï¼šæµ®ç‚¹æ•°è¾“å…¥çš„å¯¹è¯æ¡†

#### ä»å­—ç¬¦ä¸²åˆ—è¡¨ä¸­é€‰æ‹©

è¦ä»å­—ç¬¦ä¸²åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªé¡¹ï¼Œå¯ä»¥ä½¿ç”¨ `QInputDialog.getItem()` æ–¹æ³•ã€‚è¦é€‰æ‹©çš„å­—ç¬¦ä¸²åˆ—è¡¨é€šè¿‡ `items` å‚æ•°æä¾›ã€‚æ‚¨å¯ä»¥é€šè¿‡å°† `current` å‚æ•°è®¾ç½®ä¸ºæ‰€é€‰é¡¹çš„ç´¢å¼•ï¼Œæ¥æŒ‡å®šåˆå§‹é€‰ä¸­çš„é¡¹ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥åˆ—è¡¨æ˜¯å¯ç¼–è¾‘çš„ï¼Œå³ç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦å‘åˆ—è¡¨ä¸­æ·»åŠ æ–°é¡¹ã€‚æ‚¨å¯ä»¥é€šè¿‡ä¼ é€’ `editable=False` æ¥ç¦ç”¨æ­¤è¡Œä¸ºã€‚

*Listing 60. basic/dialogs_input_3.py*

```python
    def get_a_str_from_a_list(self):
        title = "Select a string"
        label = "Select a fruit from the list"
        items = ["apple", "pear", "orange", "grape"]
        initial_selection = 2  # orangeï¼Œä» 0 å¼€å§‹ç´¢å¼•
        my_selected_str, ok = QInputDialog.getItem(
            self,
            title,
            label,
            items,
            current=initial_selection,
            editable=False,
        )
        print("Result:", ok, my_selected_str)
```

![Figure61](Figure61.png)

> å›¾å…­åä¸€ï¼šä»å­—ç¬¦ä¸²åˆ—è¡¨ä¸­é€‰æ‹©è¾“å…¥çš„å¯¹è¯æ¡†

#### å•è¡Œæ–‡æœ¬

è¦ä»ç”¨æˆ·è·å–ä¸€è¡Œæ–‡æœ¬ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `QInputDialog.getText` ã€‚æ‚¨å¯ä»¥é€šè¿‡å°†æ–‡æœ¬ä½œä¸ºå‚æ•°ä¼ é€’æ¥æä¾›è¾“å…¥çš„åˆå§‹å†…å®¹ã€‚æ¨¡å¼å‚æ•°å…è®¸æ‚¨åœ¨æ­£å¸¸æ¨¡å¼å’Œå¯†ç æ¨¡å¼ä¹‹é—´åˆ‡æ¢ï¼Œå…¶ä¸­è¾“å…¥çš„æ–‡æœ¬ä»¥æ˜Ÿå·æ˜¾ç¤ºï¼Œåˆ†åˆ«ä¼ é€’ `QLineEdit.EchoMode.Normal` æˆ– `QLineEdit.EchoMode.Password`ã€‚

*Listing 61. basic/dialogs_input_3.py*

```python
    def get_a_str(self):
        title = "Enter a string"
        label = "Type your password"
        text = "my secret password"
        mode = QLineEdit.EchoMode.Password
        my_selected_str, ok = QInputDialog.getText(
            self, title, label, mode, text
        )
        print("Result:", ok, my_selected_str)
```

![Figure62](Figure62.png)

> å›¾å…­åäºŒï¼šå•è¡Œæ–‡æœ¬è¾“å…¥å¯¹è¯æ¡†ï¼Œå¯†ç æ¨¡å¼ã€‚

#### å¤šè¡Œæ–‡æœ¬

æœ€åï¼Œè¦è¾“å…¥å¤šè¡Œæ–‡æœ¬ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `QLineEdit.getMultiLineText()` æ–¹æ³•ã€‚è¯¥æ–¹æ³•ä»…æ¥å—æ–‡æœ¬çš„åˆå§‹çŠ¶æ€ã€‚

*Listing 62. basic/dialogs_input_3.py*

```python
    def get_text(self):
        title = "Enter text"
        label = "Type your novel here"
        text = "Once upon a time..."
        my_selected_str, ok = QInputDialog.getMultiLineText(
            self, title, label, text
        )
        print("Result:", ok, my_selected_str)
```

![Figure63](Figure63.png)

> å›¾å…­åä¸‰ï¼šå¤šè¡Œæ–‡æœ¬è¾“å…¥çš„å¯¹è¯æ¡†

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** åœ¨æ‰€æœ‰è¾“å…¥æ–¹æ³•éƒ½å·²å®ç°åï¼Œæ‚¨ç°åœ¨å¯ä»¥ç‚¹å‡»æ¯ä¸ªæŒ‰é’®ï¼ŒæŸ¥çœ‹ä¸åŒçš„è¾“å…¥å¯¹è¯æ¡†å‡ºç°ã€‚

#### ä½¿ç”¨ QInputDialog å®ä¾‹

ä¸Šè¿°é™æ€æ–¹æ³•é€‚ç”¨äºå¤§å¤šæ•°ä½¿ç”¨åœºæ™¯ã€‚ç„¶è€Œï¼Œå¦‚æœæ‚¨å¸Œæœ›å¯¹ `QInputDialog` çš„è¡Œä¸ºè¿›è¡Œæ›´ç²¾ç»†çš„æ§åˆ¶ï¼Œæ‚¨å¯ä»¥åˆ›å»ºä¸€ä¸ª `QInputDialog` çš„å®ä¾‹å¹¶åœ¨æ˜¾ç¤ºå‰å¯¹å…¶è¿›è¡Œé…ç½®â€”â€”å°±åƒå…¶ä»–å¯¹è¯æ¡†ç±»ä¸€æ ·ã€‚ä»¥ä¸‹æ˜¯ç›¸åŒçš„ç¤ºä¾‹ï¼Œä½†é‡‡ç”¨è¿™ç§æ–¹æ³•ã€‚

*Listing 63. basic/dialogs_input_instance.py*

```python
import sys

from PyQt6.QtWidgets import (
    QApplication,
    QInputDialog,
    QLineEdit,
    QMainWindow,
    QPushButton,
    QVBoxLayout,
    QWidget,
)


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()

        self.setWindowTitle("My App")

        layout = QVBoxLayout()

        button1 = QPushButton("Integer")
        button1.clicked.connect(self.get_an_int)
        layout.addWidget(button1)

        button2 = QPushButton("Float")
        button2.clicked.connect(self.get_a_float)
        layout.addWidget(button2)

        button3 = QPushButton("Select")
        button3.clicked.connect(self.get_a_str_from_a_list)
        layout.addWidget(button3)

        button4 = QPushButton("String")
        button4.clicked.connect(self.get_a_str)
        layout.addWidget(button4)

        button5 = QPushButton("Text")
        button5.clicked.connect(self.get_text)
        layout.addWidget(button5)
        
        container = QWidget()
        container.setLayout(layout)
        self.setCentralWidget(container)
        
    def get_an_int(self):
        dialog = QInputDialog(self)
        dialog.setWindowTitle("Enter an integer")
        dialog.setLabelText("Type your integer here")
        dialog.setIntValue(0)
        dialog.setIntMinimum(-5)
        dialog.setIntMaximum(5)
        dialog.setIntStep(1)
        
        ok = dialog.exec()
        print("Result:", ok, dialog.intValue())
        
    def get_a_float(self):
        dialog = QInputDialog(self)
        dialog.setWindowTitle("Enter a float")
        dialog.setLabelText("Type your float here")
        dialog.setDoubleValue(0.1)
        dialog.setDoubleMinimum(-5.3)
        dialog.setDoubleMaximum(5.7)
        dialog.setDoubleStep(1.4)
        dialog.setDoubleDecimals(2)
        
        ok = dialog.exec()
        print("Result:", ok, dialog.doubleValue())
    
    def get_a_str_from_a_list(self):
        dialog = QInputDialog(self)
        dialog.setWindowTitle("Select a string")
        dialog.setLabelText("Select a fruit from the list")
        dialog.setComboBoxItems(["apple", "pear", "orange", "grape"])
        dialog.setComboBoxEditable(False)
        dialog.setTextValue("orange")
        
        ok = dialog.exec()
        print("Result:", ok, dialog.textValue())
    
    def get_a_str(self):
        dialog = QInputDialog(self)
        dialog.setWindowTitle("Enter a string")
        dialog.setLabelText("Type your password")
        dialog.setTextValue("my secret password")
        dialog.setTextEchoMode(QLineEdit.EchoMode.Password)
        
        ok = dialog.exec()
        print("Result:", ok, dialog.textValue())
    
    def get_text(self):
        dialog = QInputDialog(self)
        dialog.setWindowTitle("Enter text")
        dialog.setLabelText("Type your novel here")
        dialog.setTextValue("Once upon a time...")
        dialog.setOption(
            QInputDialog.InputDialogOption.UsePlainTextEditForTextInput,
            True,
        )
        
        ok = dialog.exec()
        print("Result:", ok, dialog.textValue())
    
    
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** å®ƒåº”è¯¥åƒä»¥å‰ä¸€æ ·å·¥ä½œâ€”â€”è¯·éšæ„è°ƒæ•´å‚æ•°æ¥è°ƒæ•´å®ƒçš„è¡Œä¸ºï¼

æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ã€‚é¦–å…ˆï¼Œå½“æ‚¨è°ƒç”¨ `exec()` æ—¶ï¼Œè¿”å›å€¼ç­‰åŒäºä¹‹å‰è¿”å›çš„ `ok` å€¼ï¼ˆ1 è¡¨ç¤º `True`ï¼Œ0 è¡¨ç¤º `False`ï¼‰ã€‚è¦è·å–å®é™…è¾“å…¥çš„å€¼ï¼Œæ‚¨éœ€è¦ä½¿ç”¨å¯¹è¯æ¡†å¯¹è±¡çš„ç±»å‹ç‰¹å®šæ–¹æ³•ï¼Œä¾‹å¦‚ `.doubleValue()` ã€‚å…¶æ¬¡ï¼Œå¯¹äº `QComboBox` ä»å­—ç¬¦ä¸²åˆ—è¡¨ä¸­é€‰æ‹©é¡¹æ—¶ï¼Œæ‚¨ä½¿ç”¨ä¸è¡Œè¾“å…¥æˆ–æ–‡æœ¬è¾“å…¥ç›¸åŒçš„ `.setTextValue()`ï¼ˆè®¾ç½®ï¼‰å’Œ `.textValue()`ï¼ˆè·å–ï¼‰æ–¹æ³•ã€‚

### æ–‡ä»¶å¯¹è¯æ¡†

åº”ç”¨ç¨‹åºä¸­å¯¹è¯æ¡†æœ€å¸¸è§çš„ç”¨é€”ä¹‹ä¸€æ˜¯å¤„ç†æ–‡ä»¶â€”â€”æ— è®ºæ˜¯åº”ç”¨ç¨‹åºç”Ÿæˆçš„æ–‡æ¡£ï¼Œè¿˜æ˜¯å¸Œæœ›åœ¨åº”ç”¨ç¨‹åºä½¿ç”¨ä¹‹é—´ä¿ç•™çš„é…ç½®è®¾ç½®ã€‚å¹¸è¿çš„æ˜¯ï¼ŒPyQt6å†…ç½®äº†ç”¨äºæ‰“å¼€æ–‡ä»¶ã€é€‰æ‹©æ–‡ä»¶å¤¹å’Œä¿å­˜æ–‡ä»¶çš„å¯¹è¯æ¡†ã€‚

å¦‚å‰æ‰€è¿°ï¼Œå¦‚æœæ‚¨ä½¿ç”¨ Qt çš„å†…ç½®å¯¹è¯æ¡†å·¥å…·ï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºå°†éµå¾ªå¹³å°æ ‡å‡†ã€‚åœ¨æ–‡ä»¶å¯¹è¯æ¡†çš„æƒ…å†µä¸‹ï¼ŒPyQt6 æ›´è¿›ä¸€æ­¥ï¼Œå°†ä½¿ç”¨å¹³å°çš„å†…ç½®å¯¹è¯æ¡†è¿›è¡Œè¿™äº›æ“ä½œï¼Œå¯ä»¥ç¡®ä¿æ‚¨çš„åº”ç”¨ç¨‹åºå¯¹ç”¨æˆ·æ¥è¯´æ˜¯ç†Ÿæ‚‰çš„ã€‚

![information](information.png)

> åˆ›å»ºè‰¯å¥½çš„æ–‡ä»¶å¯¹è¯æ¡†éå¸¸å›°éš¾ï¼Œå› æ­¤æˆ‘ä¸å»ºè®®æ‚¨å°è¯•è‡ªè¡Œå¼€å‘ã€‚

åœ¨ PyQt6 ä¸­ï¼Œæ–‡ä»¶å¯¹è¯æ¡†æ˜¯é€šè¿‡ `QFileDialog` ç±»åˆ›å»ºçš„ã€‚ä¸ºäº†æ–¹ä¾¿èµ·è§ï¼Œå®ƒæä¾›äº†ä¸€ç³»åˆ—é™æ€æ–¹æ³•ï¼Œæ‚¨å¯ä»¥è°ƒç”¨è¿™äº›æ–¹æ³•æ¥æ˜¾ç¤ºç‰¹å®šçš„å¯¹è¯æ¡†ï¼Œè€Œæ— éœ€è¿›è¡Œè¿‡å¤šé…ç½®ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ `QFileDialog.getOpenFileName()` é™æ€æ–¹æ³•è·å–è¦æ‰“å¼€çš„æ–‡ä»¶åçš„ç¤ºä¾‹ã€‚

*Listing 64. basic/dialogs_file_1.py*

```python
import sys

from PyQt6.QtWidgets import (
    QApplication,
    QFileDialog,
    QMainWindow,
    QPushButton,
)


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        button1 = QPushButton("Open file")
        button1.clicked.connect(self.get_filename)
        
        self.setCentralWidget(button1)
        
    def get_filename(self):
        filename, selected_filter = QFileDialog.getOpenFileName(self)
        print("Result:", filename, selected_filter)
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** ç‚¹å‡»æŒ‰é’®ä»¥æ‰“å¼€æ–‡ä»¶é€‰æ‹©å¯¹è¯æ¡†ã€‚é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶å¹¶ç‚¹å‡» **[ç¡®å®š]** æˆ– **[å–æ¶ˆ]** æŒ‰é’®ä»¥æŸ¥çœ‹è¿”å›çš„ç»“æœã€‚

å¦‚æ‚¨æ‰€è§ï¼Œ`QFileDialog.getOpenFilename()` æ–¹æ³•ä¼šè¿”å›ä¸¤ä¸ªå€¼ã€‚ç¬¬ä¸€ä¸ªå€¼æ˜¯æ‰€é€‰æ–‡ä»¶çš„åç§°ï¼ˆå¦‚æœå¯¹è¯æ¡†è¢«å–æ¶ˆï¼Œåˆ™ä¸ºç©ºå­—ç¬¦ä¸²ï¼‰ã€‚ç¬¬äºŒä¸ªå€¼æ˜¯å½“å‰æ´»åŠ¨çš„æ–‡ä»¶è¿‡æ»¤å™¨â€”â€”ç”¨äºè¿‡æ»¤å¯¹è¯æ¡†ä¸­å¯è§çš„æ–‡ä»¶ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥è¿‡æ»¤å™¨ä¸ºâ€œæ‰€æœ‰æ–‡ä»¶ (*)â€ï¼Œæ‰€æœ‰æ–‡ä»¶å‡å¯è§ã€‚

åŸºäºæ–‡ä»¶çš„å¯¹è¯æ¡†ï¼ˆæ‰“å¼€å’Œä¿å­˜ï¼‰éƒ½æ¥å—ä¸€ä¸ªè¿‡æ»¤å™¨å‚æ•°ï¼Œè¯¥å‚æ•°æ˜¯ä¸€ä¸ªç”¨åˆ†å·åˆ†éš”çš„è¿‡æ»¤å™¨å®šä¹‰å­—ç¬¦ä¸²åˆ—è¡¨â€”â€”è¿™æœ‰ç‚¹å¥‡æ€ªï¼è¿˜æœ‰ä¸€ä¸ª `initialFilter` ï¼Œå®ƒæ˜¯å¯¹è¯æ¡†é¦–æ¬¡æ‰“å¼€æ—¶æ´»åŠ¨çš„è¿‡æ»¤å™¨å­—ç¬¦ä¸²ã€‚è®©æˆ‘ä»¬çœ‹çœ‹è¿™äº›è¿‡æ»¤å™¨æ˜¯å¦‚ä½•å®šä¹‰çš„ï¼Œä»¥åŠå¦‚ä½•æœ€å¥½åœ°ä½¿ç”¨å®ƒä»¬ã€‚

#### æ–‡ä»¶è¿‡æ»¤å™¨

Qt æ–‡ä»¶è¿‡æ»¤å™¨çš„æ ‡å‡†æ ¼å¼æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå…¶æ ¼å¼å¦‚ä¸‹ï¼šç”¨æˆ·å‹å¥½åç§°å¯ä»¥æ˜¯ä»»æ„æ–‡æœ¬ï¼Œè€Œ `*.ext` åˆ™æ˜¯æ–‡ä»¶åŒ¹é…è¿‡æ»¤å™¨å’Œæ–‡ä»¶æ‰©å±•åã€‚è¯¥æ‰©å±•ååº”åœ¨è¿‡æ»¤å™¨å­—ç¬¦ä¸²æœ«å°¾ç”¨æ‹¬å·æ‹¬èµ·ã€‚

```python
"User-friendly name (*.ext)"
```

å¦‚æœæ‚¨æƒ³æä¾›å¤šä¸ªè¿‡æ»¤å™¨ï¼Œå¯ä»¥ä½¿ç”¨ `;;` (ä¸¤ä¸ªåˆ†å·) å°†å®ƒä»¬åˆ†éš”å¼€ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œå…¶ä¸­åŒ…æ‹¬ä¸€ä¸ªâ€œ* æ‰€æœ‰æ–‡ä»¶â€è¿‡æ»¤å™¨ã€‚

```python
"Portable Network Graphics Image (*.png);;Comma Separated files(*.csv);;All files (*)"
```

æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šæ›´æ–°ç¤ºä¾‹ï¼Œä»¥å°†ä¸Šè¿°ç¤ºä¾‹è¿‡æ»¤å™¨æä¾›ç»™ `QFileDialog.getOpenFilename()` æ–¹æ³•ã€‚

*Listing 65. basic/dialogs_file_2.py*

```python
    def get_filename(self):
        filters = "Portable Network Graphics files (*.png);;CommaSeparated Values (*.csv);;All files (*)"
        print("Filters are:", filters)
        filename, selected_filter = QFileDialog.getOpenFileName(
            self,
            filter=filters,
        )
        print("Result:", filename, selected_filter)
```

![alert](alert.png)

> æ‚¨é€šå¸¸ä¼šçœ‹åˆ° `*.*` ç”¨äºæ‰€æœ‰æ–‡ä»¶è¿‡æ»¤å™¨ï¼Œä½†åœ¨ Qt ä¸­è¿™ä¸ä¼šåŒ¹é…æ²¡æœ‰æ‰©å±•åçš„æ–‡ä»¶ã€‚

æ‚¨å¯ä»¥å°†è¿‡æ»¤å™¨å†™å…¥å­—ç¬¦ä¸²ä¸­ï¼Œä½†è¿™æ ·åšå¯èƒ½ä¼šå˜å¾—æœ‰äº›ç¹çã€‚å¦‚æœæ‚¨å¸Œæœ›åœ¨åˆå§‹çŠ¶æ€ä¸‹é€‰æ‹©ç‰¹å®šçš„è¿‡æ»¤å™¨ï¼Œåˆ™éœ€è¦å¤åˆ¶è¯¥å­—ç¬¦ä¸²ä¸­çš„æ–‡æœ¬ï¼ˆæˆ–ä»ä¸­æå–ï¼‰ã€‚ç›¸åï¼Œæˆ‘å»ºè®®æ‚¨å°†æ–‡ä»¶è¿‡æ»¤å™¨å®šä¹‰å­˜å‚¨ä¸ºå­—ç¬¦ä¸²åˆ—è¡¨ï¼Œç„¶ååœ¨ä¼ é€’ç»™å¯¹è¯æ¡†æ–¹æ³•ä¹‹å‰ä½¿ç”¨ `;;` å°†åˆ—è¡¨è¿æ¥èµ·æ¥ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯ï¼Œåˆå§‹è¿‡æ»¤å™¨å¯ä»¥é€šè¿‡ç´¢å¼•ä»è¯¥åˆ—è¡¨ä¸­é€‰æ‹©ã€‚

```python
FILE_FILTERS = [
    "Portable Network Graphics files (*.png)",
    "Text files (*.txt)",
    "Comma Separated Values (*.csv)",
    "All files (*.*)",
]

initial_filter = FILE_FILTERS[2] # *.csv
# æ„å»ºä»¥ ;; åˆ†éš”çš„è¿‡æ»¤å­—ç¬¦ä¸²
filters = ';;'.join(FILE_FILTERS)
```

æˆ‘ä»¬çš„ç¤ºä¾‹å·²æ›´æ–°ä¸ºä½¿ç”¨æ­¤æ–¹æ³•ï¼Œå…¶ä¸­ `FILE_FILTERS` åœ¨æ–‡ä»¶é¡¶éƒ¨å®šä¹‰ï¼Œä»¥ä¾¿æ‰€æœ‰æ–‡ä»¶æ–¹æ³•å‡å¯ä½¿ç”¨ã€‚

*Listing 66. basic/dialogs_file_2b.py*

```python
import sys

from PyQt6.QtWidgets import (
    QApplication,
    QFileDialog,
    QMainWindow,
    QPushButton,
)

FILE_FILTERS = [
    "Portable Network Graphics files (*.png)",
    "Text files (*.txt)",
    "Comma Separated Values (*.csv)",
    "All files (*.*)",
]


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        button1 = QPushButton("Open file")
        button1.clicked.connect(self.get_filename)
        
        self.setCentralWidget(button1)
        
    def get_filename(self):
        initial_filter = FILE_FILTERS[3] # ä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ª
        filters = ";;".join(FILE_FILTERS)
        print("Filters are:", filters)
        print("Initial filter:", initial_filter)
        
        filename, selected_filter = QFileDialog.getOpenFileName(
            self,
            filter=filters,
            initialFilter=initial_filter,
        )
        print("Result:", filename, selected_filter)
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

#### é…ç½®æ–‡ä»¶å¯¹è¯æ¡†

ç°åœ¨æˆ‘ä»¬å·²ç»äº†è§£äº†è¿‡æ»¤å™¨ï¼Œè®©æˆ‘ä»¬æ‰©å±•æˆ‘ä»¬çš„ç¤ºä¾‹ï¼Œä¸ºæ›´å¤šç±»å‹çš„æ–‡ä»¶æ“ä½œæ·»åŠ å¤„ç†ç¨‹åºã€‚ç„¶åï¼Œæˆ‘ä»¬å°†é€æ­¥ä»‹ç»æ¯ä¸ª `QFileDialog` æ–¹æ³•ï¼Œä»¥äº†è§£å…¶ä»–å¯ç”¨çš„é…ç½®é€‰é¡¹ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å°†ä¼šæ·»åŠ ä¸€ç³»åˆ—æŒ‰é’®ï¼Œå¹¶å°†å®ƒä»¬è¿æ¥åˆ°æ–‡ä»¶æ–¹æ³•æ§½ï¼Œä»¥å¤„ç†æ˜¾ç¤ºä¸åŒçš„å¯¹è¯æ¡†ã€‚

*Listing 67. basic/dialogs_file_3.py*

```python
import sys

from PyQt6.QtWidgets import (
    QApplication,
    QFileDialog,
    QMainWindow,
    QPushButton,
    QVBoxLayout,
    QWidget,
)

FILE_FILTERS = [
    "Portable Network Graphics files (*.png)",
    "Text files (*.txt)",
    "Comma Separated Values (*.csv)",
    "All files (*.*)",
]


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        layout = QVBoxLayout()
        
        button1 = QPushButton("Open file")
        button1.clicked.connect(self.get_filename)
        layout.addWidget(button1)
        
        button2 = QPushButton("Open files")
        button2.clicked.connect(self.get_filenames)
        layout.addWidget(button2)
        
        button3 = QPushButton("Save file")
        button3.clicked.connect(self.get_save_filename)
        layout.addWidget(button3)
        
        button4 = QPushButton("Select folder")
        button4.clicked.connect(self.get_folder)
        layout.addWidget(button4)
        
        container = QWidget()
        container.setLayout(layout)
        self.setCentralWidget(container)
        
    def get_filename(self):
        initial_filter = FILE_FILTERS[3] # ä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ª
        filters = ";;".join(FILE_FILTERS)
        print("Filters are:", filters)
        print("Initial filter:", initial_filter)
        
        filename, selected_filter = QFileDialog.getOpenFileName(
            self,
            filter=filters,
            initialFilter=initial_filter,
        )
        print("Result:", filename, selected_filter)
        
    def get_filenames(self):
        pass
    
    def get_save_filename(self):
        pass
    
    def get_folder(self):
        pass
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ‚¨å°†çœ‹åˆ°ä¸€ç»„å¯ç”¨äºè¿è¡Œæ–‡ä»¶æ–¹æ³•çš„æŒ‰é’®â€”â€”ç›®å‰ä»…â€œæ‰“å¼€æ–‡ä»¶â€åŠŸèƒ½å¯ç”¨

![Figure64](Figure64.png)

> å›¾å…­åå››ï¼šæ–‡ä»¶å¯¹è¯æ¡†å¯åŠ¨å™¨æ¼”ç¤ºã€‚

è®©æˆ‘ä»¬ä¾æ¬¡é€ä¸€æŸ¥çœ‹æ¯ä¸ªæ–‡ä»¶æ–¹æ³•ï¼Œå¹¶å°†å®ƒä»¬æ·»åŠ åˆ°æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ã€‚

#### æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶

è¦é€‰æ‹©å•ä¸ªæ–‡ä»¶åä»¥æ‰“å¼€æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ `QFileDialog.getOpenFileName()` æ–¹æ³•ã€‚

é™æ€æ–¹æ³•éƒ½æ¥å—ä¸€ä¸ªçˆ¶æ§ä»¶çš„çˆ¶å‚æ•°ï¼ˆé€šå¸¸ä¸º `self` ï¼‰å’Œä¸€ä¸ªå¯¹è¯æ¡†æ ‡é¢˜çš„æ ‡é¢˜å‚æ•°ã€‚å®ƒä»¬è¿˜æ¥å—ä¸€ä¸ªç›®å½•å‚æ•°ï¼Œè¯¥å‚æ•°æ˜¯å¯¹è¯æ¡†å°†æ‰“å¼€çš„åˆå§‹ç›®å½•ã€‚æ ‡é¢˜å’Œç›®å½•éƒ½å¯ä»¥æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°†ä½¿ç”¨é»˜è®¤æ ‡é¢˜ï¼Œå¯¹è¯æ¡†å°†åœ¨å½“å‰æ–‡ä»¶å¤¹ä¸­æ‰“å¼€ã€‚

é™¤äº† `caption` å’Œ 'directory' å¤–ï¼Œè¯¥æ–¹æ³•è¿˜æ¥å— `filter` å’Œ `initialFilter` å‚æ•°æ¥é…ç½®æ–‡ä»¶è¿‡æ»¤å™¨ã€‚å®Œæˆåï¼Œå®ƒè¿”å›æ‰€é€‰æ–‡ä»¶ä½œä¸ºå­—ç¬¦ä¸²ï¼ˆåŒ…å«å®Œæ•´è·¯å¾„ï¼‰ä»¥åŠå½“å‰é€‰å®šçš„è¿‡æ»¤å™¨ã€‚

*Listing 68. basic/dialogs_file_4.py*

```python
    def get_filename(self):
        caption = "" # ç©ºå€¼ä½¿ç”¨é»˜è®¤æ ‡é¢˜ã€‚
        initial_dir = "" # ç©ºæ–‡ä»¶å¤¹ä½¿ç”¨å½“å‰æ–‡ä»¶å¤¹ã€‚
        initial_filter = FILE_FILTERS[3] # ä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªã€‚
        filters = ";;".join(FILE_FILTERS)
        print("Filters are:", filters)
        print("Initial filter:", initial_filter)
        
        filename, selected_filter = QFileDialog.getOpenFileName(
            self,
            caption=caption,
            directory=initial_dir,
            filter=filters,
            initialFilter=initial_filter,
        )
        print("Result:", filename, selected_filter)
```

![Figure65](Figure65.png)

> å›¾å…­åäº”ï¼šæ ‡å‡†çš„Windowsæ‰“å¼€å¯¹è¯æ¡†ï¼Œå¤„äºæ·±è‰²æ¨¡å¼ã€‚

ä¸€æ—¦è·å¾—æ–‡ä»¶åï¼Œå³å¯ä½¿ç”¨æ ‡å‡† Python è¿›è¡ŒåŠ è½½ã€‚å¦‚æœå¯¹è¯æ¡†å·²å…³é—­ï¼Œæ–‡ä»¶åå˜é‡å°†ä¸ºç©ºå­—ç¬¦ä¸²ã€‚

*Listing 69. basic/dialogs_file_4b.py*

```python
        if filename:
            with open(filename, "r") as f:
                file_contents = f.read()
```

#### æ‰“å¼€å¤šä¸ªæ–‡ä»¶

æœ‰æ—¶æ‚¨å¸Œæœ›ç”¨æˆ·èƒ½å¤Ÿä¸€æ¬¡åŠ è½½å¤šä¸ªæ–‡ä»¶â€”â€”ä¾‹å¦‚å°†ä¸€ç»„æ•°æ®æ–‡ä»¶åŠ è½½åˆ°åº”ç”¨ç¨‹åºä¸­ã€‚`QFileDialog.getOpenFileNames()` æ–¹æ³•å¯å®ç°æ­¤åŠŸèƒ½ã€‚è¯¥æ–¹æ³•ä¸ä¸Šè¿°å•æ–‡ä»¶æ–¹æ³•ä½¿ç”¨ç›¸åŒçš„å‚æ•°ï¼Œå”¯ä¸€åŒºåˆ«åœ¨äºå®ƒè¿”å›æ‰€é€‰æ–‡ä»¶è·¯å¾„çš„å­—ç¬¦ä¸²åˆ—è¡¨ã€‚

*Listing 70. basic/dialogs_file_4.py*

```python
    def get_filenames(self):
        caption = "" # ç©ºå€¼ä½¿ç”¨é»˜è®¤æ ‡é¢˜ã€‚
        initial_dir = "" # ç©ºæ–‡ä»¶å¤¹ä½¿ç”¨å½“å‰æ–‡ä»¶å¤¹ã€‚
        initial_filter = FILE_FILTERS[1] # ä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªã€‚
        filters = ";;".join(FILE_FILTERS)
        print("Filters are:", filters)
        print("Initial filter:", initial_filter)
        
        filename, selected_filter = QFileDialog.getOpenFileNames(
            self,
            caption=caption,
            directory=initial_dir,
            filter=filters,
            initialFilter=initial_filter,
        )
        print("Result:", filenames, selected_filter)
```

æ‚¨å¯ä»¥é€šè¿‡éå†å¹¶åŠ è½½æ–‡ä»¶åä¸­çš„æ–‡ä»¶ï¼Œå°±åƒåœ¨å‰ä¸€ä¸ªç¤ºä¾‹ä¸­ä¸€æ ·ã€‚é€‰æ‹©å•ä¸ªæ–‡ä»¶ä»ç„¶å¯è¡Œï¼Œå¹¶å°†è¿”å›ä¸€ä¸ªåŒ…å«å•ä¸ªæ¡ç›®çš„åˆ—è¡¨ã€‚å¦‚æœåœ¨æœªé€‰æ‹©æ–‡ä»¶çš„æƒ…å†µä¸‹å…³é—­å¯¹è¯æ¡†ï¼Œæ–‡ä»¶åå°†æ˜¯ä¸€ä¸ªç©ºåˆ—è¡¨ã€‚

*Listing 71. basic/dialogs_file_4b.py*

```python
        for filename in filenames:
            with open(filename, "r") as f:
                file_contents = f.read()
```

#### ä¿å­˜ä¸€ä¸ªæ–‡ä»¶

è¦ä¿å­˜æ–‡ä»¶ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `QFileDialog.getSaveFileName()` æ–¹æ³•ã€‚

*Listing 72. basic/dialogs_file_4.py*

```python
    def get_save_filename(self):
        caption = "" # ç©ºå€¼ä½¿ç”¨é»˜è®¤æ ‡é¢˜ã€‚
        initial_dir = "" # ç©ºæ–‡ä»¶å¤¹ä½¿ç”¨å½“å‰æ–‡ä»¶å¤¹ã€‚
        initial_filter = FILE_FILTERS[2] # ä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ªã€‚
        filters = ";;".join(FILE_FILTERS)
        print("Filters are:", filters)
        print("Initial filter:", initial_filter)
        
        filename, selected_filter = QFileDialog.getSaveFileName(
            self,
            caption=caption,
            directory=initial_dir,
            filter=filters,
            initialFilter=initial_filter,
        )
        print("Result:", filename, selected_filter)
```

åŒæ ·ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ–‡ä»¶åå˜é‡é€šè¿‡æ ‡å‡†çš„ Python ä¿å­˜åˆ°æ–‡ä»¶ã€‚å¦‚æœå¯¹è¯æ¡†åœ¨æœªé€‰æ‹©æ–‡ä»¶çš„æƒ…å†µä¸‹å…³é—­ï¼Œæ–‡ä»¶åå˜é‡å°†ä¸ºç©ºå­—ç¬¦ä¸²ã€‚å¦‚æœæ–‡ä»¶å·²å­˜åœ¨ï¼Œå®ƒå°†è¢«è¦†ç›–ä¸”ç°æœ‰å†…å®¹ä¼šä¸¢å¤±ã€‚

æ‚¨åº”å§‹ç»ˆç¡®è®¤ç”¨æˆ·æ˜¯å¦ç¡®å®å¸Œæœ›è¦†ç›–æ–‡ä»¶ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ `os.path.exists() `å‡½æ•°æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œç„¶åæ˜¾ç¤ºä¸€ä¸ª `QMessageBox` å¯¹è¯æ¡†ï¼Œè¯¢é—®ç”¨æˆ·æ˜¯å¦ç»§ç»­è¦†ç›–ç°æœ‰æ–‡ä»¶ã€‚å¦‚æœç”¨æˆ·å›ç­”â€œå¦â€ï¼Œåˆ™ä¸ä¼šå†™å…¥æ–‡ä»¶ã€‚å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œæˆ–ç”¨æˆ·å›ç­”â€œæ˜¯â€ï¼Œåˆ™å†™å…¥æ–‡ä»¶ã€‚

*Listing 73. basic/dialogs_file_4b.py*

```python
import os

       if filename:
           if os.path.exists(filename):
                # å·²å­˜åœ¨æ–‡ä»¶ï¼Œè¯·ç”¨æˆ·ç¡®è®¤ã€‚
                write_confirmed = QMessageBox.question(
                   self,
                   "Overwrite file?",
                   f"The file {filename} exists. Are you sure youwant to overwrite it?", 
                )
            else:
                # æ–‡ä»¶ä¸å­˜åœ¨ï¼Œå§‹ç»ˆç¡®è®¤
                write_confirmed = True
                
            if write_confirmed:
                with open(filename, "w") as f:
                    file_content = "YOUR FILE CONTENT"
                    f.write(file_content)
```

![tips](tips.png)

> å§‹ç»ˆå°è¯•è€ƒè™‘ç”¨æˆ·å¯èƒ½çŠ¯çš„é”™è¯¯â€”â€”ä¾‹å¦‚åœ¨ä¿å­˜å¯¹è¯æ¡†ä¸­ç‚¹å‡»äº†é”™è¯¯çš„æ–‡ä»¶â€”â€”å¹¶ç»™ä»–ä»¬æœºä¼šè‡ªè¡ŒæŒ½æ•‘ã€‚

#### é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶å¤¹

è¦é€‰æ‹©ä¸€ä¸ªç°æœ‰æ–‡ä»¶å¤¹ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ `QFileDialog.getExistingDirectory()` æ–¹æ³•ã€‚

```python
folder_path = QFileDialog.getExistingDirectory(parent, caption="", directory="", options=ShowDirsOnly)
```

é»˜è®¤æƒ…å†µä¸‹ï¼Œ`QFileDialog.getExistingDirectory` åªä¼šæ˜¾ç¤ºæ–‡ä»¶å¤¹ã€‚æ‚¨å¯ä»¥é€šè¿‡ä¼ å…¥å‚æ•°æ¥æ›´æ”¹æ­¤è®¾ç½®ã€‚

![tips](tips.png)

> è¿˜æœ‰ä¸€äº›é™æ€æ–¹æ³•å¯ç”¨äºåŠ è½½è¿œç¨‹æ–‡ä»¶ï¼Œè¿™äº›æ–¹æ³•è¿”å› `QUrl` å¯¹è±¡ã€‚è¿™äº›æ–¹æ³•åŒ…æ‹¬ `QFileDialog.getSaveFileUrl()`ã€`QFileDialog.getOpenFileUrls()` ã€`QFileDialog.getOpenFileUrl()` ï¼Œä»¥åŠç”¨äºæ–‡ä»¶å¤¹çš„`QFileDialog.getExistingDirectoryUrl()`ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… Qtæ–‡æ¡£ã€‚

å¦‚æœæ‚¨å¸Œæœ›å¯¹æ–‡ä»¶å¯¹è¯æ¡†çš„è¡Œä¸ºæœ‰æ›´å¤šæ§åˆ¶æƒï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ª `QFileDialog` å®ä¾‹å¹¶ä½¿ç”¨é…ç½®æ–¹æ³•ã€‚ä»¥ä¸‹æ˜¯ç›¸åŒçš„æ–‡ä»¶å¯¹è¯æ¡†æ¼”ç¤ºï¼Œä½†ä¸ä½¿ç”¨ä¸Šè¿°é™æ€æ–¹æ³•ä¸åŒï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ª  `QFileDialog` å®ä¾‹å¹¶åœ¨å¯åŠ¨å¯¹è¯æ¡†å‰å¯¹å…¶è¿›è¡Œé…ç½®ã€‚

*Listing 74. basic/dialogs_file_2.py*

```python
import sys

from PyQt6.QtWidgets import (
    QApplication,
    QFileDialog,
    QLineEdit,
    QMainWindow,
    QPushButton,
    QVBoxLayout,
    QWidget,
)

FILE_FILTERS = [
    "Portable Network Graphics files (*.png)",
    "Text files (*.txt)",
    "Comma Separated Values (*.csv)",
    "All files (*.*)",
]


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
        self.setWindowTitle("My App")
        
        layout = QVBoxLayout()
        
        button1 = QPushButton("Open file")
        button1.clicked.connect(self.get_filename)
        layout.addWidget(button1)
        
        button2 = QPushButton("Open files")
        button2.clicked.connect(self.get_filenames)
        layout.addWidget(button2)
        
        button3 = QPushButton("Save file")
        button3.clicked.connect(self.get_save_filename)
        layout.addWidget(button3)
        
        button4 = QPushButton("Select folder")
        button4.clicked.connect(self.get_folder)
        layout.addWidget(button4)
        
        container = QWidget()
        container.setLayout(layout)
        self.setCentralWidget(container)
        
    def get_filename(self):
        caption = "Open file"
        initial_dir = "" # ç©ºæ–‡ä»¶å¤¹ä½¿ç”¨å½“å‰æ–‡ä»¶å¤¹ã€‚
        initial_filter = FILE_FILTERS[3] # ä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ª
        
        dialog = QFileDialog()
        dialog.setWindowTitle(caption)
        dialog.setDirectory(initial_dir)
        dialog.setNameFilters(FILE_FILTERS)
        dialog.selectNameFilter(initial_filter)
        dialog.setFileMode(QFileDialog.FileMode.ExistingFile)
        
        ok = dialog.exec()
        print(
            "Result:",
            ok,
            dialog.selectedFiles(),
            dialog.selectedNameFilter(),
        )
        
    def get_filenames(self):
        caption = "Open files"
        initial_dir = "" # ç©ºæ–‡ä»¶å¤¹ä½¿ç”¨å½“å‰æ–‡ä»¶å¤¹ã€‚
        initial_filter = FILE_FILTERS[1] # ä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ª
        
        dialog = QFileDialog()
        dialog.setWindowTitle(caption)
        dialog.setDirectory(initial_dir)
        dialog.setNameFilters(FILE_FILTERS)
        dialog.selectNameFilter(initial_filter)
        dialog.setFileMode(QFileDialog.FileMode.ExistingFile)
        
        ok = dialog.exec()
        print(
            "Result:",
            ok,
            dialog.selectedFiles(),
            dialog.selectedNameFilter(),
        )
    
    def get_save_filename(self):
        caption = "Save As"
        initial_dir = "" # ç©ºæ–‡ä»¶å¤¹ä½¿ç”¨å½“å‰æ–‡ä»¶å¤¹ã€‚
        initial_filter = FILE_FILTERS[1] # ä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸€ä¸ª
        
        dialog = QFileDialog()
        dialog.setWindowTitle(caption)
        dialog.setDirectory(initial_dir)
        dialog.setNameFilters(FILE_FILTERS)
        dialog.selectNameFilter(initial_filter)
        dialog.setFileMode(QFileDialog.FileMode.AnyFile)
        
        ok = dialog.exec()
        print(
            "Result:",
            ok,
            dialog.selectedFiles(),
            dialog.selectedNameFilter(),
        )
    
    def get_folder(self):
        caption = "Select folder"
        initial_dir = "" # ç©ºæ–‡ä»¶å¤¹ä½¿ç”¨å½“å‰æ–‡ä»¶å¤¹ã€‚
        
        dialog = QFileDialog()
        dialog.setWindowTitle(caption)
        dialog.setDirectory(initial_dir)
        dialog.setFileMode(QFileDialog.FileMode.Directory)
        
        ok = dialog.exec()
        print(
            "Result:",
            ok,
            dialog.selectedFiles(),
            dialog.selectedNameFilter(),
        )
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** æ‚¨å°†çœ‹åˆ°ä¸ä¹‹å‰ç›¸åŒçš„å¯¹è¯æ¡†å¯åŠ¨ç¨‹åºï¼Œå…¶ä¸­åŒ…å«ç›¸åŒçš„æŒ‰é’®ã€‚

æ‚¨ä¼šå‘ç°ï¼Œé‡‡ç”¨è¿™ç§æ–¹æ³•æ—¶ï¼Œå¯¹è¯æ¡†ä¹‹é—´å‡ ä¹æ²¡æœ‰åŒºåˆ«â€”â€”æ‚¨åªéœ€è®¾ç½®é€‚å½“çš„æ¨¡å¼å’Œçª—å£æ ‡é¢˜å³å¯ã€‚åœ¨æ‰€æœ‰æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½é€šè¿‡ `dialog.selectedFiles()` æ–¹æ³•è·å–é€‰ä¸­çš„æ–‡ä»¶ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªåˆ—è¡¨ï¼Œå³ä½¿åªé€‰ä¸­äº†ä¸€ä¸ªæ–‡ä»¶ä¹Ÿæ˜¯å¦‚æ­¤ã€‚æœ€åï¼Œè¯·æ³¨æ„ï¼Œä½¿ç”¨è¿™ç§æ–¹æ³•æ‚¨å¯ä»¥å°†è¿‡æ»¤å™¨ä½œä¸ºå­—ç¬¦ä¸²åˆ—è¡¨ä¼ é€’ç»™ `dialog.setNameFilters()`ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ `;;` è¿æ¥å®ƒä»¬ï¼Œå°½ç®¡å¦‚æœæ‚¨æ›´å–œæ¬¢è¿™ç§æ–¹å¼çš„è¯ï¼Œæ‚¨ä»ç„¶å¯ä»¥ä½¿ç”¨ `dialog.setNameFilter()` ä»¥ `;;` è¿æ¥çš„æ–¹å¼ä¼ é€’ã€‚

æ‚¨å¯ä»¥é€‰æ‹©ä»»ä½•æ‚¨å–œæ¬¢çš„æ–¹æ³•ã€‚ä¸ä¹‹å‰ä¸€æ ·ï¼Œè‡ªå®šä¹‰çš„ `QFileDialog` å®ä¾‹å…·æœ‰æ›´é«˜çš„å¯é…ç½®æ€§ï¼ˆæˆ‘ä»¬åœ¨è¿™é‡Œåªæ˜¯ç•¥å¾®æ¶‰åŠäº†éƒ¨åˆ†å†…å®¹ï¼‰ç„¶è€Œï¼Œé™æ€æ–¹æ³•å…·æœ‰éå¸¸åˆç†çš„é»˜è®¤å€¼ï¼Œè¿™å°†ä¸ºæ‚¨èŠ‚çœä¸€äº›æ—¶é—´ã€‚

æœ‰äº†è¿™äº›æ–¹æ³•ï¼Œæ‚¨åº”è¯¥èƒ½å¤Ÿåˆ›å»ºåº”ç”¨ç¨‹åºæ‰€éœ€çš„ä»»ä½•å¯¹è¯æ¡†äº†ï¼

![tips](tips.png)

> Qt è¿˜æä¾›äº†ä¸€äº›ä¸å¤ªå¸¸ç”¨çš„å¯¹è¯æ¡†ï¼Œç”¨äºæ˜¾ç¤ºè¿›åº¦æ¡ï¼ˆ `QProgressDialog` ï¼‰ã€ä¸€æ¬¡æ€§é”™è¯¯æ¶ˆæ¯ï¼ˆ`QErrorMessage` ï¼‰ã€é€‰æ‹©é¢œè‰²ï¼ˆ`QColorDialog` ï¼‰ã€é€‰æ‹©å­—ä½“ï¼ˆ`QFontDialog` ï¼‰ä»¥åŠæ˜¾ç¤ºå‘å¯¼ä»¥å¼•å¯¼ç”¨æˆ·å®Œæˆä»»åŠ¡ï¼ˆ`QWizard` ï¼‰ã€‚æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… Qt æ–‡æ¡£ã€‚

### ç”¨æˆ·å‹å¥½çš„å¯¹è¯æ¡†

åˆ›å»ºç³Ÿç³•çš„å¯¹è¯æ¡†ç‰¹åˆ«å®¹æ˜“ã€‚ä»è®©ç”¨æˆ·é™·å…¥å›°æƒ‘çš„é€‰é¡¹ä¸­æ— æ³•è„±èº«çš„å¯¹è¯æ¡†ï¼Œåˆ°å±‚å±‚åµŒå¥—çš„æ— ä¼‘æ­¢å¼¹å‡ºçª—å£ï¼Œä¼¤å®³ç”¨æˆ·çš„æ–¹å¼ä¸èƒœæšä¸¾ã€‚

![Special3](Special3.png)

> ä¸€äº›ç³Ÿç³•çš„å¯¹è¯ç¤ºä¾‹â€”â€”æ‚¨å‘ç°ç¬¬4ä¸ªåœ°æ–¹æœ‰ä»€ä¹ˆé—®é¢˜äº†å—ï¼Ÿé»˜è®¤æ“ä½œå…·æœ‰ç ´åæ€§ï¼

**å¯¹è¯æ¡†æŒ‰é’®**ç”±ç³»ç»Ÿæ ‡å‡†å®šä¹‰ã€‚æ‚¨å¯èƒ½ä»æœªæ³¨æ„åˆ° macOS å’Œ Linux ä¸Šçš„â€œç¡®å®šâ€å’Œâ€œå–æ¶ˆâ€æŒ‰é’®ä¸ Windows ä¸Šçš„ä½ç½®ç›¸åï¼Œä½†æ‚¨çš„å¤§è„‘å·²ç»æ³¨æ„åˆ°äº†ï¼

![Special4](Special4.png)

> å¯¹è¯æ¡†æŒ‰é’®çš„æ’åˆ—é¡ºåºå–å†³äºå¹³å°ã€‚

å¦‚æœæ‚¨ä¸éµå¾ªæ ‡å‡†ï¼Œå°†ä¼šè®©ç”¨æˆ·æ„Ÿåˆ°å›°æƒ‘å¹¶å¯¼è‡´ä»–ä»¬çŠ¯é”™ã€‚ä½¿ç”¨Qtæ—¶ï¼Œæ‚¨åœ¨ä½¿ç”¨å†…ç½®æ§ä»¶æ—¶å¯ä»¥å…è´¹è·å¾—è¿™ç§ä¸€è‡´æ€§ã€‚**è¯·åŠ¡å¿…ä½¿ç”¨å®ƒä»¬**ï¼

![Special5](Special5.png)

> æ¥è‡ªAdobe Acrobat Readerçš„çœŸå®å¯¹è¯æ¡†

**é”™è¯¯å¯¹è¯æ¡†**æ€»æ˜¯è®©ç”¨æˆ·æ„Ÿåˆ°çƒ¦èºã€‚å½“æ‚¨æ˜¾ç¤ºä¸€ä¸ªé”™è¯¯å¯¹è¯æ¡†æ—¶ï¼Œæ‚¨æ˜¯åœ¨å‘ç”¨æˆ·ä¼ è¾¾åæ¶ˆæ¯ã€‚å½“æ‚¨å‘æŸäººä¼ è¾¾åæ¶ˆæ¯æ—¶ï¼Œæ‚¨éœ€è¦è€ƒè™‘å®ƒå¯¹ä»–ä»¬çš„å½±å“ã€‚

ä¸Šé¢æ˜¯Adobe Acrobat Readerä¸­ä¸€ä¸ªçœŸå®çš„é”™è¯¯å¯¹è¯æ¡†ã€‚è¯·æ³¨æ„å®ƒå¦‚ä½•è§£é‡Šå­˜åœ¨é”™è¯¯ã€å¯èƒ½çš„åæœä»¥åŠæ½œåœ¨çš„è§£å†³æ–¹æ³•ã€‚ä½†å®ƒä»ç„¶ä¸å¤Ÿå®Œç¾ã€‚é”™è¯¯ä»¥ä¿¡æ¯å¯¹è¯æ¡†çš„å½¢å¼æ˜¾ç¤ºï¼Œä¸”è¯¥å¯¹è¯æ¡†åœ¨æ¯é¡µéƒ½ä¼šå¼¹å‡ºã€‚åœ¨æ–‡æ¡£ä¸­ç§»åŠ¨æ—¶æ— æ³•æŠ‘åˆ¶é‡å¤çš„æ¶ˆæ¯ã€‚å¯¹è¯æ¡†æ–‡æœ¬ä¹Ÿå¯è¿›ä¸€æ­¥ä¼˜åŒ–ï¼Œä»¥æ˜ç¡®æŒ‡å‡ºè¯¥é”™è¯¯æ— æ³•æ¢å¤ã€‚

![Special6](Special6.png)

> Adobe Acrobat Reader DC å¯¹è¯æ¡†çš„æ”¹è¿›ç‰ˆæœ¬

è‰¯å¥½çš„é”™è¯¯ä¿¡æ¯åº”è¯´æ˜â€”â€”

- å‘ç”Ÿäº†ä»€ä¹ˆ

- å“ªäº›å†…å®¹å—åˆ°äº†å½±å“

- ç”±æ­¤äº§ç”Ÿçš„åæœæ˜¯ä»€ä¹ˆ

- å¯ä»¥é‡‡å–å“ªäº›æªæ–½æ¥è§£å†³

---

**è¯·åŠ¡å¿…**èŠ±æ—¶é—´ç¡®ä¿å¯¹è¯æ¡†è®¾è®¡åˆç†ã€‚

**è¯·åŠ¡å¿…**ä½¿ç”¨çœŸå®ç”¨æˆ·æµ‹è¯•é”™è¯¯ä¿¡æ¯å¹¶æ ¹æ®åé¦ˆè¿›è¡Œä¼˜åŒ–ã€‚

**è¯·å‹¿**å‡è®¾ç”¨æˆ·èƒ½å¤Ÿç†è§£ç¼–ç¨‹æœ¯è¯­æˆ–é”™è¯¯ä¿¡æ¯ã€‚

## 9. çª—å£

åœ¨ä¸Šä¸€ç« ä¸­ï¼Œæˆ‘ä»¬æ¢è®¨äº†å¦‚ä½•æ‰“å¼€å¯¹è¯æ¡†çª—å£ã€‚è¿™äº›æ˜¯ç‰¹æ®Šç±»å‹çš„çª—å£ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šæ•è·ç”¨æˆ·çš„ç„¦ç‚¹ï¼Œå¹¶è¿è¡Œè‡ªå·±çš„äº‹ä»¶å¾ªç¯ï¼Œä»è€Œæœ‰æ•ˆåœ°é˜»å¡åº”ç”¨ç¨‹åºå…¶ä»–éƒ¨åˆ†çš„æ‰§è¡Œã€‚

ç„¶è€Œï¼Œåœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½å¸Œæœ›åœ¨åº”ç”¨ç¨‹åºä¸­æ‰“å¼€ç¬¬äºŒä¸ªçª—å£ï¼ŒåŒæ—¶ä¸é˜»å¡ä¸»çª—å£â€”â€”ä¾‹å¦‚ï¼Œç”¨äºæ˜¾ç¤ºæŸä¸ªé•¿æ—¶é—´è¿è¡Œçš„è¿›ç¨‹çš„è¾“å‡ºï¼Œæˆ–å±•ç¤ºå›¾è¡¨æˆ–å…¶ä»–å¯è§†åŒ–å†…å®¹ã€‚æˆ–è€…ï¼Œæ‚¨å¯èƒ½å¸Œæœ›åˆ›å»ºä¸€ä¸ªåº”ç”¨ç¨‹åºï¼Œå…è®¸æ‚¨åŒæ—¶å¤„ç†å¤šä¸ªæ–‡æ¡£ï¼Œæ¯ä¸ªæ–‡æ¡£éƒ½åœ¨è‡ªå·±çš„çª—å£ä¸­ã€‚

åœ¨ PyQt6 ä¸­æ‰“å¼€æ–°çª—å£ç›¸å¯¹ç®€å•ï¼Œä½†æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ä»¥ç¡®ä¿å…¶æ­£å¸¸å·¥ä½œã€‚åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†é€æ­¥æ¼”ç¤ºå¦‚ä½•åˆ›å»ºæ–°çª—å£ä»¥åŠå¦‚ä½•æŒ‰éœ€æ˜¾ç¤ºå’Œéšè—å¤–éƒ¨çª—å£ã€‚

### åˆ›å»ºä¸€ä¸ªæ–°çª—å£

è¦åœ¨ PyQt6 ä¸­åˆ›å»ºä¸€ä¸ªæ–°çª—å£ï¼Œåªéœ€åˆ›å»ºä¸€ä¸ªæ²¡æœ‰çˆ¶å¯¹è±¡çš„æ§ä»¶å¯¹è±¡çš„æ–°å®ä¾‹å³å¯ã€‚è¯¥æ§ä»¶å¯ä»¥æ˜¯ä»»ä½•æ§ä»¶ï¼ˆä»æŠ€æœ¯ä¸Šè®²ï¼Œå¯ä»¥æ˜¯ `QWidget` çš„ä»»ä½•å­ç±»ï¼‰ï¼ŒåŒ…æ‹¬å¦ä¸€ä¸ª `QMainWindow`ï¼ˆå¦‚æœæ‚¨æ„¿æ„çš„è¯ï¼‰ã€‚

![information](information.png)

> `QMainWindow` å®ä¾‹çš„æ•°é‡æ²¡æœ‰é™åˆ¶ï¼Œå¦‚æœæ‚¨éœ€è¦åœ¨ç¬¬äºŒä¸ªçª—å£ä¸Šä½¿ç”¨å·¥å…·æ æˆ–èœå•ï¼Œæ‚¨ä¹Ÿéœ€è¦ä½¿ç”¨ `QMainWindow` æ¥å®ç°ã€‚

ä¸ä¸»çª—å£ä¸€æ ·ï¼Œåˆ›å»ºçª—å£æ˜¯ä¸å¤Ÿçš„ï¼Œæ‚¨è¿˜å¿…é¡»æ˜¾ç¤ºå®ƒã€‚

*Listing 75. basic/windows_1.py*

```python
import sys
from PyQt6.QtWidgets import (
    QApplication,
    QLabel,
    QMainWindow,
    QPushButton,
    QVBoxLayout,
    QWidget,
)


class AnotherWindow(QWidget):
    """
    æ­¤â€œçª—å£â€æ˜¯ä¸€ä¸ªQWidgetã€‚å¦‚æœå®ƒæ²¡æœ‰çˆ¶çª—å£ï¼Œå®ƒå°†ä»¥è‡ªç”±æµ®åŠ¨çª—å£çš„å½¢å¼æ˜¾ç¤ºã€‚
    """
    def __init__(self):
        super().__init__()
        layout = QVBoxLayout()
        self.label = QLabel("Another Window")
        layout.addWidget(self.label)
        self.setLayout(layout)
        
        
class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        self.button = QPushButton("Push for Window")
        self.button.clicked.connect(self.show_new_window)
        self.setCentralWidget(self.button)
        
    def show_new_window(self, checked):
        w = AnotherWindow()
        w.show()
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

æ‚¨è¿è¡Œè¿™ä¸ªç¨‹åºï¼Œæ‚¨ä¼šçœ‹åˆ°ä¸»çª—å£ã€‚ç‚¹å‡»æŒ‰é’®å¯èƒ½ä¼šæ˜¾ç¤ºç¬¬äºŒä¸ªçª—å£ï¼Œä½†å¦‚æœæ‚¨çœ‹åˆ°å®ƒï¼Œå®ƒåªä¼šæ˜¾ç¤ºä¸€ç¬é—´ã€‚å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ

```python
    def show_new_window(self, checked):
        w = AnotherWindow()
        w.show()
```

æˆ‘ä»¬åœ¨è¯¥æ–¹æ³•å†…åˆ›å»ºç¬¬äºŒä¸ªçª—å£ï¼Œå°†å…¶å­˜å‚¨åœ¨å˜é‡ `w` ä¸­å¹¶æ˜¾ç¤ºå‡ºæ¥ã€‚ç„¶è€Œï¼Œä¸€æ—¦ç¦»å¼€è¯¥æ–¹æ³•ï¼ŒPython ä¼šæ¸…ç† `w` å˜é‡ï¼Œå¯¼è‡´çª—å£è¢«é”€æ¯ã€‚ä¸ºè§£å†³æ­¤é—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦å°†çª—å£çš„å¼•ç”¨ä¿å­˜åœ¨æŸä¸ªä½ç½®â€”â€”ä¾‹å¦‚ä¸»çª—å£çš„ `self` å¯¹è±¡ä¸­ã€‚

*Listing 76. basic/windows_1b.py*

```python
    def show_new_window(self, checked):
        self.w = AnotherWindow()
        self.w.show()
```

ç°åœ¨ï¼Œå½“æ‚¨ç‚¹å‡»æŒ‰é’®ä»¥æ˜¾ç¤ºæ–°çª—å£æ—¶ï¼Œè¯¥çª—å£å°†ä¿æŒæ‰“å¼€çŠ¶æ€ã€‚

![Figure66](Figure66.png)

> å›¾å…­åå…­ï¼šç¬¬äºŒä¸ªçª—å£æŒç»­å­˜åœ¨ã€‚

ç„¶è€Œï¼Œå¦‚æœæ‚¨å†æ¬¡ç‚¹å‡»æŒ‰é’®ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿçª—å£å°†è¢«é‡æ–°åˆ›å»ºï¼è¿™ä¸ªæ–°çª—å£å°†æ›¿æ¢ `self.w` å˜é‡ä¸­çš„æ—§çª—å£ï¼Œè€Œä¹‹å‰çš„çª—å£å°†è¢«é”€æ¯ã€‚å¦‚æœæ‚¨å°† `AnotherWindow` çš„å®šä¹‰ä¿®æ”¹ä¸ºæ¯æ¬¡åˆ›å»ºæ—¶åœ¨æ ‡ç­¾ä¸­æ˜¾ç¤ºä¸€ä¸ªéšæœºæ•°ï¼Œæ‚¨å°†æ›´æ¸…æ¥šåœ°çœ‹åˆ°è¿™ä¸€ç‚¹ã€‚

*Listing 77. basic/windows_2.py*

```python
from random import randint

from PyQt6.QtWidgets import (
    QApplication,
    QLabel,
    QMainWindow,
    QPushButton,
    QVBoxLayout,
    QWidget,
)

class AnotherWindow(QWidget):
    """
    æ­¤â€œçª—å£â€æ˜¯ä¸€ä¸ªQWidgetã€‚å¦‚æœå®ƒæ²¡æœ‰çˆ¶çª—å£ï¼Œå®ƒå°†ä»¥è‡ªç”±æµ®åŠ¨çª—å£çš„å½¢å¼æ˜¾ç¤ºã€‚
    """
    
    def __init__(self):
        super().__init__()
        layout = QVBoxLayout()
        self.label = QLabel("Another Window % d" % randint(0, 100))
        layout.addWidget(self.label)
        self.setLayout(layout)
```

`__init__ `å—ä»…åœ¨åˆ›å»ºçª—å£æ—¶æ‰§è¡Œã€‚å¦‚æœæ‚¨ç»§ç»­ç‚¹å‡»æŒ‰é’®ï¼Œæ•°å­—ä¼šå‘ç”Ÿå˜åŒ–ï¼Œè¡¨æ˜çª—å£æ­£åœ¨è¢«é‡æ–°åˆ›å»ºã€‚

![Figure67](Figure67.png)

> å›¾å…­åä¸ƒï¼šå¦‚æœå†æ¬¡æŒ‰ä¸‹æŒ‰é’®ï¼Œæ•°å­—å°†ä¼šæ”¹å˜ã€‚

ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œåœ¨åˆ›å»ºçª—å£ä¹‹å‰ï¼Œå…ˆæ£€æŸ¥è¯¥çª—å£æ˜¯å¦å·²ç»å­˜åœ¨ã€‚ä¸‹é¢çš„å®Œæ•´ç¤ºä¾‹å±•ç¤ºäº†è¿™ä¸€è¿‡ç¨‹ã€‚

*Listing 78. basic/windows_3.py*

```python
class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        self.w = None # ç›®å‰å°šæœªè®¾ç½®å¤–éƒ¨çª—å£ã€‚
        self.button = QPushButton("Push for Window")
        self.button.clicked.connect(self.show_new_window)
        self.setCentralWidget(self.button)
        
    def show_new_window(self, checked):
        if self.w is None:
            self.w = AnotherWindow()
            self.w.show()
```

è¿™ç§æ–¹æ³•é€‚ç”¨äºä¸´æ—¶åˆ›å»ºçš„çª—å£ï¼Œæˆ–éœ€è¦æ ¹æ®ç¨‹åºå½“å‰çŠ¶æ€è¿›è¡Œæ›´æ”¹çš„çª—å£â€”â€”ä¾‹å¦‚ï¼Œæ‚¨æƒ³æ˜¾ç¤ºç‰¹å®šçš„å›¾è¡¨æˆ–æ—¥å¿—è¾“å‡ºã€‚ç„¶è€Œï¼Œå¯¹äºè®¸å¤šåº”ç”¨ç¨‹åºè€Œè¨€ï¼Œæ‚¨å¯èƒ½éœ€è¦ä¸€äº›æ ‡å‡†çª—å£ï¼Œå¸Œæœ›èƒ½å¤ŸæŒ‰éœ€æ˜¾ç¤ºæˆ–éšè—ã€‚

åœ¨æ¥ä¸‹æ¥çš„éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨å¦‚ä½•å¤„ç†æ­¤ç±»çª—å£ã€‚

### å…³é—­ä¸€ä¸ªçª—å£

å¦‚å‰æ‰€è¿°ï¼Œå¦‚æœæ²¡æœ‰å¯¹çª—å£çš„å¼•ç”¨è¢«ä¿ç•™ï¼Œå®ƒå°†è¢«ä¸¢å¼ƒï¼ˆå¹¶å…³é—­ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ç§è¡Œä¸ºæ¥å…³é—­çª—å£ï¼Œå°†å‰ä¸€ä¸ªç¤ºä¾‹ä¸­çš„ `show_new_window` æ–¹æ³•æ›¿æ¢ä¸º 

*Listing 79. basic/windows_4.py*

```python
    def show_new_window(self, checked):
        if self.w is None:
            self.w = AnotherWindow()
            self.w.show()
        else:
            self.w = None # å–æ¶ˆå¼•ç”¨ï¼Œå…³é—­çª—å£
```

é€šè¿‡å°† `self.w` è®¾ç½®ä¸º `None`ï¼ˆæˆ–ä»»ä½•å…¶ä»–å€¼ï¼‰ï¼Œå¯¹çª—å£çš„ç°æœ‰å¼•ç”¨å°†è¢«ä¸¢å¤±ï¼Œçª—å£å°†å…³é—­ã€‚ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬å°†å®ƒè®¾ç½®ä¸ºé™¤ None ä»¥å¤–çš„ä»»ä½•å…¶ä»–å€¼ï¼Œç¬¬ä¸€ä¸ªæµ‹è¯•å°†ä¸å†é€šè¿‡ï¼Œæˆ‘ä»¬å°†æ— æ³•é‡æ–°åˆ›å»ºä¸€ä¸ªçª—å£ã€‚

è¿™ä»…åœ¨æ‚¨æœªåœ¨å…¶ä»–åœ°æ–¹ä¿ç•™æ­¤çª—å£çš„å¼•ç”¨æ—¶æœ‰æ•ˆã€‚ä¸ºäº†ç¡®ä¿çª—å£æ— è®ºå¦‚ä½•éƒ½ä¼šå…³é—­ï¼Œæ‚¨å¯èƒ½éœ€è¦æ˜¾å¼è°ƒç”¨ `.close()` æ–¹æ³•ã€‚

*Listing 80. basic/windows_4b.py*

```python
    def show_new_window(self, checked):
        if self.w is None:
            self.w = AnotherWindow()
            self.w.show()
            
        else:
            self.w.close()
            self.w = None # å–æ¶ˆå¼•ç”¨ï¼Œå…³é—­çª—å£
```

### æŒä¹…çª—å£

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»æ¢è®¨äº†å¦‚ä½•æŒ‰éœ€åˆ›å»ºæ–°çª—å£ã€‚ç„¶è€Œï¼Œæœ‰æ—¶æ‚¨ä¼šé‡åˆ°å¤šä¸ªæ ‡å‡†åº”ç”¨ç¨‹åºçª—å£çš„æƒ…å†µã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œé€šå¸¸æ›´åˆç†çš„æ–¹æ³•æ˜¯å…ˆåˆ›å»ºè¿™äº›é¢å¤–çª—å£ï¼Œç„¶ååœ¨éœ€è¦æ—¶ä½¿ç”¨ `.show()` æ–¹æ³•å°†å…¶æ˜¾ç¤ºå‡ºæ¥ã€‚

åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬åœ¨ä¸»çª—å£çš„ `__init__` å—ä¸­åˆ›å»ºå¤–éƒ¨çª—å£ï¼Œç„¶åæˆ‘ä»¬çš„  `show_new_window`æ–¹æ³•åªéœ€è°ƒç”¨ `self.w.show()` å³å¯æ˜¾ç¤ºå®ƒã€‚

*Listing 81. basic/windows_5.py*

```python
import sys
from random import randint

from PyQt6.QtWidgets import (
    QApplication,
    QLabel,
    QMainWindow,
    QPushButton,
    QVBoxLayout,
    QWidget,
)

class AnotherWindow(QWidget):
    """
    æ­¤â€œçª—å£â€æ˜¯ä¸€ä¸ªQWidgetã€‚å¦‚æœå®ƒæ²¡æœ‰çˆ¶çª—å£ï¼Œå®ƒå°†ä»¥è‡ªç”±æµ®åŠ¨çª—å£çš„å½¢å¼æ˜¾ç¤ºã€‚
    """

    def __init__(self):
        super().__init__()
        layout = QVBoxLayout()
        self.label = QLabel("Another Window % d" % randint(0, 100))
        layout.addWidget(self.label)
        self.setLayout(layout)
            
            
class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        self.w = AnotherWindow()
        self.button = QPushButton("Push for Window")
        self.button.clicked.connect(self.show_new_window)
        self.setCentralWidget(self.button)
        
    def show_new_window(self, checked):
        self.w.show()
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

å¦‚æœæ‚¨è¿è¡Œè¿™ä¸ªç¨‹åºï¼Œç‚¹å‡»æŒ‰é’®ä¼šåƒä¹‹å‰ä¸€æ ·æ˜¾ç¤ºçª—å£ã€‚æ³¨æ„ï¼Œçª—å£åªåˆ›å»ºä¸€æ¬¡ï¼Œå¯¹å·²ç»å¯è§çš„çª—å£è°ƒç”¨ `.show()` æ–¹æ³•ä¸ä¼šäº§ç”Ÿä»»ä½•æ•ˆæœã€‚

### æ˜¾ç¤ºä¸éšè—çª—å£

ä¸€æ—¦æ‚¨åˆ›å»ºäº†æŒä¹…çª—å£ï¼Œæ‚¨å°±å¯åœ¨ä¸é‡æ–°åˆ›å»ºçš„æƒ…å†µä¸‹æ˜¾ç¤ºæˆ–éšè—å®ƒã€‚éšè—åï¼Œçª—å£ä»å­˜åœ¨ä½†ä¸å¯è§ï¼Œä¸”ä¸ä¼šå“åº”é¼ æ ‡æˆ–å…¶ä»–è¾“å…¥ã€‚ç„¶è€Œï¼Œæ‚¨ä»å¯ç»§ç»­è°ƒç”¨è¯¥çª—å£çš„æ–¹æ³•å¹¶æ›´æ–°å…¶çŠ¶æ€â€”â€”åŒ…æ‹¬æ›´æ”¹å…¶å¤–è§‚ã€‚é‡æ–°æ˜¾ç¤ºåï¼Œæ‰€æœ‰æ›´æ”¹å°†ç«‹å³ç”Ÿæ•ˆã€‚

ä¸‹é¢æˆ‘ä»¬æ›´æ–°ä¸»çª—å£ï¼Œåˆ›å»ºä¸€ä¸ª `toggle_window` æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä½¿ç”¨ `.isVisible()` æ–¹æ³•æ£€æŸ¥çª—å£æ˜¯å¦å½“å‰å¯è§ã€‚å¦‚æœä¸å¯è§ï¼Œåˆ™ä½¿ç”¨ `.show()` æ–¹æ³•æ˜¾ç¤ºå®ƒï¼›å¦‚æœå·²å¯è§ï¼Œåˆ™ä½¿ç”¨ `.hide()` æ–¹æ³•éšè—å®ƒã€‚

```python
class MainWindow(QMainWindow):
    
    def __init__(self):
        super().__init__()
        self.w = AnotherWindow()
        self.button = QPushButton("Push for Window")
        self.button.clicked.connect(self.toggle_window)
        self.setCentralWidget(self.button)
        
    def toggle_window(self, checked):
        if self.w.isVisible():
            self.w.hide()
            
        else:
            self.w.show()
```

ä»¥ä¸‹æ˜¯æ­¤æŒä¹…çª—å£åŠæ˜¾ç¤º/éšè—çŠ¶æ€åˆ‡æ¢çš„å®Œæ•´ç¤ºä¾‹ï¼š

*Listing 82. basic/windows_6.py*

```python
import sys
from random import randint

from PyQt6.QtWidgets import (
    QApplication,
    QLabel,
    QMainWindow,
    QPushButton,
    QVBoxLayout,
    QWidget,
)

class AnotherWindow(QWidget):
    """
    æ­¤â€œçª—å£â€æ˜¯ä¸€ä¸ªQWidgetã€‚å¦‚æœå®ƒæ²¡æœ‰çˆ¶çª—å£ï¼Œå®ƒå°†ä»¥è‡ªç”±æµ®åŠ¨çª—å£çš„å½¢å¼æ˜¾ç¤ºã€‚
    """

    def __init__(self):
        super().__init__()
        layout = QVBoxLayout()
        self.label = QLabel("Another Window % d" % randint(0, 100))
        layout.addWidget(self.label)
        self.setLayout(layout)
            
            
class MainWindow(QMainWindow):
    
    def __init__(self):
        super().__init__()
        self.w = AnotherWindow()
        self.button = QPushButton("Push for Window")
        self.button.clicked.connect(self.toggle_window)
        self.setCentralWidget(self.button)
        
    def toggle_window(self, checked):
        if self.w.isVisible():
            self.w.hide()
            
        else:
            self.w.show()
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

åŒæ ·ï¼Œçª—å£ä»…åˆ›å»ºä¸€æ¬¡â€”â€”çª—å£çš„ `__init__` å—ä¸ä¼šåœ¨æ¯æ¬¡é‡æ–°æ˜¾ç¤ºçª—å£æ—¶é‡æ–°è¿è¡Œï¼ˆå› æ­¤æ ‡ç­¾ä¸­çš„æ•°å­—ä¸ä¼šæ”¹å˜ï¼‰ã€‚

### è¿æ¥çª—å£ä¹‹é—´çš„ä¿¡å·

åœ¨ä¿¡å·ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å¦‚ä½•ç›´æ¥ä½¿ç”¨ä¿¡å·å’Œæ§½å°†æ§ä»¶è¿æ¥åœ¨ä¸€èµ·ã€‚æˆ‘ä»¬åªéœ€è¦åˆ›å»ºç›®æ ‡æ§ä»¶ï¼Œå¹¶é€šè¿‡å˜é‡å¼•ç”¨å®ƒå³å¯ã€‚è¿æ¥è·¨çª—å£çš„ä¿¡å·æ—¶ï¼ŒåŒæ ·çš„åŸåˆ™ä¹Ÿé€‚ç”¨â€”â€”æ‚¨å¯ä»¥å°†ä¸€ä¸ªçª—å£ä¸­çš„ä¿¡å·è¿æ¥åˆ°å¦ä¸€ä¸ªçª—å£ä¸­çš„æ§½ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‚¨åªéœ€è¦èƒ½å¤Ÿè®¿é—®è¯¥æ§½å³å¯ã€‚

åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä¸»çª—å£ä¸Šçš„æ–‡æœ¬è¾“å…¥æ¡†è¿æ¥åˆ°å­çª—å£ä¸Šçš„ `QLabel` æ§ä»¶ã€‚

*Listing 83. basic/windows_7.py*

```python
import sys
from random import randint

from PyQt6.QtWidgets import (
    QApplication,
    QLabel,
    QMainWindow,
    QPushButton,
    QVBoxLayout,
    QWidget,
    QLineEdit,
)



class AnotherWindow(QWidget):
    """
    æ­¤â€œçª—å£â€æ˜¯ä¸€ä¸ªQWidgetã€‚å¦‚æœå®ƒæ²¡æœ‰çˆ¶çª—å£ï¼Œå®ƒå°†ä»¥è‡ªç”±æµ®åŠ¨çª—å£çš„å½¢å¼æ˜¾ç¤ºã€‚
    """
    
    def __init__(self):
        super().__init__()
        layout = QVBoxLayout()
        self.label = QLabel("Another Window") #2
        layout.addWidget(self.label)
        self.setLayout(layout)
        
        
class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        self.w = AnotherWindow()
        self.button = QPushButton("Push for Window")
        self.button.clicked.connect(self.toggle_window)
        
        self.input = QLineEdit()
        self.input.textChanged.connect(self.w.label.setText) #1
        layout = QVBoxLayout()
        layout.addWidget(self.button)
        layout.addWidget(self.input)
        container = QWidget()
        container.setLayout(layout)
        
        self.setCentralWidget(container)
        
    def toggle_window(self, checked):
        if self.w.isVisible():
            self.w.hide()
            
        else:
            self.w.show()
            
            
app = QApplication(sys.argv)

w = MainWindow()
w.show()

app.exec()
```

> 1. `AnotherWindow` çª—å£å¯¹è±¡å¯é€šè¿‡å˜é‡ `self.w` è®¿é—®ã€‚`QLabel` å¯é€šè¿‡ `self.w.label` å’Œ `.setText` æ§½é€šè¿‡ `self.w.label.setText` è®¿é—®ã€‚
> 2. å½“åˆ›å»º `QLabel` æ—¶ï¼Œæˆ‘ä»¬å°†å¯¹å…¶çš„å¼•ç”¨å­˜å‚¨åœ¨ `self` ä¸Šä½œä¸º `self.label`ï¼Œå› æ­¤å¯ä»¥åœ¨å¯¹è±¡å¤–éƒ¨è®¿é—®å®ƒã€‚

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** åœ¨ä¸Šæ–¹æ¡†ä¸­è¾“å…¥ä¸€äº›æ–‡æœ¬ï¼Œæ‚¨ä¼šçœ‹åˆ°å®ƒç«‹å³å‡ºç°åœ¨æ ‡ç­¾ä¸Šã€‚å³ä½¿çª—å£è¢«éšè—ï¼Œæ–‡æœ¬ä¹Ÿä¼šæ›´æ–°â€”â€”æ§ä»¶çŠ¶æ€çš„æ›´æ–°å¹¶ä¸ä¾èµ–äºå®ƒä»¬æ˜¯å¦å¯è§ã€‚

å½“ç„¶ï¼Œæ‚¨ä¹Ÿå¯ä»¥å°†ä¸€ä¸ªçª—å£ä¸Šçš„ä¿¡å·è¿æ¥åˆ°å¦ä¸€ä¸ªçª—å£ä¸Šçš„æ–¹æ³•ã€‚åªè¦å¯ä»¥è®¿é—®ï¼Œä»»ä½•æ“ä½œéƒ½æ˜¯å¯è¡Œçš„ã€‚ç¡®ä¿ç»„ä»¶å¯ä»¥ç›¸äº’å¯¼å…¥å’Œè®¿é—®æ˜¯æ„å»ºé€»è¾‘é¡¹ç›®ç»“æ„çš„ä¸€ä¸ªå¾ˆå¥½çš„åŠ¨æœºã€‚é€šå¸¸ï¼Œåœ¨ä¸»çª—å£/æ¨¡å—ä¸­é›†ä¸­è¿æ¥ç»„ä»¶æ˜¯åˆç†çš„ï¼Œè¿™æ ·å¯ä»¥é¿å…äº¤å‰å¯¼å…¥æ‰€æœ‰å†…å®¹ã€‚

## 10. äº‹ä»¶

ç”¨æˆ·ä¸ Qt åº”ç”¨ç¨‹åºä¹‹é—´çš„æ¯æ¬¡äº¤äº’éƒ½æ˜¯ä¸€ä¸ªäº‹ä»¶ã€‚äº‹ä»¶æœ‰å¤šç§ç±»å‹ï¼Œæ¯ç§ç±»å‹ä»£è¡¨ä¸€ç§ä¸åŒçš„äº¤äº’ç±»å‹ã€‚Qt ä½¿ç”¨äº‹ä»¶å¯¹è±¡æ¥è¡¨ç¤ºè¿™äº›äº‹ä»¶ï¼Œäº‹ä»¶å¯¹è±¡æ‰“åŒ…äº†å…³äºå‘ç”Ÿäº‹ä»¶çš„ä¿¡æ¯ã€‚è¿™äº›äº‹ä»¶è¢«ä¼ é€’åˆ°å‘ç”Ÿäº¤äº’çš„æ§ä»¶ä¸Šçš„ç‰¹å®šäº‹ä»¶å¤„ç†ç¨‹åºã€‚

é€šè¿‡å®šä¹‰è‡ªå®šä¹‰äº‹ä»¶å¤„ç†ç¨‹åºï¼Œæ‚¨å¯ä»¥æ›´æ”¹æ§ä»¶å¯¹è¿™äº›äº‹ä»¶çš„å“åº”æ–¹å¼ã€‚äº‹ä»¶å¤„ç†ç¨‹åºä¸å…¶ä»–æ–¹æ³•ä¸€æ ·è¿›è¡Œå®šä¹‰ï¼Œä½†åç§°æ˜¯æ ¹æ®å®ƒä»¬å¤„ç†çš„äº‹ä»¶ç±»å‹æ¥æŒ‡å®šçš„ã€‚

æ§ä»¶æ¥æ”¶çš„ä¸»è¦äº‹ä»¶ä¹‹ä¸€æ˜¯ `QMouseEvent` ã€‚`QMouseEvent` äº‹ä»¶æ˜¯åœ¨æ§ä»¶ä¸Šæ¯æ¬¡é¼ æ ‡ç§»åŠ¨å’ŒæŒ‰é’®ç‚¹å‡»æ—¶åˆ›å»ºçš„ã€‚ä»¥ä¸‹äº‹ä»¶å¤„ç†ç¨‹åºå¯ç”¨äºå¤„ç†é¼ æ ‡äº‹ä»¶ï¼š

| äº‹ä»¶å¤„ç†å™¨              | è¢«æ›´æ”¹çš„äº‹ä»¶   |
| ----------------------- | -------------- |
| `mouseMoveEvent`        | é¼ æ ‡ç§»åŠ¨       |
| `mousePressEvent`       | é¼ æ ‡æŒ‰é’®è¢«æŒ‰ä¸‹ |
| `mouseReleaseEvent`     | é¼ æ ‡æŒ‰é’®è¢«æ¾å¼€ |
| `mouseDoubleClickEvent` | æ£€æµ‹åˆ°åŒå‡»     |

ä¾‹å¦‚ï¼Œå•å‡»ä¸€ä¸ªæ§ä»¶ä¼šè§¦å‘ä¸€ä¸ª `QMouseEvent` äº‹ä»¶ï¼Œè¯¥äº‹ä»¶å°†è¢«å‘é€ç»™è¯¥æ§ä»¶çš„ `.mousePressEvent`äº‹ä»¶å¤„ç†ç¨‹åºã€‚è¯¥å¤„ç†ç¨‹åºå¯ä»¥ä½¿ç”¨äº‹ä»¶å¯¹è±¡æ¥æŸ¥æ‰¾å‘ç”Ÿçš„äº‹æƒ…çš„ç›¸å…³ä¿¡æ¯ï¼Œä¾‹å¦‚è§¦å‘è¯¥äº‹ä»¶çš„åŸå› ä»¥åŠå…·ä½“å‘ç”Ÿçš„ä½ç½®ã€‚

æ‚¨å¯ä»¥é€šè¿‡ç»§æ‰¿ç±»å¹¶é‡å†™å¤„ç†æ–¹æ³•æ¥æ‹¦æˆªäº‹ä»¶ã€‚æ‚¨å¯ä»¥é€‰æ‹©è¿‡æ»¤ã€ä¿®æ”¹æˆ–å¿½ç•¥äº‹ä»¶ï¼Œå¹¶å°†å®ƒä»¬ä¼ é€’ç»™äº‹ä»¶çš„æ­£å¸¸å¤„ç†ç¨‹åºï¼Œæ–¹æ³•æ˜¯è°ƒç”¨çˆ¶ç±»å‡½æ•°å¹¶ä½¿ç”¨ `super()` ã€‚è¿™äº›å¯ä»¥æ·»åŠ åˆ°æ‚¨çš„ä¸»çª—å£ç±»ä¸­ï¼Œå¦‚ä¸‹ä¾‹æ‰€ç¤ºã€‚åœ¨æ¯ç§æƒ…å†µä¸‹ï¼Œå‚æ•° `e` å°†æ¥æ”¶ä¼ å…¥çš„äº‹ä»¶ã€‚

*Listing 84. basic/events_1.py*

```python
import sys
from PyQt6.QtCore import Qt
from PyQt6.QtWidgets import (
    QApplication,
    QLabel,
    QMainWindow,
    QTextEdit,
)


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        self.label = QLabel("Click in this window")
        self.setCentralWidget(self.label)
        
    def mouseMoveEvent(self, e):
        self.label.setText("mouseMoveEvent")
        
    def mousePressEvent(self, e):
        self.label.setText("mousePressEvent")
        
    def mouseReleaseEvent(self, e):
        self.label.setText("mouseReleaseEvent")
        
    def mouseDoubleClickEvent(self, e):
        self.label.setText("mouseDoubleClickEvent")
        
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

> ğŸš€ **è¿è¡Œå®ƒå§ï¼** è¯·æ‚¨å°è¯•åœ¨çª—å£ä¸­ç§»åŠ¨å’Œç‚¹å‡»ï¼ˆä»¥åŠåŒå‡»ï¼‰ï¼Œè§‚å¯Ÿäº‹ä»¶çš„å‡ºç°ã€‚

æ‚¨ä¼šå‘ç°ï¼Œé¼ æ ‡ç§»åŠ¨äº‹ä»¶ä»…ä¼šåœ¨æŒ‰ä¸‹æŒ‰é’®æ—¶è§¦å‘ã€‚æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨ `self.setMouseTracking(True)`æ–¹æ³•åœ¨çª—å£ä¸Šæ›´æ”¹æ­¤è¡Œä¸ºã€‚æ‚¨è¿˜å¯èƒ½æ³¨æ„åˆ°ï¼ŒæŒ‰ä¸‹ï¼ˆç‚¹å‡»ï¼‰å’ŒåŒå‡»äº‹ä»¶åœ¨æŒ‰ä¸‹æŒ‰é’®æ—¶å‡ä¼šè§¦å‘ã€‚ä»…åœ¨é‡Šæ”¾æŒ‰é’®æ—¶è§¦å‘é‡Šæ”¾äº‹ä»¶ã€‚é€šå¸¸ï¼Œè¦æ³¨å†Œç”¨æˆ·çš„ç‚¹å‡»äº‹ä»¶ï¼Œæ‚¨åº”è¯¥ç›‘å¬é¼ æ ‡æŒ‰ä¸‹å’Œé‡Šæ”¾ä¸¤ä¸ªäº‹ä»¶ã€‚

åœ¨äº‹ä»¶å¤„ç†ç¨‹åºä¸­ï¼Œæ‚¨å¯ä»¥è®¿é—®ä¸€ä¸ªäº‹ä»¶å¯¹è±¡ã€‚è¯¥å¯¹è±¡åŒ…å«æœ‰å…³äº‹ä»¶çš„ä¿¡æ¯ï¼Œå¹¶å¯æ ¹æ®å…·ä½“å‘ç”Ÿçš„æƒ…å†µé‡‡å–ä¸åŒçš„å“åº”æ–¹å¼ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°†æ¢è®¨é¼ æ ‡äº‹ä»¶å¯¹è±¡ã€‚

### é¼ æ ‡äº‹ä»¶

Qt ä¸­æ‰€æœ‰é¼ æ ‡äº‹ä»¶å‡é€šè¿‡ `QMouseEvent` å¯¹è±¡è¿›è¡Œè·Ÿè¸ªï¼Œç›¸å…³äº‹ä»¶ä¿¡æ¯å¯é€šè¿‡ä»¥ä¸‹äº‹ä»¶æ–¹æ³•è¿›è¡Œè¯»å–ã€‚

| æ–¹æ³•         | è¿”å›çš„ç»“æœ                           |
| ------------ | ------------------------------------ |
| `.button()`  | è§¦å‘æ­¤äº‹ä»¶çš„ç‰¹å®šæŒ‰é’®                 |
| `.buttons()` | æ‰€æœ‰é¼ æ ‡æŒ‰é’®çš„çŠ¶æ€ï¼ˆæˆ–è¿ç®—æ ‡å¿—ï¼‰     |
| `.position() | æ§ä»¶çš„ç›¸å¯¹ä½ç½®ï¼Œä»¥ `QPoint` æ•´æ•°è¡¨ç¤º |

æ‚¨å¯ä»¥åœ¨äº‹ä»¶å¤„ç†ç¨‹åºä¸­ä½¿ç”¨è¿™äº›æ–¹æ³•æ¥å¯¹ä¸åŒçš„äº‹ä»¶åšå‡ºä¸åŒçš„å“åº”ï¼Œæˆ–è€…å®Œå…¨å¿½ç•¥å®ƒä»¬ã€‚ `.position()` æ–¹æ³•ä»¥` QPoint` å¯¹è±¡çš„å½¢å¼æä¾›æ§ä»¶çš„ç›¸å¯¹ä½ç½®ä¿¡æ¯ï¼Œè€ŒæŒ‰é’®åˆ™ä½¿ç”¨ Qt å‘½åç©ºé—´ä¸­çš„é¼ æ ‡æŒ‰é’®ç±»å‹è¿›è¡ŒæŠ¥å‘Šã€‚

ä¾‹å¦‚ï¼Œä»¥ä¸‹ä»£ç å…è®¸æˆ‘ä»¬å¯¹çª—å£çš„å·¦é”®ã€å³é”®æˆ–ä¸­é”®ç‚¹å‡»åšå‡ºä¸åŒçš„å“åº”ã€‚

*Listing 85. basic/events_2.py*

```python
    def mousePressEvent(self, e):
        if e.button() == Qt.MouseButton.LeftButton:
            # åœ¨æ­¤å¤„ç†å·¦é”®æŒ‰ä¸‹äº‹ä»¶
            self.label.setText("mousePressEvent LEFT")
            
        elif e.button() == Qt.MouseButton.MiddleButton:
            # åœ¨æ­¤å¤„ç†ä¸­é—´æŒ‰é’®çš„æŒ‰ä¸‹æ“ä½œ
            self.label.setText("mousePressEvent MIDDLE")
            
        elif e.button() == Qt.MouseButton.RightButton:
            # åœ¨æ­¤å¤„å¤„ç†å³é”®æŒ‰ä¸‹äº‹ä»¶
            self.label.setText("mousePressEvent RIGHT")
            
    def mouseReleaseEvent(self, e):
        if e.button() == Qt.MouseButton.LeftButton:
            self.label.setText("mouseReleaseEvent LEFT")
            
        elif e.button() == Qt.MouseButton.MiddleButton:
            self.label.setText("mouseReleaseEvent MIDDLE")
            
        elif e.button() == Qt.MouseButton.RightButton:
            self.label.setText("mouseReleaseEvent RIGHT")
            
    def mouseDoubleClickEvent(self, e):
        if e.button() == Qt.MouseButton.LeftButton:
            self.label.setText("mouseDoubleClickEvent LEFT")
            
        elif e.button() == Qt.MouseButton.MiddleButton:
            self.label.setText("mouseDoubleClickEvent MIDDLE")
            
        elif e.button() == Qt.MouseButton.RightButton:
            self.label.setText("mouseDoubleClickEvent RIGHT")
```

æŒ‰é’®æ ‡è¯†ç¬¦åœ¨ Qt å‘½åç©ºé—´ä¸­å®šä¹‰ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

| æ ‡è¯†ç¬¦                         | å€¼(äºŒè¿›åˆ¶) | ä»£è¡¨çš„äº‹ä»¶                           |
| ------------------------------ | ---------- | ------------------------------------ |
| `Qt.MouseButtons.NoButton`     | 0(`000`)   | æœªæŒ‰ä¸‹æŒ‰é’®ï¼Œæˆ–è¯¥äº‹ä»¶ä¸æŒ‰ä¸‹æŒ‰é’®æ— å…³ã€‚ |
| `Qt.MouseButtons.LeftButton`   | 1(`001`)   | å·¦é”®è¢«æŒ‰ä¸‹                           |
| `Qt.MouseButtons.RightButton`  | 2(`010`)   | å³é”®è¢«æŒ‰ä¸‹                           |
| `Qt.MouseButtons.MiddleButton` | 3(`100`)   | ä¸­é—´çš„æŒ‰é”®è¢«æŒ‰ä¸‹                     |

![information](information.png)

> å¯¹äºå³æ‰‹é¼ æ ‡ï¼Œå·¦å³æŒ‰é’®çš„ä½ç½®æ˜¯ç›¸åçš„ï¼Œå³æŒ‰ä¸‹æœ€å³è¾¹çš„æŒ‰é’®å°†è¿”å› `Qt.MouseButtons.LeftButton` ã€‚è¿™æ„å‘³ç€æ‚¨æ— éœ€åœ¨ä»£ç ä¸­è€ƒè™‘é¼ æ ‡çš„æ–¹å‘ã€‚

![tips](tips.png)

> è¦æ›´æ·±å…¥åœ°äº†è§£è¿™ä¸€åˆ‡çš„å·¥ä½œåŸç†ï¼Œè¯·å‚é˜…åæ–‡çš„ â€œ35. æšä¸¾å’Œ Qt å‘½åç©ºé—´â€ã€‚

### ä¸Šä¸‹æ–‡èœå•

ä¸Šä¸‹æ–‡èœå•æ˜¯å°å‹ä¸Šä¸‹æ–‡ç›¸å…³èœå•ï¼Œé€šå¸¸åœ¨å³é”®å•å‡»çª—å£æ—¶å‡ºç°ã€‚Qt æ”¯æŒç”Ÿæˆè¿™äº›èœå•ï¼Œå¹¶ä¸”æ§ä»¶æœ‰ä¸€ä¸ªç”¨äºè§¦å‘å®ƒä»¬çš„ç‰¹å®šäº‹ä»¶ã€‚åœ¨ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†æ‹¦æˆª  `QMainWindow` çš„ `.contextMenuEvent` ã€‚æ¯å½“ä¸Šä¸‹æ–‡èœå•å³å°†æ˜¾ç¤ºæ—¶ï¼Œéƒ½ä¼šè§¦å‘æ­¤äº‹ä»¶ï¼Œå¹¶ä¼ é€’ä¸€ä¸ªç±»å‹ä¸º `QContextMenuEvent` çš„å•ä¸€å€¼äº‹ä»¶ã€‚

è¦æ‹¦æˆªè¯¥äº‹ä»¶ï¼Œæˆ‘ä»¬åªéœ€ç”¨æˆ‘ä»¬çš„æ–°æ–¹æ³•è¦†ç›–å¯¹è±¡æ–¹æ³•ï¼Œè¯¥æ–¹æ³•å…·æœ‰ç›¸åŒçš„åç§°ã€‚å› æ­¤ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ `MainWindow` å­ç±»ä¸­åˆ›å»ºä¸€ä¸ªåä¸º `contextMenuEvent` çš„æ–¹æ³•ï¼Œå®ƒå°†æ¥æ”¶æ‰€æœ‰æ­¤ç±»å‹çš„äº‹ä»¶ã€‚

*Listing 86. basic/events_3.py*

```python
import sys

from PyQt6.QtCore import Qt
from PyQt6.QtGui import QAction
from PyQt6.QtWidgets import (
    QApplication,
    QLabel,
    QMainWindow,
    QMenu,
)


class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        
    def contextMenuEvent(self, e):
        context = QMenu(self)
        context.addAction(QAction("test 1", self))
        context.addAction(QAction("test 2", self))
        context.addAction(QAction("test 3", self))
        context.exec(e.globalPos())
        
app = QApplication(sys.argv)

window = MainWindow()
window.show()

app.exec()
```

å¦‚æœè¿è¡Œä¸Šè¿°ä»£ç å¹¶åœ¨çª—å£å†…å³é”®å•å‡»ï¼Œæ‚¨ä¼šçœ‹åˆ°ä¸€ä¸ªä¸Šä¸‹æ–‡èœå•å‡ºç°ã€‚æ‚¨å¯ä»¥åƒå¾€å¸¸ä¸€æ ·åœ¨èœå•æ“ä½œä¸Šè®¾ç½® `.triggered` æ§½ï¼ˆå¹¶é‡æ–°ä½¿ç”¨ä¸ºèœå•å’Œå·¥å…·æ å®šä¹‰çš„æ“ä½œï¼‰ã€‚

![information](information.png)

> åœ¨å°†åˆå§‹ä½ç½®ä¼ é€’ç»™ `exec()` æ–¹æ³•æ—¶ï¼Œè¯¥ä½ç½®å¿…é¡»ç›¸å¯¹äºåœ¨å®šä¹‰æ—¶ä¼ é€’çš„çˆ¶å¯¹è±¡ã€‚åœ¨æ­¤æƒ…å†µä¸‹æˆ‘ä»¬ä¼ é€’ `self` ä½œä¸ºçˆ¶å¯¹è±¡ï¼Œå› æ­¤å¯ä»¥ä½¿ç”¨å…¨å±€ä½ç½®ã€‚

ä¸ºäº†å®Œæ•´èµ·è§ï¼Œè¿˜æœ‰ä¸€ç§åŸºäºä¿¡å·çš„æ–¹æ³•æ¥åˆ›å»ºä¸Šä¸‹æ–‡èœå•ã€‚

```python
class MainWindow(QMainWindow):
    def __init__(self):
        super().__init__()
        self.show()
        
        self.setContextMenuPolicy(
            Qt.ContextMenuPolicy.CustomContextMenu
        )
        self.customContextMenuRequested.connect(self.on_context_menu)
        
    def on_context_menu(self, pos):
        context = QMenu(self)
        context.addAction(QAction("test 1", self))
        context.addAction(QAction("test 2", self))
        context.addAction(QAction("test 3", self))
        context.exec(self.mapToGlobal(pos))
```

å®Œå…¨ç”±æ‚¨å†³å®šé€‰æ‹©å“ªä¸€ä¸ªã€‚

### äº‹ä»¶å±‚æ¬¡ç»“æ„

åœ¨ pyqt6 ä¸­ï¼Œæ¯ä¸ªæ§ä»¶éƒ½æ˜¯ä¸¤ä¸ªä¸åŒå±‚æ¬¡ç»“æ„çš„ä¸€éƒ¨åˆ†ï¼šPython å¯¹è±¡å±‚æ¬¡ç»“æ„å’Œ Qt å¸ƒå±€å±‚æ¬¡ç»“æ„ã€‚æ‚¨å¯¹äº‹ä»¶åšå‡ºå“åº”æˆ–å¿½ç•¥äº‹ä»¶çš„æ–¹å¼ä¼šå½±å“ç”¨æˆ·ç•Œé¢çš„è¡Œä¸ºã€‚

#### Python ç»§æ‰¿è½¬å‘

é€šå¸¸æƒ…å†µä¸‹ï¼Œæ‚¨å¯èƒ½å¸Œæœ›æ‹¦æˆªä¸€ä¸ªäº‹ä»¶ï¼Œå¯¹å…¶è¿›è¡Œå¤„ç†ï¼Œä½†ä»ç„¶è§¦å‘é»˜è®¤äº‹ä»¶å¤„ç†è¡Œä¸ºã€‚å¦‚æœæ‚¨çš„å¯¹è±¡æ˜¯ä»æ ‡å‡†æ§ä»¶ç»§æ‰¿çš„ï¼Œåˆ™å®ƒå¾ˆå¯èƒ½é»˜è®¤å®ç°äº†åˆç†çš„è¡Œä¸ºã€‚æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨ `super()` è°ƒç”¨çˆ¶çº§å®ç°æ¥è§¦å‘æ­¤è¡Œä¸ºã€‚

![information](information.png)

> è¿™æ˜¯ Python çš„çˆ¶ç±»ï¼Œè€Œä¸æ˜¯ pyqt6 çš„ `.parent()`ã€‚

```python
def mousePressEvent(self, event):
    print("Mouse pressed!")
    super(self, MainWindow).contextMenuEvent(event)
```

è¯¥äº‹ä»¶å°†ç»§ç»­æŒ‰æ­£å¸¸æ–¹å¼è¿è¡Œï¼Œä½†æ‚¨æ·»åŠ äº†éƒ¨åˆ†ä¸å¹²æ‰°çš„è¡Œä¸ºã€‚

#### å¸ƒå±€è½¬å‘

å½“æ‚¨å°†æ§ä»¶æ·»åŠ åˆ°åº”ç”¨ç¨‹åºæ—¶ï¼Œå®ƒä¹Ÿä¼šä»å¸ƒå±€ä¸­è·å¾—å¦ä¸€ä¸ªçˆ¶çº§ã€‚å¯ä»¥é€šè¿‡è°ƒç”¨ `.parent()` æ¥æ‰¾åˆ°æ§ä»¶çš„çˆ¶çº§ã€‚æœ‰æ—¶ï¼Œæ‚¨å¯ä»¥æ‰‹åŠ¨æŒ‡å®šè¿™äº›çˆ¶çº§ï¼Œä¾‹å¦‚å¯¹äº `QMenu` æˆ– `QDialog`ï¼Œä½†é€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™æ˜¯è‡ªåŠ¨å®Œæˆçš„ã€‚ä¾‹å¦‚ï¼Œå½“æ‚¨å°†æ§ä»¶æ·»åŠ åˆ°ä¸»çª—å£æ—¶ï¼Œä¸»çª—å£å°†æˆä¸ºè¯¥æ§ä»¶çš„çˆ¶çº§ã€‚

å½“æ‚¨ä¸ºç”¨æˆ·ä¸ç”¨æˆ·ç•Œé¢çš„äº¤äº’åˆ›å»ºäº‹ä»¶æ—¶ï¼Œè¿™äº›äº‹ä»¶å°†ä¼ é€’åˆ°ç”¨æˆ·ç•Œé¢ä¸­æœ€ä¸Šé¢çš„æ§ä»¶ã€‚å¦‚æœå•å‡»çª—å£ä¸­çš„æŒ‰é’®ï¼Œè¯¥æŒ‰é’®å°†åœ¨çª—å£ä¹‹å‰æ¥æ”¶äº‹ä»¶ã€‚å¦‚æœç¬¬ä¸€ä¸ªæ§ä»¶æ— æ³•å¤„ç†äº‹ä»¶ï¼Œæˆ–è€…é€‰æ‹©ä¸å¤„ç†ï¼Œåˆ™äº‹ä»¶å°†å‘ä¸Šä¼ æ’­åˆ°çˆ¶æ§ä»¶ï¼Œè¯¥æ§ä»¶å°†è·å¾—å¤„ç†äº‹ä»¶çš„æœºä¼šã€‚è¿™ç§å‘ä¸Šä¼ æ’­å°†ä¸€ç›´æŒç»­åˆ°åµŒå¥—æ§ä»¶ï¼Œç›´åˆ°äº‹ä»¶è¢«å¤„ç†æˆ–åˆ°è¾¾ä¸»çª—å£ã€‚

åœ¨æ‚¨è‡ªå·±çš„äº‹ä»¶å¤„ç†ç¨‹åºä¸­ï¼Œæ‚¨å¯ä»¥é€‰æ‹©é€šè¿‡è°ƒç”¨ `.accept()` æ–¹æ³•å°†äº‹ä»¶æ ‡è®°ä¸ºå·²å¤„ç†ã€‚

```python
    class CustomButton(Qbutton)
        def mousePressEvent(self, e):
            e.accept()
```

æˆ–è€…ï¼Œæ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨äº‹ä»¶å¯¹è±¡çš„ `.ignore()` æ–¹æ³•å°†å…¶æ ‡è®°ä¸ºæœªå¤„ç†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œäº‹ä»¶å°†ç»§ç»­å‘ä¸Šçº§å±‚çº§ä¼ é€’ï¼Œå°±åƒå†’æ³¡ä¸€æ ·ã€‚

```python
    class CustomButton(Qbutton)
        def mousePressEvent(self, e):
            e.ignore()
```

å¦‚æœæ‚¨å¸Œæœ›æ§ä»¶å¯¹äº‹ä»¶ä¿æŒé€æ˜ï¼Œåˆ™å¯ä»¥æ”¾å¿ƒåœ°å¿½ç•¥æ‚¨å·²ç»ä»¥æŸç§æ–¹å¼å“åº”è¿‡çš„äº‹ä»¶ã€‚åŒæ ·ï¼Œæ‚¨ä¹Ÿå¯ä»¥é€‰æ‹©æ¥å—æ‚¨æœªå“åº”çš„äº‹ä»¶ï¼Œä»¥è®©å®ƒä»¬é™é»˜å¤„ç†ã€‚

![information](information.png)

> è¿™å¯èƒ½ä¼šé€ æˆæ··æ·†ï¼Œå› ä¸ºæ‚¨å¯èƒ½ä¼šè®¤ä¸ºè°ƒç”¨ `.ignore()` ä¼šå®Œå…¨å¿½ç•¥è¯¥äº‹ä»¶ã€‚ä½†äº‹å®å¹¶éå¦‚æ­¤ï¼šæ‚¨åªæ˜¯å¿½ç•¥äº†æ­¤æ§ä»¶çš„äº‹ä»¶ï¼
